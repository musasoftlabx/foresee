(self["webpackChunkforesee"]=self["webpackChunkforesee"]||[]).push([[617],{53280:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});n(57658);var i=function(){var e=this,t=e._self._c;return t("v-main",[t("v-navigation-drawer",{staticStyle:{height:"calc(100vh - 60px)"},attrs:{"mini-variant":e.MiniVariant,"expand-on-hover":!1,permanent:e.permanent,app:"",clipped:"",fixed:"",color:"white",width:"200px"},model:{value:e.drawer.visible,callback:function(t){e.$set(e.drawer,"visible",t)},expression:"drawer.visible"}},[t("v-list-item",[t("v-list-item-content",[t("v-row",{staticClass:"py-3",attrs:{"no-gutters":""}},[t("v-col",[t("v-icon",{attrs:{size:"24"},on:{click:function(t){e.MiniVariant=!e.MiniVariant}}},[e._v("mdi-menu")]),e.MiniVariant?e._e():t("div",{staticClass:"text-h5 grey--text font-weight-bold mb-1 mt-4"},[e._v(" 4C-Tech ")])],1)],1)],1)],1),t("v-list",{attrs:{nav:"",shaped:""}},[t("v-list-item-group",{attrs:{"active-class":"DrawerActive"},model:{value:e.currentRoute,callback:function(t){e.currentRoute=t},expression:"currentRoute"}},e._l(e.ComputeAccessMatrix,(function(n){return t("v-list-item",{key:n.text,on:{click:function(t){return e.$router.push("/"+n.route)}}},[t("v-list-item-action",[t("v-icon",[e._v(e._s(n.icon))])],1),t("v-list-item-content",[t("v-list-item-title",{staticClass:"text-subtitle-1"},[e._v(e._s(n.text))])],1),n.new?t("v-chip",{attrs:{color:"primary","x-small":""}},[e._v("new")]):e._e()],1)})),1)],1)],1)],1)},a=[],r={data(){return{currentRoute:this.$router.name,MiniVariant:!!this.$vuetify.breakpoint.smAndDown,permanent:!0}},watch:{"$vuetify.breakpoint.smAndDown"(e){e?(this.MiniVariant=!0,this.permanent=!0):this.MiniVariant=!1}}},o=r,s=n(1001),l=(0,s.Z)(o,i,a,!1,null,null,null),c=l.exports},81671:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=function(){var e=this,t=e._self._c;return t("section",[t("v-snackbar",{attrs:{color:e.snackbar.color,timeout:e.snackbar.timeout,bottom:e.snackbar.bottom,left:e.snackbar.left,right:e.snackbar.right,vertical:e.snackbar.vertical,"multi-line":e.snackbar.multiline},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[t("span",{class:e.snackbar.textcolor+"--text"},[e._v(e._s(e.snackbar.content))]),e.snackbar.action?t("v-btn",{attrs:{text:"",color:"yellow"},on:{click:function(t){e.snackbar.visible=!1}}},[e._v("VIEW")]):e._e(),e.snackbar.loader?t("v-progress-circular",{attrs:{size:20,indeterminate:"",color:"primary"}}):e._e()],1)],1)},a=[],r={data(){return{snackbar:{visible:!1,content:null,route:null,color:void 0,textcolor:"white",loader:!1,timeout:-1,action:!1,right:!0,left:!1,bottom:!0,vertical:!1,multiline:!1}}},methods:{Snackify(e){this.snackbar={...this.snackbar,...e}}}},o=r,s=n(1001),l=(0,s.Z)(o,i,a,!1,null,null,null),c=l.exports},96958:function(module,__unused_webpack_exports,__webpack_require__){__webpack_require__(57658);var URL="http://157.230.102.45/api/libraries/FancyGridModules/";!function(e,t){module.exports?module.exports=e.document?t(e):t:e.Fancy=t(e)}("undefined"!=typeof window?window:this,(function(win){var Fancy={global:window,version:"1.7.172",site:"fancygrid.com",COLORS:["#9DB160","#B26668","#4091BA","#8E658E","#3B8D8B","#ff0066","#eeaaee","#55BF3B","#DF5353","#7798BF","#aaeeee"]};return window.Fancy=Fancy,Fancy.apply=function(e,t){if(void 0!==t)for(var n in t)e[n]=t[n]},Fancy.applyIf=function(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n])},Fancy.namespace=function(){for(var e=0,t=arguments.length;e<t;e++){var n=arguments[e],i=n.split("."),a=1,r=i.length;Fancy.global[i[0]]=Fancy.global[i[0]]||{};for(var o=Fancy.global[i[0]];a<r;a++)o[i[a]]=o[i[a]]||{},o=o[i[a]]}},Fancy.ns=Fancy.namespace,Fancy.typeOf=function(e){if(null===e)return"null";var t=typeof e;if("undefined"===t||"string"===t||"number"===t||"boolean"===t)return t;var n=Object.prototype.toString,i=n.call(e);if(void 0!==e.length&&"function"!=typeof e)return"array";switch(i){case"[object Array]":return"array";case"[object Date]":return"date";case"[object Boolean]":return"boolean";case"[object Number]":return"number";case"[object RegExp]":return"regexp"}return"function"===t?"function":"object"===t?"object":void 0},Fancy.isArray="isArray"in Array?Array.isArray:function(e){var t=Object.prototype.toString;return"[object Array]"===t.call(e)},Fancy.isObject=function(e){var t=Object.prototype.toString;return"[object Object]"===t.call(e)},Fancy.isFunction=function(e){var t=Object.prototype.toString;return"[object Function]"===t.apply(e)},Fancy.isString=function(e){return"string"==typeof e},Fancy.isNumber=function(e){return"number"==typeof e&&isFinite(e)},Fancy.isDom=function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},Fancy.isBoolean=function(e){return"boolean"==typeof e},Fancy.isDate=function(e){return"date"===Fancy.typeOf(e)},Fancy.each=function(e,t){switch(Fancy.typeOf(e)){case"array":case"string":for(var n=0,i=e.length;n<i&&!0!==t(e[n],n,e);n++);break;case"object":for(var a in e)if(!0===t(e[a],a,e))break}},Fancy.mixin=function(e,t){var n,i=0,a=t.length;if("object"===Fancy.typeOf(t[0]))for(;i<a;i++){n=t[i];for(var r=n._class,o=n.methods,s=0,l=o.length;s<l;s++){var c=o[s];e[c]=r.prototype[c]}}else for(;i<a;i++)if(n=t[i],Fancy.isString(n)){var d=Fancy.ClassManager.getMixin(n);d?Fancy.apply(e,d.prototype):Fancy.ClassManager.waitMixin(n,e)}else Fancy.apply(e,n.prototype)},Fancy.Mixin=function(e,t){var n=e.split("."),i=1,a=n.length-1;Fancy.ns(e);for(var r=Fancy.global[n[0]];i<a;i++)r=r[n[i]];n.length>1?(r[n[n.length-1]]=function(){},r[n[n.length-1]].prototype=t):(Fancy.global[n[0]]=function(){},Fancy.global[n[0]].prototype=t);var o=Fancy.ClassManager.waitMixins[e];if(o)for(o=o.waiters,i=0,a=o.length;i<a;i++)Fancy.apply(o[i],t)},Fancy.applyConfig=function(e,t){var n;if(t=t||{},e.plugins&&t.plugins&&(e.plugins=e.plugins.concat(t.plugins),delete t.plugins),!0===e._isConfigApplied)return e;for(n in t)e[n]=t[n];return e._isConfigApplied=!0,e},Fancy.styleToString=function(e){var t="";for(var n in e=e||{},e)t+=n+": "+e[n]+";";return t},Fancy.apply(Fancy,{prefix:"fancy-gen-",idSeed:0,zIndex:1,id:function(e,t){return e?(e=e.dom||{},e.id||(e.id=(t||Fancy.prefix)+ ++Fancy.idSeed),e.id):(t||Fancy.prefix)+ ++Fancy.idSeed}}),Fancy.apply(Fancy,{cls:"fancy",TOUCH_CLS:"fancy-touch",HIDDEN_CLS:"fancy-display-none",CLEARFIX_CLS:"fancy-clearfix",MODAL_CLS:"fancy-modal",PANEL_CLS:"fancy-panel",PANEL_BODY_CLS:"fancy-panel-body",PANEL_BODY_INNER_CLS:"fancy-panel-body-inner",PANEL_GRID_INSIDE_CLS:"fancy-panel-grid-inside",PANEL_SHADOW_CLS:"fancy-panel-shadow",PANEL_SUB_HEADER_CLS:"fancy-panel-sub-header",PANEL_SUB_HEADER_TEXT_CLS:"fancy-panel-sub-header-text",PANEL_HEADER_CLS:"fancy-panel-header",PANEL_HEADER_IMG_CLS:"fancy-panel-header-img",PANEL_HEADER_TEXT_CLS:"fancy-panel-header-text",PANEL_HEADER_TOOLS_CLS:"fancy-panel-header-tools",PANEL_TBAR_CLS:"fancy-panel-tbar",PANEL_BBAR_CLS:"fancy-panel-bbar",PANEL_SUB_TBAR_CLS:"fancy-panel-sub-tbar",PANEL_BAR_PAGING_CLS:"fancy-panel-bar-paging",PANEL_BUTTONS_CLS:"fancy-panel-buttons",PANEL_NOFRAME_CLS:"fancy-panel-noframe",PANEL_FOOTER_CLS:"fancy-panel-footer",PANEL_TAB_CLS:"fancy-panel-tab",PANEL_DRAGGABLE_CLS:"fancy-panel-draggable",BAR_CLS:"fancy-bar",BAR_TEXT_CLS:"fancy-bar-text",BAR_CONTAINER_CLS:"fancy-bar-container",BAR_BUTTON_CLS:"fancy-bar-button",BAR_SEG_BUTTON_CLS:"fancy-bar-seg-button",BAR_LEFT_SCROLLER_CLS:"fancy-bar-left-scroller",BAR_RIGHT_SCROLLER_CLS:"fancy-bar-right-scroller",FORM_CLS:"fancy-form",FORM_BODY_CLS:"fancy-form-body",FORM_PANEL_CLS:"fancy-form-panel",FIELD_CLS:"fancy-field",FIELD_LABEL_CLS:"fancy-field-label",FIELD_EMPTY_CLS:"fancy-field-empty",FIELD_DISABLED_CLS:"fancy-field-disabled",FIELD_BLANK_ERR_CLS:"fancy-field-blank-err",FIELD_NOT_VALID_CLS:"fancy-field-not-valid",FIELD_TEXT_CLS:"fancy-field-text",FIELD_TEXT_INPUT_CLS:"fancy-field-text-input",FIELD_ERROR_CLS:"fancy-field-error",FIELD_SPIN_CLS:"fancy-field-spin",FIELD_SPIN_UP_CLS:"fancy-field-spin-up",FIELD_SPIN_DOWN_CLS:"fancy-field-spin-down",FIELD_CHECKBOX_CLS:"fancy-field-checkbox",FIELD_CHECKBOX_DISABLED_CLS:"fancy-field-checkbox-disabled",FIELD_CHECKBOX_INPUT_CLS:"fancy-field-checkbox-input",FIELD_CHECKBOX_ON_CLS:"fancy-checkbox-on",FIELD_CHECKBOX_MIDDLE_CLS:"fancy-checkbox-middle",FIELD_INPUT_LABEL_CLS:"fancy-field-input-label",FIELD_BUTTON_CLS:"fancy-field-button",FIELD_TAB_CLS:"fancy-field-tab",FIELD_COMBO_CLS:"fancy-combo",FIELD_COMBO_SELECTED_ITEM_CLS:"fancy-combo-item-selected",FIELD_COMBO_FOCUSED_ITEM_CLS:"fancy-combo-item-focused",FIELD_COMBO_DROPDOWN_BUTTON_CLS:"fancy-combo-dropdown-button",FIELD_COMBO_INPUT_CONTAINER_CLS:"fancy-combo-input-container",FIELD_COMBO_LIST_VALUE_CLS:"fancy-combo-list-value",FIELD_COMBO_LEFT_EL_CLS:"fancy-combo-left-el",FIELD_COMBO_RESULT_LIST_CLS:"fancy-combo-result-list",FIELD_SEARCH_CLS:"fancy-field-search",FIELD_SEARCH_LIST_CLS:"fancy-field-search-list",FIELD_SEARCH_PARAMS_LINK_CLS:"fancy-field-search-params-link",FIELD_SEARCH_PARAMED_CLS:"fancy-field-search-paramed",FIELD_SEARCH_PARAMED_EMPTY_CLS:"fancy-field-search-paramed-empty",FIELD_PICKER_BUTTON_CLS:"fancy-field-picker-button",FIELD_LABEL_ALIGN_TOP_CLS:"fancy-field-label-align-top",FIELD_LABEL_ALIGN_RIGHT_CLS:"fancy-field-label-align-right",FIELD_TEXTAREA_CLS:"fancy-textarea",FIELD_TEXTAREA_TEXT_CLS:"fancy-textarea-text",FIELD_TEXTAREA_TEXT_INPUT_CLS:"fancy-textarea-text-input",FIELD_RADIO_CLS:"fancy-field-radio",FIELD_RADIO_COLUMN_CLS:"fancy-field-radio-column",FIELD_RADIO_ON_CLS:"fancy-field-radio-on",FIELD_RADIO_INPUT_CLS:"fancy-field-radio-input",FIELD_TAB_ACTIVE_CLS:"fancy-field-tab-active",GRID_CLS:"fancy-grid",GRID_ANIMATION_CLS:"fancy-grid-animation",GRID_UNSELECTABLE_CLS:"fancy-grid-unselectable",GRID_EMPTY_CLS:"fancy-grid-empty-text",GRID_LEFT_EMPTY_CLS:"fancy-grid-left-empty",GRID_RIGHT_EMPTY_CLS:"fancy-grid-right-empty",GRID_CENTER_CLS:"fancy-grid-center",GRID_LEFT_CLS:"fancy-grid-left",GRID_RIGHT_CLS:"fancy-grid-right",GRID_RESIZER_LEFT_CLS:"fancy-grid-resizer-left",GRID_RESIZER_RIGHT_CLS:"fancy-grid-resizer-right",GRID_STATE_DRAG_COLUMN_CLS:"fancy-grid-state-drag-column",GRID_STATE_RESIZE_COLUMN_CLS:"fancy-grid-state-resize-column",GRID_STATE_SORTED_CLS:"fancy-grid-state-sorted",GRID_STATE_FILTERED_CLS:"fancy-grid-state-filtered",GRID_COPY_TEXTAREA:"fancy-grid-copy-textarea",GRID_HEADER_CLS:"fancy-grid-header",GRID_HEADER_CELL_CLS:"fancy-grid-header-cell",GRID_HEADER_CELL_CONTAINER_CLS:"fancy-grid-header-cell-container",GRID_HEADER_CELL_TEXT_CLS:"fancy-grid-header-cell-text",GRID_HEADER_CELL_LEFT_IMAGE_CLS:"fancy-grid-header-cell-left-image",GRID_HEADER_CELL_CONTAINS_LI:"fancy-grid-header-cell-contains-left-image",GRID_HEADER_CELL_DOUBLE_CLS:"fancy-grid-header-cell-double",GRID_HEADER_CELL_TRIPLE_CLS:"fancy-grid-header-cell-triple",GRID_HEADER_CELL_TRIGGER_CLS:"fancy-grid-header-cell-trigger",GRID_HEADER_CELL_TRIGGER_IMAGE_CLS:"fancy-grid-header-cell-trigger-image",GRID_HEADER_CELL_TRIGGER_DISABLED_CLS:"fancy-grid-header-cell-trigger-disabled",GRID_HEADER_CELL_GROUP_LEVEL_1_CLS:"fancy-grid-header-cell-group-level-1",GRID_HEADER_CELL_GROUP_LEVEL_2_CLS:"fancy-grid-header-cell-group-level-2",GRID_HEADER_CELL_SELECT_CLS:"fancy-grid-header-cell-select",GRID_HEADER_CELL_TRIGGER_UP_CLS:"fancy-grid-header-cell-trigger-up",GRID_HEADER_CELL_TRIGGER_DOWN_CLS:"fancy-grid-header-cell-trigger-down",GRID_HEADER_COLUMN_TRIGGERED_CLS:"fancy-grid-header-column-triggered",GRID_HEADER_CELL_FILTER_CLS:"fancy-grid-header-filter-cell",GRID_HEADER_CELL_FILTER_FULL_CLS:"fancy-grid-header-filter-cell-full",GRID_HEADER_CELL_FILTER_SMALL_CLS:"fancy-grid-header-filter-cell-small",GRID_HEADER_CELL_CHECKBOX_CLS:"fancy-grid-header-cell-checkbox",GRID_HEADER_CELL_SORTABLE_CLS:"fancy-grid-header-cell-sortable",GRID_HEADER_CELL_NOT_SORTABLE_CLS:"fancy-grid-header-cell-not-sortable",GRID_HEADER_CELL_FILTERED_CLS:"fancy-grid-header-cell-filtered",GRID_SUB_HEADER_FILTER_CLS:"fancy-grid-sub-header-filter",GRID_SUB_HEADER_FILTER_CONTAINER_CLS:"fancy-grid-sub-header-filter-container",GRID_CELL_CLS:"fancy-grid-cell",GRID_CELL_INNER_CLS:"fancy-grid-cell-inner",GRID_CELL_OVER_CLS:"fancy-grid-cell-over",GRID_CELL_SELECTED_CLS:"fancy-grid-cell-selected",GRID_CELL_ACTIVE_CLS:"fancy-grid-cell-active",GRID_CELL_EVEN_CLS:"fancy-grid-cell-even",GRID_CELL_WRAPPER_CLS:"fancy-grid-cell-wrapper",GRID_CELL_DIRTY_CLS:"fancy-grid-cell-dirty",GRID_CELL_DIRTY_EL_CLS:"fancy-grid-cell-dirty-el",GRID_PSEUDO_CELL_CLS:"fancy-grid-pseudo-cell",GRID_COLUMN_CLS:"fancy-grid-column",GRID_COLUMN_OVER_CLS:"fancy-grid-column-over",GRID_COLUMN_SELECT_CLS:"fancy-grid-column-select",GRID_COLUMN_SELECTED_CLS:"fancy-grid-column-selected",GRID_COLUMN_ELLIPSIS_CLS:"fancy-grid-column-ellipsis",GRID_COLUMN_ORDER_CLS:"fancy-grid-column-order",GRID_COLUMN_TEXT_CLS:"fancy-grid-column-text",GRID_COLUMN_SORT_ASC:"fancy-grid-column-sort-ASC",GRID_COLUMN_SORT_DESC:"fancy-grid-column-sort-DESC",GRID_COLUMN_COLOR_CLS:"fancy-grid-column-color",GRID_COLUMN_RESIZER_CLS:"fancy-grid-column-resizer",GRID_COLUMN_ROW_DRAG_CLS:"fancy-grid-column-row-drag",GRID_ROW_DRAG_EL_CLS:"fancy-grid-row-drag-el",GRID_COLUMN_TREE_CLS:"fancy-grid-column-tree",GRID_COLUMN_TREE_EXPANDER_CLS:"fancy-grid-tree-expander",GRID_COLUMN_SPARKLINE_CLS:"fancy-grid-column-sparkline",GRID_COLUMN_SPARKLINE_BULLET_CLS:"fancy-grid-column-sparkline-bullet",GRID_COLUMN_SPARK_PROGRESS_DONUT_CLS:"fancy-grid-column-spark-progress-donut",GRID_COLUMN_CHART_CIRCLE_CLS:"fancy-grid-column-chart-circle",GRID_COLUMN_GROSSLOSS_CLS:"fancy-grid-column-grossloss",GRID_COLUMN_PROGRESS_CLS:"fancy-grid-column-progress",GRID_COLUMN_PROGRESS_BAR_CLS:"fancy-grid-column-progress-bar",GRID_COLUMN_H_BAR_CLS:"fancy-grid-column-h-bar",GRID_COLUMN_ACTION_ITEM_CLS:"fancy-grid-column-action-item",GRID_ROW_OVER_CLS:"fancy-grid-cell-over",GRID_ROW_EDIT_CLS:"fancy-grid-row-edit",GRID_ROW_EDIT_BUTTONS_CLS:"fancy-grid-row-edit-buttons",GRID_ROW_EDIT_BUTTON_UPDATE_CLS:"fancy-edit-row-button-update",GRID_ROW_EDIT_BUTTON_CANCEL_CLS:"fancy-edit-row-button-cancel",GRID_ROW_GROUP_CLS:"fancy-grid-group-row",GRID_ROW_GROUP_INNER_CLS:"fancy-grid-group-row-inner",GRID_ROW_GROUP_COLLAPSED_CLS:"fancy-grid-group-row-collapsed",GRID_ROW_SUMMARY_CLS:"fancy-grid-summary-row",GRID_ROW_SUMMARY_CONTAINER_CLS:"fancy-grid-summary-container",GRID_ROW_SUMMARY_BOTTOM_CLS:"fancy-grid-summary-row-bottom",GRID_ROW_EXPAND_CLS:"fancy-grid-expand-row",GRID_ROW_EXPAND_OVER_CLS:"fancy-grid-expand-row-over",GRID_ROW_EXPAND_SELECTED_CLS:"fancy-grid-expand-row-selected",GRID_BODY_CLS:"fancy-grid-body",GRID_ACTIVE_CELL_ENABLED:"fancy-grid-active-cell-enabled",MENU_CLS:"fancy-menu",MENU_ITEM_CLS:"fancy-menu-item",MENU_ITEM_IMAGE_CLS:"fancy-menu-item-image",MENU_ITEM_TEXT_CLS:"fancy-menu-item-text",MENU_ITEM_SIDE_TEXT_CLS:"fancy-menu-item-side-text",MENU_ITEM_ACTIVE_CLS:"fancy-menu-item-active",MENU_ITEM_RIGHT_IMAGE_CLS:"fancy-menu-item-right-image",MENU_ITEM_EXPAND_CLS:"fancy-menu-item-expand",MENU_ITEM_DISABLED_CLS:"fancy-menu-item-disabled",MENU_ITEM_SEP_CLS:"fancy-menu-item-sep",MENU_ITEM_NO_IMAGE_CLS:"fancy-menu-item-no-image",MENU_ITEM_IMG_COPY_CLS:"fancy-menu-item-img-copy",MENU_ITEM_IMG_DELETE_CLS:"fancy-menu-item-img-delete",MENU_ITEM_IMG_DUPLICATE_CLS:"fancy-menu-item-img-duplicate",MENU_ITEM_IMG_EDIT_CLS:"fancy-menu-item-img-edit",TAB_WRAPPER_CLS:"fancy-tab-wrapper",TAB_ACTIVE_WRAPPER_CLS:"fancy-active-tab-wrapper",TAB_TBAR_CLS:"fancy-toolbar-tab",TAB_TBAR_ACTIVE_CLS:"fancy-toolbar-tab-active",BUTTON_CLS:"fancy-button",BUTTON_DISABLED_CLS:"fancy-button-disabled",BUTTON_PRESSED_CLS:"fancy-button-pressed",BUTTON_IMAGE_CLS:"fancy-button-image",BUTTON_IMAGE_COLOR_CLS:"fancy-button-image-color",BUTTON_TEXT_CLS:"fancy-button-text",BUTTON_DROP_CLS:"fancy-button-drop",BUTTON_MENU_CLS:"fancy-button-menu",SEG_BUTTON_CLS:"fancy-seg-button",TOOLTIP_CLS:"fancy-tooltip",TOOLTIP_INNER_CLS:"fancy-tooltip-inner",SEPARATOR_CLS:"fancy-separator",FOOTER_STATUS_CLS:"fancy-footer-status",STATUS_SOURCE_TEXT_CLS:"fancy-status-source-text",STATUS_SOURCE_LINK_CLS:"fancy-status-source-link",FOOTER_SOURCE_CLS:"fancy-footer-source",PICKER_MONTH_CELL_ACTIVE_CLS:"fancy-month-picker-cell-active",PICKER_MONTH_CLS:"fancy-month-picker",PICKER_BUTTON_BACK_CLS:"fancy-picker-button-back",PICKER_BUTTON_NEXT_CLS:"fancy-picker-button-next",PICKER_MONTH_ACTION_BUTTONS_CLS:"fancy-month-picker-action-buttons",PICKER_DATE_CLS:"fancy-date-picker",PICKER_DATE_CELL_TODAY_CLS:"fancy-date-picker-cell-today",PICKER_DATE_CELL_ACTIVE_CLS:"fancy-date-picker-cell-active",PICKER_DATE_CELL_OUT_RANGE_CLS:"fancy-date-picker-cell-out-range",PICKER_BUTTON_DATE_CLS:"fancy-picker-button-date",PICKER_BUTTON_DATE_WRAPPER_CLS:"fancy-picker-button-date-wrapper",PICKER_BUTTON_TODAY_CLS:"fancy-picker-button-today",PICKER_BUTTON_TODAY_WRAPPER_CLS:"fancy-picker-button-today-wrapper"}),Fancy.ANIMATE_DURATION=400,function(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)},n=t(/opera/),i=!n&&t(/msie/),a=window.chrome,r=window.navigator,o=r.vendor,s=r.userAgent.indexOf("Edge")>-1,l=r.userAgent.match("CriOS"),c=function(){var e=r.userAgent.indexOf("OPR")>-1;return!!l||null!==a&&void 0!==a&&"Google Inc."===o&&!1===e&&!1===s}();11===function(){var e,t,n=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=t.exec(e)&&(n=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,t=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=t.exec(e)&&(n=parseFloat(RegExp.$1))),n}()&&(i=!0),!1===i&&s&&(i=!0),Fancy.apply(Fancy,{isOpera:n,isIE:i,isChrome:c}),Fancy.getViewSize=function(){var e=[];return Fancy.isIE?(e[0]=document.documentElement.clientHeight,e[1]=document.documentElement.clientWidth):(e[0]=window.innerHeight,e[1]=window.innerWidth),e},Fancy.getScroll=function(){var e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]},Fancy.getMouseWheelEventName=function(){return"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll"},Fancy.getWheelDelta=function(e){var t=0;return e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t},Fancy.isTouch=void 0!==document.ontouchstart,Fancy.i18n={},Fancy.currency={EUR:"€",USD:"$",GBP:"£",RUB:"₽",CZK:"Kč",AUD:"$",JPY:"¥",PLN:"zł",TRY:"₺",DKK:"kr",KRW:"₩",BRL:"R$",CNY:"¥",SEK:"kr",CAD:"$",NOK:"kr",IDR:"Rp"}}(),Fancy.modules={},Fancy.getModulesList=function(){var e=[];return Fancy.each(Fancy.modules,(function(t,n){e.push(n)})),e},function(){var e={};Fancy.loadModule=function(t,n){var i=document.getElementsByTagName("body")[0],a=document.createElement("script"),r=t,o=Fancy.DEBUG?".js":".min.js",s=Fancy.version.replace(/\./g,""),l=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://foresee-technologies.com/api/libraries/FancyGridModules/";n=n||function(){},!1!==Fancy.MODULELOAD&&!1!==Fancy.MODULESLOAD&&(t=t.replace(/ /g,"-"),Fancy.DEBUG?o+="?_dc="+ +new Date:o+="?_v="+s,Fancy.Modules.on("loaded",(function(e,i){i===t&&(Fancy.modules[r]=!0,n(t))})),e[t]||(e[t]=!0,a.src=l+t+o,a.charset="utf-8",a.onload=function(){Fancy.Modules.fire("loaded",t)},a.onerror=function(){throw new Error("[FancyGrid Error] - module "+t+" was not loaded")},i.appendChild(a)))},Fancy.loadLang=function(e,t){if(void 0!==Fancy.i18n[e])return!0;var n=document.getElementsByTagName("body")[0],i=document.createElement("script"),a=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://foresee-technologies.com/api/libraries/FancyGridModules/";i.src=a+"i18n/"+e+".js",i.charset="utf-8",i.async="true",i.onload=function(){t({lang:Fancy.i18n[e]})},n.appendChild(i)},Fancy.loadStyle=function(){var e=document.querySelectorAll("link");if(!Fancy.stylesLoaded&&(Fancy.each(e,(function(e){/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)})),e=document.querySelectorAll("link"),!Fancy.stylesLoaded&&(Fancy.each(e,(function(e){/fancy\./.test(e.href)&&(Fancy.stylesLoaded=!0)})),!Fancy.stylesLoaded))){var t=document.getElementsByTagName("head")[0],n=document.createElement("link"),i=Fancy.DEBUG?".css":".min.css",a=Fancy.version.replace(/\./g,""),r=Fancy.MODULESDIR||FancyGrid.MODULESDIR||"https://foresee-technologies.com/api/libraries/FancyGridModules/";r=r.replace("modules/",""),r=r.replace("modules",""),Fancy.DEBUG?i+="?_dc="+ +new Date:i+="?_v="+a,n.href=r+"fancy"+i,n.rel="stylesheet",Fancy.loadingStyle=!0,n.onload=function(){setTimeout((function(){Fancy.loadingStyle=!1,Fancy.stylesLoaded=!0}),100)},t.appendChild(n)}},Fancy.error=function(e,t){var n="";throw t&&(n=" "+t),new Error("[FancyGrid Error"+n+"]: "+e)}}(),Fancy.themes={},Fancy.defineTheme=function(e,t){var n={};t.extend?(Fancy.apply(n,Fancy.getTheme(t.extend).config),n.extendedThemes=n.extendedThemes||[],n.extendedThemes.push(t.extend)):"default"!==e&&Fancy.apply(n,Fancy.getTheme("default").config),Fancy.apply(n,t.config),t.config=n,Fancy.themes[e]=t},Fancy.getThemeCSSCls=function(e){var t="fancy-theme-"+e,n=Fancy.getTheme(e);return n&&n.config.extendedThemes&&Fancy.each(n.config.extendedThemes,(function(e){t+=" fancy-theme-"+e})),t},Fancy.getTheme=function(e){var t={config:{}};return Fancy.isObject(e)?(Fancy.applyIf(t,Fancy.themes[e.name||"default"]),Fancy.apply(t.config,Fancy.themes[e.name||"default"].config),Fancy.apply(t.config,e.config),t):Fancy.themes[e]},Fancy.defineTheme("default",{config:{cellHeaderHeight:30,cellWidth:70,minCellWidth:40,cellHeight:32,titleHeight:42,subTitleHeight:42,barHeight:38,bottomScrollHeight:12,minCenterWidth:100,panelBorderWidth:2,groupRowHeight:31,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,2,2,2],knobOffSet:2,fieldHeight:37,charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("blue",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("gray",{config:{panelBorderWidth:0,gridBorders:[0,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("extra-gray",{config:{panelBorderWidth:0,gridBorders:[0,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:27,titleHeight:32,subTitleHeight:32,cellHeight:28,cellHeaderHeight:28,barHeight:32,datePickerHeight:287}}),Fancy.defineTheme("extra-dark",{extend:"extra-gray",config:{}}),Fancy.defineTheme("dark",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("sand",{config:{panelBorderWidth:1,gridBorders:[0,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("bootstrap",{config:{panelBorderWidth:1,gridBorders:[1,1,1,1],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:30}}),Fancy.defineTheme("bootstrap-no-borders",{config:{panelBorderWidth:0,gridBorders:[0,0,0,0],gridWithoutPanelBorders:[0,0,0,0],panelBodyBorders:[0,0,0,0],columnLines:!1,charWidth:8,menuItemHeight:30}}),Fancy.defineTheme("material",{config:{columnLines:!1,cellHeaderHeight:40,panelBorderWidth:0,cellHeight:40,titleHeight:48,barHeight:48,subTitleHeight:48,groupRowHeight:40,gridBorders:[1,0,1,0],gridWithoutPanelBorders:[1,1,1,1],panelBodyBorders:[0,0,0,0],charWidth:7,menuItemHeight:35}}),Fancy.String={format:function(e){var t,n,i;if("array"===Fancy.typeOf(arguments[1]))t=arguments[1];else for(i=arguments.length,t=[],n=1;n<i;n++)t[n-1]=arguments[n];return e.replace(/\[(\d+)]/g,(function(e,n){return t[n]}))},upFirstChar:function(e){return e[0].toLocaleUpperCase()+e.substr(1,e.length)},trim:function(e){return e.replace(/\s/g,"")}},Fancy.Array={copy:function(e,t){if(!t)return e.slice();for(var n=[],i=0,a=e.length;i<a;i++)switch(Fancy.typeOf(e[i])){case"object":n[i]=Fancy.Object.copy(e[i]);break;case"array":n[i]=Fancy.Array.copy(e[i]);break;default:n=e[i]}return n},each:function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n)},count:function(e){return e.length},sum:function(e){var t=0,n=e.length,i=0;if(Fancy.isArray(e[0]))for(i=[];t<n;t++)for(var a=0,r=e[t].length;a<r;a++)void 0===i[a]&&(i[a]=0),i[a]+=e[t][a];else for(;t<n;t++)!1!==Fancy.isNumber(e[t])&&(i+=e[t]);return i},min:function(e){return Math.min.apply(this,e)},max:function(e){return Math.max.apply(this,e)},average:function(e){for(var t=0,n=0,i=e.length;n<i;n++)!1!==Fancy.isNumber(e[n])&&(t+=e[n]);return Math.round(t/e.length)},insert:function(e,t,n){var i=e.splice(t,e.length-t);return e.concat(n).concat(i)},none:function(){return""}},Fancy.Object={copy:function(e){var t={};for(var n in e)t[n]=e[n];return t},isEmpty:function(e){for(var t in e)return!1;return!0},keys:function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t}},Fancy.Number={isFloat:function(e){return Number(e)===e&&e%1!=0},getPrecision:function(e){return(e+"").split(".")[1].length+1},correctFloat:function(e){return parseFloat(e.toPrecision(14))},format:function(e,t,n){var i,a;void 0===t&&(t=","),Fancy.isNumber(t)&&(n=t,t=","),i=""===t||","===t?".":",";var r=e.toString().split(".");if(r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),void 0===r[1]&&(r[1]=""),void 0!==n)if(0===n)a=r[0];else{var o=n-r[1].length;if(o>0)for(var s=0;s<o;s++)r[1]+="0";else o<0&&(r[1]=r[1].substring(0,n));a=r[0]+i+r[1]}else a=r[0],r[1].length&&(a+=i+r[1]);return a},currencyFormat:function(e,t,n,i){var a=e.toString().split(t);if(i=i||0,a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,n),a[1]){if(i>0){if(a[1].length<i){for(var r="",o=a[1].length;o<i;o++)r+="0";return a[0]+t+a[1]+r}a[1]=String(a[1]).substring(0,i)}return a[0]+t+a[1]}if(i>0&&""!==a[0]){for(r="",o=0;o<i;o++)r+="0";return a[0]+t+r}return a[0]}},Fancy.Collection=function(e){var t=this;if(t.items=[],t.keys=[],t.map={},t.indexMap={},t.length=0,e)if(e.length>0)for(var n=0,i=e.length;n<i;n++)t.add(n,e[n]);else for(var a in e)t.add(a,e[a])},Fancy.Collection.prototype={add:function(e,t){var n=this;n.items.push(t),n.keys.push(e),n.map[e]=t,n.indexMap[e]=n.length,n.length++},remove:function(e){var t=this,n=t.indexMap[e];t.items.splice(n,1),t.keys.splice(n,1),delete t.indexMap[n],delete t.map[e],t.length--,t.updateIndexMap()},updateIndexMap:function(){var e=this,t=0,n=e.keys.length;for(e.indexMap={};t<n;t++)e.indexMap[e.keys[t]]=t},removeAll:function(){var e=this;e.items=[],e.keys=[],e.indexMap={},e.map={},e.length=0},get:function(e){return this.map[e]},each:function(e){for(var t=this,n=0,i=t.length;n<i;n++)e(t.keys[n],t.items[n],n,t.length)}},Fancy.Template=function(e){var t=this;Fancy.isArray(e)?t.tpl=e.join(""):t.tpl=e,t.compile()},Fancy.Template.prototype={re:/\{([\w\-]+)\}/g,getHTML:function(e){return this.compiled(e||{})},compile:function(){function fn(e,t){return"'+("+(t="values['"+t+"']")+" === undefined ? '' : "+t+")+'"}var me=this;return eval("me.compiled = function(values){ return '"+me.tpl.replace(me.re,fn)+"';};"),me}},Fancy.key={BACKSPACE:8,TAB:9,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_DOT:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_SCALE:120,DOT:190},Fancy.Key={isNum:function(e){var t=Fancy.key;switch(e){case t.ZERO:case t.ONE:case t.TWO:case t.THREE:case t.FOUR:case t.FIVE:case t.SIX:case t.SEVEN:case t.EIGHT:case t.NINE:case t.NUM_ZERO:case t.NUM_ONE:case t.NUM_TWO:case t.NUM_THREE:case t.NUM_FOUR:case t.NUM_FIVE:case t.NUM_SIX:case t.NUM_SEVEN:case t.NUM_EIGHT:case t.NUM_NINE:return!0;default:return!1}},isNumControl:function(e,t){var n=Fancy.key;if(Fancy.Key.isNum(e))return!0;if(t.shiftKey&&187===e)return!0;switch(e){case n.NUM_PLUS:case 189:case n.NUM_MINUS:case n.NUM_DOT:case n.BACKSPACE:case n.DELETE:case n.TAB:case n.ENTER:case n.RETURN:case n.SHIFT:case n.CTRL:case n.ALT:case n.ESC:case n.END:case n.HOME:case n.LEFT:case n.UP:case n.RIGHT:case n.DOWN:case n.INSERT:case n.DOT:return!0;default:return!1}}},function(){var e={},t={},n=function(e,t){for(var n in t.prototype)void 0===e.prototype[n]&&(e.prototype[n]=t.prototype[n])},i=function(){this.waitMixins={}};i.prototype={items:new Fancy.Collection,add:function(e,t){var n=e.split("."),i=1,a=n.length-1;Fancy.ns(e);for(var r=Fancy.global[n[0]];i<a;i++)r=r[n[i]];n.length>1?r[n[n.length-1]]=t:Fancy.global[n[0]]=t,this.items.add(e,t)},get:function(e){return this.items.get(e)},waitMixin:function(e,t){var n=this;n.waitMixins[e]=n.waitMixins[e]||{waiters:[]},n.waitMixins[e].waiters.push(t)},getMixin:function(e){var t=e.split("."),n=1,i=t.length,a=Fancy.global[t[0]];if(void 0===a)return!1;for(;n<i;n++)if(void 0===(a=a[t[n]]))return!1;return a},has:function(t){if(Fancy.isString(t))return!!e[t];if(Fancy.isArray(t)){var n=!1;return Fancy.each(t,(function(e){Fancy.ClassManager.get(e)&&(n=!0)})),n}}},Fancy.ClassManager=new i,Fancy.define=function(i,a){a=a||{};var r=[];if(Fancy.ClassManager.has(i)&&Fancy.error("Overwritting class name "+i),Fancy.isArray(i)&&(r=i,i=r[0]),a.constructor===Object&&(void 0===a.extend?a.constructor=function(){}:a.constructor=function(){this.Super("constructor",arguments)}),void 0===a.extend)e[i]=a.constructor;else{var o;switch(e[i]=a.constructor,typeof a.extend){case"string":o=Fancy.ClassManager.get(a.extend),e[i].prototype.$Super=Fancy.ClassManager.get(a.extend);break;case"function":o=a.extend,e[i].prototype.$Super=a.extend}delete a.extend,e[i].prototype.Super=function(e,t){var n=this;switch(n.$Iam?n.$Iam=Fancy.ClassManager.get(n.$Iam.prototype.$Super.prototype.$name):n.$Iam=Fancy.ClassManager.get(n.$Super.prototype.$name),e){case"const":case"constructor":n.$Iam.apply(n,t);break;default:n.$Iam.prototype[e].apply(n,t)}delete n.$Iam},n(e[i],o)}for(var s in e[i].prototype.$name=i,a.mixins&&(Fancy.mixin(e[i].prototype,a.mixins),delete e[i].prototype.mixins),void 0!==a.plugins&&(void 0===e[i].prototype.$plugins&&(e[i].prototype.$plugins=[]),e[i].prototype.$plugins=e[i].prototype.$plugins.concat(a.plugins),delete e[i].prototype.plugins),a)e[i].prototype[s]=a[s];var l=e[i];!0===a.singleton&&(delete e[i],l=new l(a),e[i]=l),r.length>1?Fancy.each(r,(function(e){Fancy.ClassManager.add(e,l)})):Fancy.ClassManager.add(i,l),a.type?(t[a.type]=l,Fancy.addWidgetType(a.type,l)):a.ptype&&(t[a.type]=l,Fancy.addPluginByType(a.ptype,l))},Fancy.getClassByType=function(e){return t[e]}}(),Fancy.MixinClass=function(){},Fancy.MixinClass.prototype={initId:function(){var e=this,t=e.prefix||Fancy.prefix;e.id=e.id||Fancy.id(null,t),Fancy.addWidget(e.id,e)},initPlugins:function(){var e,t,n,i=this,a=i;if(i.plugins=i.plugins||[],i._plugins&&(i.plugins=i.plugins.concat(i._plugins)),void 0!==i.plugins&&(i.$plugins=i.plugins,delete i.plugins),void 0!==i.$plugins)for(var r,o=0,s=i.$plugins,l=s.length,c={};o<l;o++){n=s[o],n.widget=a;var d=n.type||n.ptype;if(!0!==c[d]){if(c[d]=!0,void 0===(e=Fancy.getPluginByType(d)))throw new Error("[FancyGrid Error] - some of module was not loaded. Grid plugin does not exist - "+d);t=new e(n),r=n.inWidgetName||t.inWidgetName,void 0!==r&&(a[r]=t)}}}},Fancy.define("Fancy.Data",{constructor:function(e){var t=this;if(t.map={},e)for(var n=0,i=e.length,a=t.map;n<i;n++)a[n]=e[n];t.length=0},add:function(e,t){this.map[e]=t,this.length++},get:function(e){return this.map[e]}}),Fancy.define("Fancy.Model",{constructor:function(e){var t=this,n={},i=t.fields||[],a=0,r=i.length;if(Fancy.isArray(e)){for(;a<r;a++){var o=i[a];n[o]=e[a]}void 0===n.id&&(Fancy.idSeed++,n.id=Fancy.idSeed+1e3),t.data=n,t.id=t.data.id}else{if(e.id?t.id=e.id:(Fancy.idSeed++,t.id=Fancy.idSeed+1e3,e.id=t.id),void 0===t.fields){for(var o in i=[],e)i.push(o);t.fields=i}for(r=i.length;a<r;a++){o=i[a];void 0===e[o]?n[o]="":n[o]=e[o]}n.id||(t.fields.push("id"),e.id||(e.id=t.id),n.id=e.id),t.data=n}},get:function(e){var t=this;return void 0===e?t.data:t.data[e]},set:function(e,t){var n=this;if(void 0===t&&Fancy.isObject(e))for(var i in e)n.set(i,e[i]);else n.data[e]=t}}),Fancy.define("Fancy.PluginManager",{singleton:!0,constructor:function(){this.ptypes=new Fancy.Data},addPlugin:function(e,t){this.ptypes.add(e,t)},getPlugin:function(e){return this.ptypes.get(e)}}),Fancy.addPluginByType=function(e,t){Fancy.PluginManager.addPlugin(e,t)},Fancy.getPluginByType=function(e){return Fancy.PluginManager.getPlugin(e)},function(){var e=Fancy;e.define("Fancy.WidgetManager",{singleton:!0,constructor:function(){this.wtypes=new e.Data,this.widgets=new e.Data},addWidgetType:function(e,t){t.prototype.wtype=e,this.wtypes.add(e,t)},getWidgetClassByType:function(e){return this.wtypes.get(e)},addWidget:function(e,t){this.widgets.add(e,t)},getWidget:function(e){return this.widgets.get(e)}});var t=e.WidgetManager;e.addWidgetType=function(e,n){t.addWidgetType(e,n)},e.getWidgetClassByType=function(e){return t.getWidgetClassByType(e)},e.addWidget=function(e,n){t.addWidget(e,n)},e.getWidget=function(e){return t.getWidget(e)},e.getGrid=function(e){return t.getWidget(e)},e.getForm=function(e){return t.getWidget(e)}}(),function(){var e=0,t={};Fancy.define(["Fancy.Event","Fancy.Observable"],{mixins:[Fancy.MixinClass],constructor:function(e){var t=this;if(Fancy.applyConfig(t,e||{}),t.$events={},t.listeners||t.events)for(var n=t.listeners||t.events,i=0,a=n.length;i<a;i++){var r=n[i],o=null,s=null,l=null,c=0,d=[];for(var u in r)switch(u){case"scope":l=r[u];break;case"params":d=r[u];break;case"delay":c=r[u];break;default:o=u,s=r[u]}if(null===o)throw new Error("[FancyGrid Error] - Event was not set");switch(Fancy.typeOf(s)){case"string":s=t[s],r.handler=s,void 0===r.scope&&(l=t),r.scope=l;break;case"function":break;default:throw new Error("[FancyGrid Error] - Handler has wrong type or not defined")}if(!1===Fancy.isArray(d))throw new Error("[FancyGrid Error] - params must be array");t.addEvent(o),t.on(o,s,l,d,c)}},on:function(n,i,a,r,o){if(void 0===this.$events[n])throw new Error("[FancyGrid Error] - Event name is not set: "+n);if(void 0===i)throw new Error("[FancyGrid Error] - Handler is undefined. Name of event is "+n+".");i.$fancyFnSeed=e,t[e]=i,e++,this.$events[n].push({fn:i,scope:a,params:r||[],delay:o})},un:function(e,t){var n=this,i=n.$events[e];if(!i)return!1;for(var a=0,r=i.length;a<r;a++){var o=i[a];if(o.fn.$fancyFnSeed===t.$fancyFnSeed)return o.toRemove=!0,!0}return!1},once:function(e,t,n){var i=this,a=function(){t.apply(this,arguments),i.un(e,a)};i.on(e,a,n)},unAll:function(){this.$events={}},unAllByType:function(e){this.$events[e]=[]},fire:function(e){var t=this,n=t.$events[e];if(!n)return!1;for(var i=1,a=arguments.length,r=[t];i<a;i++)r.push(arguments[i]);for(i=0,a=n.length;i<a;i++){var o=n[i],s=[];!0!==o.toRemove?(s=s.concat(r),o.params&&(s=s.concat(o.params)),o.delay?setTimeout(function(e){return function(){e.fn.apply(e.scope||t,s)}}(o),o.delay):o.fn.apply(o.scope||t,s)):(n.splice(i,1),i--,a=n.length)}},addEvent:function(e){return this.addEvents(e)},addEvents:function(e){var t=this;if(arguments.length>1){for(var n=[],i=0,a=arguments.length;i<a;i++)n[i]=arguments[i];e=n}if("string"===Fancy.typeOf(e))t.$events[e]=t.$events[e]||[];else if("array"===Fancy.typeOf(e))for(i=0,a=e.length;i<a;i++)t.$events[e[i]]=t.$events[e[i]]||[]},has:function(e){var t=this.$events[e];return!!t&&0!==t.length}}),Fancy.define("Fancy.Modules",{extend:Fancy.Event,singleton:!0,constructor:function(){this.Super("const",arguments),this.init()},init:function(){this.addEvents("loaded")}})}(),Fancy.Mixin("Fancy.store.mixin.Edit",{remove:function(e,t){var n,i,a,r=this,o=r.widget,s=e.id;switch(Fancy.typeOf(e)){case"string":case"number":s=e;break;default:s=e.id||e.data.id}if(r.isTree&&!0!==r.treeCollapsing){var l=r.getById(s),c=r.getById(l.get("parentId"));if(!1===l.get("leaf")&&l.get("expanded")){var d=l.data.child.length-1;Fancy.each(l.data.child,(function(e,t,n){r.remove(n[d]),d--}))}c&&Fancy.each(c.data.child,(function(e,t){if(e.id===s)return c.data.child.splice(t,1),!0}))}if("server"===r.proxyType&&r.autoSave&&r.proxy.api.destroy)!1!==t&&(!1!==o.loadMask&&o.showLoadMask(),r.proxyCRUD("DESTROY",s));else{if(e.rowIndex)n=r.dataViewIndexes[e.rowIndex],i=e.rowIndex;else if(n=r.getDataIndex(s),i=r.getRow(s),void 0===n&&void 0===i)return;var u;if(r.isTree&&r.treeCollapsing&&r.filteredData)Fancy.each(r.data,(function(e,t){if(e.data.id===s)return u=t,!0})),a=r.data.splice(u,1)[0];else a=r.data.splice(n,1)[0];r.paging&&(i+=r.showPage*r.pageSize),r.order&&r.order.splice(i,1),r.changeOrderIndexes&&r.changeOrderIndexes(n),r.paging&&(0!==r.showPage&&r.showPage*r.pageSize===r.getTotal()&&r.showPage--,r.calcPages()),delete r.map[s],r.treeCollapsing||!1===t||r.fire("remove",s,a,n),!1!==t&&r.changeDataView()}},removeAt:function(e){var t=this;t.remove({rowIndex:e,id:t.getId(e)})},removeAll:function(){var e=this;e.data=[],e.dataView=[],delete e.order,e.paging&&(e.showPage=0,e.calcPages()),e.filters&&(delete e.filters,delete e.filteredData,delete e.filterOrder)},add:function(e){var t=this;return t.insert(t.getTotal(),e)},insert:function(e,t,n){var i=this;if(Fancy.each(i.fields,(function(e){void 0===t[e]&&(t[e]="")})),i.grouping&&!i.bugFixGrouping&&(i.defineModel(t,!0),i.bugFixGrouping=!0),i.addIndex=e,void 0===t.id){Fancy.idSeed++;var a=Fancy.idSeed+1e3;"server"===i.proxyType?t.id="Temp-"+a:t.id=a}if(i.getById(t.id)&&i.remove(t.id,n),i.widget.isGroupable()&&(clearTimeout(this.timeOutGroupDataOrder),this.timeOutGroupDataOrder=setTimeout((function(){i.orderDataByGroup()}))),"server"!==i.proxyType||!i.autoSave||!i.proxy.api.create)return i.insertItem(t,e,n);!1!==n&&(i.once("create",i.onCreate,i),i.proxyCRUD("CREATE",t))},insertItem:function(e,t,n){var i=this,a=i.model,r=new a(e);return t=i.addIndex,i.treeExpanding||!1===n||i.fire("beforeinsert"),delete i.addIndex,i.data.splice(t,0,r),i.order&&(i.order.splice(t,0,t),i.changeOrderIndexes(t,"+"),i.order[t]--),!1!==n&&i.changeDataView(),i.map[e.id]=r,i.treeExpanding||!1===n||i.fire("insert",r),r},onCreate:function(e,t){return this.insertItem(t)}}),Fancy.Mixin("Fancy.store.mixin.Dirty",{initTrackDirty:function(){var e=this;e.changed={length:0},e.removed={length:0},e.inserted={length:0},e.undoActions=[],e.redoActions=[],e.on("remove",e.onDirtyRemove,e),e.on("set",e.onDirtySet,e),e.on("insert",e.onDirtyInsert,e)},onDirtySet:function(e,t){var n=this,i=t.id;if("$selected"!==t.key){if(void 0===n.changed[i]?(n.changed[i]={length:1},n.changed.length++):n.changed[i].length++,void 0===n.changed[i][t.key]&&(n.changed[i][t.key]={originValue:t.oldValue}),n.changed[i][t.key].value=t.value,n.changed[i][t.key].value===n.changed[i][t.key].originValue){delete n.changed[i][t.key],n.changed[i].length--;for(var a=0,r=n.undoActions.length-1;a<=r;a++){var o=r-a,s=n.undoActions[o];if(s.id===i&&t.key===s.key){var l=n.undoActions.splice(o,1);n.redoActions.push(l)}}}else n.redoing||(n.redoActions=[]),n.undoActions.push({id:i,type:"edit",key:t.key,value:t.value,oldValue:t.oldValue});0===n.changed[i].length&&(delete n.changed[i],n.changed.length--)}},onDirtyRemove:function(e,t,n,i){var a=this;a.removed[t]=n.data,a.removed.length++,!0!==a.undoStoppped&&(a.redoing||(a.redoActions=[]),a.undoActions.push({id:t,type:"remove",data:n.data,rowIndex:i}))},onDirtyInsert:function(e,t){var n=this;n.treeExpanding||(n.inserted[t.id]=t,n.inserted.length++,!0!==n.undoStoppped&&(n.redoing||(n.redoActions=[]),n.undoActions.push({id:t.id,type:"insert",data:t.data})))},clearDirty:function(){var e=this;e.changed={length:0},e.removed={length:0},e.inserted={length:0},e.undoActions=[],e.redoActions=[]},isDirty:function(){var e=this,t=!1;return e.changed.length&&(t=!0),e.removed.length&&(t=!0),e.inserted.length&&(t=!0),t}}),Fancy.define("Fancy.Store",{extend:Fancy.Event,mixins:["Fancy.store.mixin.Paging","Fancy.store.mixin.Infinite","Fancy.store.mixin.Proxy","Fancy.store.mixin.Rest","Fancy.store.mixin.Reader","Fancy.store.mixin.Writer","Fancy.store.mixin.Sort","Fancy.store.mixin.Edit","Fancy.store.mixin.Grouping","Fancy.store.mixin.Filter","Fancy.store.mixin.Dirty","Fancy.store.mixin.Tree"],pageSize:10,showPage:0,pages:0,loading:!1,constructor:function(){var e=this;e.Super("const",arguments),e.init(),e.data=e.data||[],e.dataView=e.dataView||[],e.dataViewMap=e.dataViewMap||{},e.map={},e.setModel(),e.data&&(e.data.proxy?e.initProxy():e.widget.isTreeData||e.setData(e.data)),e.readSmartIndexes(),e.widget.isGroupable()&&e.orderDataByGroup(),e.widget.isTreeData&&e.initTreeData()},init:function(){var e=this;e.addEvents("add","change","changepages","set","beforeupdate","update","beforeremove","remove","beforedestroy","destroy","beforecreate","create","beforesort","sort","beforeload","load","filter","beforeinsert","insert","servererror","serversuccess"),e.initId(),e.initPlugins(),e.paging&&e.initPaging(),e.infinite&&e.initInfinite(),e.initTrackDirty&&e.initTrackDirty()},setModel:function(){var e=this,t=e.model;if(t=void 0===t?Fancy.Model:Fancy.ClassManager.get(e.model),e.model=t,e.fields=t.prototype.fields,void 0===e.fields)throw new Error("[FancyGrid Error] - needed to set fields in Model of Store")},setData:function(e){var t,n=this,i=0,a=e.length,r=n.model;if(n.data=[],n.dataView=[],n.dataViewMap={},n.dataViewIndexes={},n.map={},n.collapsed)for(;i<a;i++)t=new r(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.expanded)for(;i<a;i++)t=new r(e[i]),n.data[i]=t,n.map[t.id]=t;else if(n.paging)for(;i<a;i++)t=new r(e[i]),n.data[i]=t,i<n.pageSize&&(n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i),n.map[t.id]=t;else for(;i<a;i++)t=new r(e[i]),n.data[i]=t,n.dataView[i]=t,n.dataViewMap[t.id]=i,n.dataViewIndexes[i]=i,n.map[t.id]=t;n.isTree&&Fancy.each(n.data,(function(e){e.get("expanded")&&Fancy.each(e.data.child,(function(t,i){var a=n.getById(t.id);e.data.child[i]=a}))}))},getItem:function(e){var t=this,n=t.dataView[e];return n||(n=t.order?t.data[t.order[e]]:t.data[e]),n},get:function(e,t,n){var i,a=this;if(void 0===e)return a.data;var r=a.dataView[e];return r?void 0===t?(i=r.data,void 0===i.id&&(i.id=a.dataView[e].id),a.dataView[e].data):"none"===t?"":n?(r=a.data[e],"id"===t?r.data[t]||r.id:r.data[t]):(r=a.dataView[e],"id"===t?r.data[t]||r.id:r.data[t]):(r=a.order?a.data[a.order[e]]:a.data[e],r?"id"===t?r.data[t]||r.id:r.data[t]:r)},getId:function(e){return this.dataView[e]?this.dataView[e].id:""},getRow:function(e){return this.dataViewMap[e]},set:function(e,t,n,i){var a,r=this,o=r.widget,s=0;if(!Number.isNaN(n)){if(r.infiniteScrolledToRow&&(s=r.infiniteScrolledToRow),e+s===-1?a=r.getById(i):(a=r.dataView[e+s],i=a.data.id||a.id),r._stopSaving||o.fire("beforesaving",{rowIndex:e,key:t,value:n,id:i,saving:function(){r._set(e,t,n,i)}}),r.stopSaving)return r._stopSaving=!0,void setTimeout((function(){delete r.stopSaving,delete r._stopSaving}));this._set(e,t,n,i)}},_set:function(e,t,n,i){var a,r,o=this,s=0;if(o.infiniteScrolledToRow&&(s=o.infiniteScrolledToRow),e+s===-1?a=o.getById(i):(a=o.dataView[e+s],i=a.data.id||a.id),void 0!==n){if((r=e+s===-1?a.get(t):o.get(e+s,t))!=n){if(e+s===-1)a.set(t,n);else{var l=o.dataView[e+s];if(l.data.parentId){var c=o.getById(l.data.parentId);Fancy.each(c.data.child,(function(e){e.id===l.id&&(e[t]=n)}))}l.data[t]=n}"server"===o.proxyType&&o.autoSave&&o.proxyCRUD("UPDATE",i,t,n),h=-1===e?a.data:o.dataView[e+s].data,o.fire("set",{id:i,data:h,rowIndex:e,infiniteRowIndex:e+s,key:t,value:n,oldValue:r,item:a})}}else{var d=t;for(var u in d)if("id"!==u){var h;e+s===-1?(r=a.get(u),a.set(u,d[u]),h=a.data):(r=o.get(e+s,u),o.dataView[e+s].data[u]=d[u],h=o.dataView[e+s].data),o.fire("set",{id:i,data:h,rowIndex:e,infiniteRowIndex:e+s,key:u,value:d[u],oldValue:r,item:a})}"server"===o.proxyType&&o.autoSave&&o.proxyCRUD("UPDATE",i,d)}},setItemData:function(e,t){var n=this,i=n.get(e);if(n.infinite&&(e-=n.infiniteScrolledToRow),n.writeAllFields&&"server"===n.proxyType)n.set(e,t);else for(var a in t)i[a]!=t[a]&&n.set(e,a,t[a])},getLength:function(){var e=this,t=e.dataView.length;return e.infinite&&t>e.infiniteDisplayedRows&&(t=e.infiniteDisplayedRows),t},getTotal:function(){var e=this;return"server"===e.pageType?e.totalCount:e.filteredData?e.filteredData.length:void 0===e.data||Fancy.isObject(e.data)?0:e.data.length},defineModel:function(e,t){var n=this,i=n.store;if(!n.model||!n.fields||0===n.fields.length||t){e=e||n.data||i.data;var a=n.getFieldsFromData(e),r="Fancy.model."+Fancy.id();Fancy.define(r,{extend:Fancy.Model,fields:a}),n.model=r,n.fields=a,n.setModel()}},getFieldsFromData:function(e){var t=e.items||e;if(e.fields)return e.fields;if(!t)throw new Error("[FancyGrid Error] - not set fields of data");var n=t[0],i=[];for(var a in void 0===t.length&&(n=t),n)i.push(a);return i},getColumnOriginalValues:function(e,t){var n,i=this,a=0,r=[],o=(t=t||{},t.dataProperty||"data"),s=i[o],l=s.length;if(/\./.test(e)&&(n=!0),t.smartIndexFn)if(i.infinite)for(;a<l;a++)r.push(t.smartIndexFn(s[a+i.infiniteScrolledToRow].data));else for(;a<l;a++)r.push(t.smartIndexFn(s[a].data));else if(t.format)if("date"===t.type)for(;a<l;a++){var c=s[a].data[e];null===c||""===c?r.push(Number.NEGATIVE_INFINITY):r.push(Fancy.Date.parse(c,t.format,t.mode))}else if(n)for(;a<l;a++)r.push(this.getNestedValue(s[a].data,e));else for(;a<l;a++)r.push(s[a].data[e]);else if(t.groupMap)if(i.groupMap={},n)for(;a<l;a++){var d=s[a];c=this.getNestedValue(d.data,e);r.push(c),i.groupMap[d.id]=c}else for(;a<l;a++){d=s[a],c=d.data[e];r.push(c),i.groupMap[d.id]=c}else if(n)for(;a<l;a++)r.push(this.getNestedValue(s[a].data||s[a],e));else for(;a<l;a++){var u=s[a].data||s[a];r.push(u[e])}return r},getNestedValue:function(e,t){var n=t.split(".");return n.length>1?this.getNestedValue(e[n.shift(0,1)],n.join(".")):e[t]},changeDataView:function(e){var t,n=this,i=(e=e||{},[]),a={},r=0,o=n.data.length,s=n.isFiltered(),l=n.isSorted(),c=n.data;if(l&&e.reSort&&(n.remoteSort||n.reSort()),s){if(e.stoppedFilter||e.doNotFired){if(n.paging&&"server"===n.pageType)return}else n.filterData();n.remoteFilter||(c=n.filteredData,void 0===c&&(c=n.data),o=c.length)}n.dataViewIndexes={},n.dataViewMap={},n.paging&&(r="server"===n.pageType?0:n.showPage*n.pageSize,o=r+n.pageSize);var d,u=n.getTotal();if(o>n.data.length&&(o=n.data.length),s&&o>u&&(o=u),Fancy.isObject(n.data)&&(o=0),n.order)if(n.grouping)for(t=n.grouping.by;r<o;r++)!0===s?(n.dataViewIndexes[i.length]=n.filterOrder[r],d=c[r]):(n.dataViewIndexes[i.length]=n.order[r],d=c[n.order[r]]),n.expanded[d.data[t]]&&(i.push(d),a[d.id]=i.length-1);else for(;r<o;r++)!0===s?(n.dataViewIndexes[i.length]=n.filterOrder[r],d=c[r]):(n.dataViewIndexes[i.length]=n.order[r],d=c[n.order[r]]),i.push(d),a[d.id]=i.length-1;else if(n.grouping)for(t=n.grouping.by;r<o;r++)n.expanded[c[r].data[t]]&&(n.dataViewIndexes[i.length]=r,d=c[r],i.push(d),a[d.id]=i.length-1);else for(;r<o;r++)n.dataViewIndexes[i.length]=r,d=c[r],i.push(c[r]),a[d.id]=i.length-1;n.dataView=i,n.dataViewMap=a,e.doNotFired||n.fire("change")},getColumnData:function(e,t){var n=this,i=0,a=n.data.length,r=[];if(t)for(;i<a;i++)r.push(t(n.data[i].data));else for(;i<a;i++)r.push(n.data[i].data[e]);return r},getColumnUniqueData:function(e){for(var t=this,n=0,i=t.data.length,a=[],r={};n<i;n++){var o=t.data[n].data[e];!0!==r[o]&&(r[o]=!0,a.push(o))}return a.sort()},getData:function(){for(var e=this,t=0,n=e.data.length,i=[];t<n;t++)i.push(e.data[t].data);return i},getDataView:function(){for(var e=this,t=0,n=e.dataView.length,i=[];t<n;t++)i.push(e.dataView[t].data);return i},getById:function(e){return this.map[e]},changeItemId:function(e,t){var n=this,i=n.getById(e);if(!i)return!1;i.id=t,void 0!==i.data.id&&(i.data.id=t),delete n.map[e],n.map[t]=i,n.fire("changeitemid",e,t)},find:function(e,t,n){var i,a=this,r=a.dataView,o=0,s=r.length,l=[];if(n)for(s=a.data.length;o<s;o++)i=a.order?a.data[a.order[o]]:a.data[o],i.data[e]===t&&l.push(o);else for(;o<s;o++)i=r[o],i.data[e]===t&&l.push(o);return l},findItem:function(e,t){for(var n,i=this,a=i.data,r=0,o=a.length,s=[];r<o;r++)n=a[r],n.data[e]===t&&s.push(n);return s},getDataIndex:function(e){for(var t,n,i=this,a=i.data,r=0,o=a.length;r<o;r++)t=a[r],t.data.id===e&&(n=r);return n},each:function(e,t){var n=this,i=n.dataView,a=0,r=i.length;if(t)for(;a<r;a++)e.apply(this,[i[a]]);else for(;a<r;a++)e(i[a])},readSmartIndexes:function(){var e=this,t=e.widget,n=0,i={};Fancy.each(t.columns,(function(e){e.smartIndexFn&&(i[e.index]=e.smartIndexFn,n++)})),n&&(e.smartIndexes=i)},destroy:function(){var e=this;Fancy.each(e.data,(function(e){delete e.data,delete e.id})),e.data=[],e.map={},e.dataView=[],e.dataViewIndexes={},e.dataViewMap={}},addField:function(e){var t=this,n=t.fields,i=!1;Fancy.isArray(e)?Fancy.Array.each(e,(function(e){t.addField(e)})):(Fancy.each(n,(function(t){if(t===e)return i=!0,!0})),i||t.fields.push(e))},isFiltered:function(){var e=this,t=e.filters||{};if(e._clearedFilter)return!0;for(var n in t)return!0;return!1},isSorted:function(){var e=this,t=e.sorters||{};return!Fancy.Object.isEmpty(t)}}),Fancy.$=window.$||window.jQuery,Fancy.nojQuery=void 0===Fancy.$,Fancy.get=function(e){switch(Fancy.typeOf(e)){case"string":return new Fancy.Element(Fancy.$("#"+e)[0]);case"array":return new Fancy.Elements(e);default:return new Fancy.Element(e)}},Fancy.Element=function(e){var t=this;t.dom=e,t.$dom=Fancy.$(e),e&&e.id&&(t.id=e.id),t.length=1},Fancy.Element.prototype={last:function(){return Fancy.get(this.$dom)},closest:function(e){return Fancy.get(this.$dom.closest(e)[0])},destroy:function(){this.$dom.remove()},remove:function(){this.$dom.remove()},finish:function(){this.$dom.finish()},prev:function(){return Fancy.get(this.$dom.prev()[0])},lastChild:function(){var e=this.$dom.children();return Fancy.get(e[e.length-1])},firstChild:function(){return Fancy.get(this.$dom.children()[0])},child:function(){var e=this.$dom.children();return Fancy.each(e,(function(t,n){e[n]=Fancy.get(t)})),e},on:function(e,t,n,i){var a=this;switch(n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.on(e,i,t):a.$dom.on(e,t),e){case"mouseenter":a.onTouchEnterEvent&&a.onTouchEnterEvent(e,t,n,i);break;case"mouseleave":a.onTouchLeaveEvent&&a.onTouchLeaveEvent(e,t,n,i);break;case"mousemove":a.onTouchMove&&a.onTouchMove("touchmove",t)}},once:function(e,t,n,i){var a=this;n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.one(e,i,t):a.$dom.one(e,t)},prop:function(e){return this.$dom.prop(e)},un:function(e,t,n,i){var a=this;n&&(t=Fancy.$.proxy(t,n)),i?a.$dom.off(e,i,t):a.$dom.off(e,t)},show:function(){this.$dom.show()},hide:function(){this.$dom.hide()},replaceClass:function(e,t){this.$dom.removeClass(e),this.$dom.addClass(t)},getByTag:function(e){return Fancy.get(this.$dom.find(e)[0])},getByClass:function(e){return this.$dom.find("."+e)[0]},addClass:function(e){this.addCls.apply(this,arguments)},addCls:function(e){if(this.$dom.addClass(e),arguments.length>1)for(var t=1,n=arguments.length;t<n;t++)this.addClass(arguments[t])},removeClass:function(e){this.$dom.removeClass(e)},removeCls:function(e){this.$dom.removeClass(e)},hasClass:function(e){return this.$dom.hasClass(e)},hasCls:function(e){return this.$dom.hasClass(e)},toggleClass:function(e){this.$dom.toggleClass(e)},toggleCls:function(e){this.$dom.toggleClass(e)},select:function(e){var t=this,n=t.$dom.find(e);return 1===n.length?Fancy.get(n[0]):n.length>1?Fancy.get(n):0===n.length?{length:0,dom:void 0,addClass:function(){},addCls:function(){},removeClass:function(){},removeCls:function(){},destroy:function(){},remove:function(){},css:function(){},each:function(){},last:function(){},attr:function(){}}:n},css:function(e,t){return void 0===t?this.$dom.css(e):this.$dom.css(e,t)},attr:function(e,t){return void 0===t?this.$dom.attr(e):this.$dom.attr(e,t)},append:function(e){return Fancy.get(this.$dom.append(e)[0])},after:function(e){return Fancy.get(this.$dom.after(e)[0])},next:function(){return Fancy.get(this.$dom.next()[0])},insertAfter:function(e){return Fancy.get(this.$dom.insertAfter(e)[0])},before:function(e){return Fancy.get(this.$dom.before(e)[0])},height:function(e){return e?(this.$dom.height(e),this):this.$dom.height()},width:function(e){return e?(this.$dom.width(e),this):this.$dom.width()},parent:function(e){return Fancy.get(this.$dom.parent(e)[0])},update:function(e){this.dom.innerHTML=e},hover:function(e,t){e&&this.$dom.on("mouseenter",e),e&&this.$dom.on("mouseleave",t)},position:function(){return this.$dom.position()},offset:function(){return this.$dom.offset()},focus:function(){this.$dom.focus()},blur:function(){this.$dom.blur()},within:function(e){var t,n=this,i=!0,a=!1;return e=Fancy.get(e),t=e.attr("id"),void 0!==t&&""!==t||(t=Fancy.id(),a=!0),e.attr("id",t),0===n.select("#"+t).length&&(i=!1),n.dom.id===e.dom.id&&(i=!0),a&&n.removeAttr(t),i},removeAttr:function(e){this.$dom.removeAttr(e)},item:function(){return this},stop:function(){this.$dom.stop&&this.$dom.stop()},animate:function(e,t,n,i){var a={},r=!1,o=e.force;for(var s in Fancy.nojQuery||(r=!0,o=!0),Fancy.isObject(e)&&delete e.force,e){var l=e[s];Fancy.isString(l)&&(l=Number(l.replace("px","")));var c=this.css(s);Fancy.isString(c)&&(c=Number(c.replace("px",""))),l!==c&&(a[s]=e[s],r=!0)}!1!==r&&(o?this.$dom.animate(a,t,n,i):this.$dom.css(a))},index:function(){return this.$dom.index()},onTouchEnterEvent:function(e,t,n,i){var a=this,r=Fancy.get(document.body);if(Fancy.isTouch){var o=function(e,r){var o=Fancy.id(),s="fancy-tempt-attr";e=e.originalEvent||e,a.attr(s,o);for(var l=e.targetTouches[0],c=[l.pageX,l.pageY],d=Fancy.get(document.elementFromPoint(c[0]-document.body.scrollLeft,c[1]-document.body.scrollTop)),u=!1,h=10,f=d;h>0&&f.dom;){if(f.attr(s)===o){u=!0;break}f=f.parent(),h--}if(!u||a.touchIn||i||(e.pageX=l.pageX,e.pageY=l.pageY,t(e,r),a.touchIn=!0),u&&i){h=10,f=d;for(var p=[],g=0;h>0&&f.dom;){var y=f.select(i);if(0!==y.length){var m=a.getDelegateTarget(i,y,p,g);m&&(e.currentTarget=m,e.delegateTarget=m,e.pageX=l.pageX,e.pageY=l.pageY,a.touchIn=!0,a.touchInDelegate=a.touchInDelegate||{},void 0===a.touchInDelegate[i]?a.touchInDelegate[i]=m:a.touchInDelegate[i]!==m&&(a.touchInDelegate[i]=[a.touchInDelegate[i],m]),t.apply(n,[e,m]));break}if(f.attr(s)===o)break;p.push(f.dom),f=f.parent(),h--,g++}}a.removeAttr(s)};r.on("touchmove",o)}},onTouchLeaveEvent:function(e,t,n,i){var a=this,r=Fancy.get(document.body),o=[];if(Fancy.isTouch){var s=function(e,n){var r=Fancy.id(),s="fancy-tempt-attr";e=e.originalEvent||e;if(a.attr(s,r),!0===a.touchIn){var l=e.targetTouches[0],c=[l.pageX,l.pageY],d=Fancy.get(document.elementFromPoint(c[0]-document.body.scrollLeft,c[1]-document.body.scrollTop));if(!i){for(var u=!1,h=10,f=d;h>0&&f.dom;){if(f.attr(s)===r){u=!0;break}f=f.parent(),h--}if(!1===u)return e.pageX=l.pageX,e.pageY=l.pageY,a.touchIn=!1,t(e,n),void a.removeAttr(s)}if(o.length>30&&(o=o.slice(o.length-5,o.length-1)),o.push(d.dom),i&&a.touchInDelegate[i]){var p,g=Fancy.id();p=Fancy.isArray(a.touchInDelegate[i])?Fancy.get(a.touchInDelegate[i][0]):Fancy.get(a.touchInDelegate[i]),p.attr(s,g),h=10;var y=!1;for(f=d;h>0&&f.dom;){if(f.attr(s)===g){y=!0;break}f=f.parent(),h--}p.removeAttr(s),y||(delete a.touchInDelegate[i],a.touchIn=!1,e.currentTarget=p.dom,e.delegateTarget=p.dom,e.pageX=l.pageX,e.pageY=l.pageY,t(e,p.dom))}a.removeAttr(s)}else a.removeAttr(s)};r.on("touchmove",s)}},getDelegateTarget:function(e,t,n,i){for(var a=n[i-e.match(/\./g).length],r=0,o=t.length;r<o;r++)if(t.item(r).dom===a)return a;return!1},onTouchMove:function(e,t,n){var i=this,a=Fancy.get(document.body);if(Fancy.isTouch){var r=function(e,n){var a=Fancy.id(),r="fancy-tempt-attr";e=e.originalEvent||e,i.attr(r,a);for(var o=e.targetTouches[0],s=[o.pageX,o.pageY],l=!1,c=10,d=Fancy.get(document.elementFromPoint(s[0]-document.body.scrollLeft,s[1]-document.body.scrollTop)),u=d;c>0&&u.dom;){if(u.attr(r)===a){l=!0;break}u=u.parent(),c--}i.removeAttr(r),l&&(e.pageX=o.pageX,e.pageY=o.pageY,t(e,n))};a.on("touchmove",r)}},each:function(e){e(this,0)},getCls:function(){return this.dom.className.split(/\s+/)}},Fancy.Elements=function(e){var t=this;t.dom=e,t.$dom=e,t.length=e.length},Fancy.Elements.prototype={attr:function(e,t){var n=this,i=n.$dom;return n.length>1&&(i=n.$dom[0]),void 0===t?i.attr(e):i.attr(e,t)},addClass:function(e){this.addCls.apply(this,arguments)},finish:function(){for(var e=this,t=0,n=e.length;t<n;t++)Fancy.get(e.$dom[t]).finish()},addCls:function(e){for(var t=this,n=0,i=t.length;n<i;n++)Fancy.get(t.$dom[n]).addClass(e);if(arguments.length>1)for(n=1,i=arguments.length;n<i;n++)t.addClass(arguments[n])},removeClass:function(e){this.removeCls.apply(this,arguments)},removeCls:function(e){for(var t=this,n=0,i=t.length;n<i;n++)Fancy.get(t.$dom[n]).removeCls(e)},hover:function(e){this.$dom.on("mouseenter",e)},on:Fancy.Element.prototype.on,once:Fancy.Element.prototype.once,item:function(e){return Fancy.get(this.$dom[e])},css:function(e,t){for(var n=this,i=0,a=n.length;i<a;i++)Fancy.get(n.$dom[i]).css(e,t)},toggleClass:function(e){for(var t=this,n=0,i=t.length;n<i;n++)Fancy.get(t.$dom[n]).toggleClass(e)},toggleCls:function(e){for(var t=this,n=0,i=t.length;n<i;n++)Fancy.get(t.$dom[n]).toggleClass(e)},destroy:function(){for(var e=this,t=0,n=e.length;t<n;t++)Fancy.get(e.$dom[t]).destroy()},remove:function(){this.destroy()},hide:function(){for(var e=this,t=0,n=e.length;t<n;t++)Fancy.get(e.$dom[t]).hide()},show:function(){for(var e=this,t=0,n=e.length;t<n;t++)Fancy.get(e.$dom[t]).show()},index:function(){return this.$dom[0].index()},each:function(e){for(var t,n=this,i=0,a=n.length;i<a;i++)t=new Fancy.Element(n.$dom[i]),e(t,i)},last:function(){var e=this;return new Fancy.Element(e.$dom[e.length-1])}},Fancy.select=function(e){return Fancy.get(document.body).select(e)},Fancy.onReady=function(e){Fancy.$(document).ready(e)},Fancy.Ajax=function(e){var t={};e.url&&(t.url=e.url),e.success&&(t.success=e.success),e.error&&(t.error=e.error),e.method&&(t.type=e.method),e.params&&(t.data=e.params),e.dataType&&(t.dataType=e.dataType),e.sendJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8",t.data=JSON.stringify(t.data)),e.getJSON&&(t.dataType="json",t.contentType="application/json; charset=utf-8"),e.headers&&(t.headers=e.headers),Fancy.$.ajax(t)},Fancy.i18n.en={paging:{first:"First Page",last:"Last Page",prev:"Previous Page",next:"Next Page",info:"Rows [0] - [1] of [2]",page:"Page",of:"of [0]"},loadingText:"Loading...",thousandSeparator:",",decimalSeparator:".",currencySign:"$",sourceText:"Source",date:{read:"m/d/Y",write:"m/d/Y",edit:"m/d/Y",today:"Today",startDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],am:"am",pm:"pm",AM:"AM",PM:"PM",ok:"OK",cancel:"Cancel"},yes:"Yes",no:"No",dragText:"[0] selected row[1]",update:"Update",cancel:"Cancel",columns:"Columns",autoSizeColumn:"Autosize Column",autoSizeColumns:"Autosize All Columns",sortAsc:"Sort ASC",sortDesc:"Sort DESC",lock:"Lock",unlock:"Unlock",rightLock:"Right Lock"},Fancy.i18n["en-US"]=Fancy.i18n.en,Fancy.controllers={},Fancy.defineController=function(e,t){Fancy.controllers[e]=t},Fancy.defineControl=Fancy.defineController,Fancy.getController=function(e){return Fancy.controllers[e]},Fancy.getControl=Fancy.getController,Fancy.define("Fancy.DD",{extend:Fancy.Event,singleton:!0,constructor:function(){this.Super("const",arguments),this.init()},init:function(){this.addEvents(),this.els={}},add:function(e){var t=this,n=Fancy.id(e.overEl);t.els[n]=e,e.overEl.on("mousedown",t.onMouseDown,t)},onMouseDown:function(e){var t=this,n=Fancy.get(document),i=Fancy.get(e.currentTarget),a=t.els[i.attr("id")].dragEl;e.preventDefault(),t.clientX=e.clientX,t.clientY=e.clientY,t.startX=parseInt(a.css("left")),t.startY=parseInt(a.css("top")),t.activeId=i.attr("id"),n.once("mouseup",t.onMouseUp,t),n.on("mousemove",t.onMouseMove,t)},onMouseUp:function(){Fancy.get(document).un("mousemove",this.onMouseMove,this)},onMouseMove:function(e){var t=this,n=t.els[t.activeId],i=n.dragEl,a=e.clientX,r=e.clientY,o=t.clientX-a,s=t.clientY-r,l=t.startX-o,c=t.startY-s;c<0&&(c=0),i.css({left:l,top:c})}}),Fancy.define("Fancy.Widget",{extend:Fancy.Event,constructor:function(e){var t=this;Fancy.applyConfig(t,e),t.preInitControls(),t.Super("const",arguments),t.init(),t.initControls()},init:function(){var e=this;e.initId(),e.addEvents("beforerender","afterrender","render","show","beforehide","hide","destroy"),e.initPlugins()},renderItems:function(e){var t=this;Fancy.each(t.items,(function(n,i){var a=Fancy.getClassByType(n.type);n.renderTo=e,t.items[i]=new a(n)}))},preInitControls:function(){var e=this,t=e.controller||e.controllers;if(t)switch(Fancy.typeOf(t)){case"string":for(var n in t=Fancy.getController(t),t)void 0===e[n]&&(e[n]=t[n]);break;case"array":for(var i=[],a=0,r=t.length;a<r;a++){var o=Fancy.getController(t[a]);for(var n in o)"controls"!==n?void 0===e[n]&&(e[n]=o[n]):i=i.concat(o.controls)}e.controls=i}},initControls:function(){var e=this;if(void 0!==e.controls)for(var t=e.controls,n=0,i=t.length;n<i;n++){var a=t[n];void 0===a.event&&Fancy.error("Not set event name for control"),void 0===a.handler&&Fancy.error("Not set event handler for control");var r=a.event,o=a.handler,s=a.scope||e,l=a.selector;Fancy.isString(o)&&(o=e[o]),l?function(t,n,i,a){e.$events[t]?e.on(t,(function(e,t){var r=t.e.target,o=Fancy.get(r),s=o.parent(),l=s.select(a);if(1===l.length&&l.within(r))n.apply(i,arguments);else if(l.length>1)for(var c=0,d=l.length;c<d;c++)l.item(c).within(r)&&n.apply(i,arguments)}),i):e.on("render",(function(){e.el.on(t,n,i,a)}))}(r,o,s,l):void 0===l&&void 0===a.widget&&e.on(r,o,s)}},css:function(e,t){return this.el.css(e,t)},addClass:function(e){this.el.addCls(e)},addCls:function(e){this.el.addCls(e)},removeClass:function(e){this.el.removeCls(e)},removeCls:function(e){this.el.removeCls(e)},hasClass:function(e){return this.el.hasCls(e)},hasCls:function(e){return this.el.hasCls(e)},toggleClass:function(e){this.el.toggleCls(e)},toggleCls:function(e){this.el.toggleCls(e)},destroy:function(){this.el&&this.el.dom&&this.el.destroy()},show:function(){this.el.show()},hide:function(){this.el.hide()},isVisible:function(){return"none"!==this.el.css("display")},initTpl:function(){var e=this;e.tpl&&(e.tpl=new Fancy.Template(e.tpl))}}),Fancy.define("Fancy.Plugin",{extend:Fancy.Event,constructor:function(){this.Super("const",arguments),this.init()},init:function(){this.initId(),this.addEvents("beforerender","afterrender","render","show","hide","destroy")},initTpl:function(){var e=this.tpl;e&&(this.tpl=new Fancy.Template(e))}}),function(){var e={},t=Fancy,n=t.GRID_CLS,i=t.PANEL_BODY_CLS,a=t.BUTTON_CLS,r=t.BUTTON_DISABLED_CLS,o=t.BUTTON_PRESSED_CLS,s=t.BUTTON_IMAGE_CLS,l=t.BUTTON_IMAGE_COLOR_CLS,c=t.BUTTON_TEXT_CLS,d=t.BUTTON_DROP_CLS,u=t.BUTTON_MENU_CLS;t.define("Fancy.Button",{extend:t.Widget,minWidth:30,constructor:function(t,n){var i=this;t.toggleGroup&&(e[t.toggleGroup]=e[t.toggleGroup]||{active:!1,items:[]},e[t.toggleGroup].items.push(i)),i.scope=n||t.scope||i.scope||i,i.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout","pressedchange","init-menu"),e.Super("init",arguments),e.style=e.style||{},e.initTpl(),e.render(),e.setOns()},setOns:function(){var e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e),t.on("mouseup",e.onMouseUp,e),t.on("mouseover",e.onMouseOver,e),t.on("mouseout",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},widgetCls:a,cls:"",extraCls:"",disabledCls:r,pressedCls:o,buttonImageCls:s,buttonImageColorCls:l,textCls:c,dropCls:d,text:"",height:28,paddingTextWidth:5,imageWidth:20,rightImageWidth:20,pressed:!1,theme:"default",tpl:['<div class="'+s+'"></div>','<a class="'+c+'">{text}</a>','<div class="'+d+'" style="{dropDisplay}"></div>'],render:function(){var e,n=this,i=t.get(document.createElement("div")),a=0,o=7;switch(n.theme&&Fancy.themes[n.theme]&&(o=Fancy.themes[n.theme].config.charWidth),n.i18n){case"zh-CN":case"zh-TW":case"ja":case"ko":o=10}if(n.fire("beforerender"),n.wrapper&&n.renderWrapper(),e=t.get(n.renderTo||document.body).dom,n.width?a=n.width:!1!==n.text&&void 0!==n.text&&(a+=n.text.length*o+2*o),n.imageColor&&(n.imageCls=l),a<n.minWidth&&(n.text&&n.text.length,a=n.minWidth),n.imageCls&&n.text&&(a+=n.imageWidth),n.menu&&(a+=n.rightImageWidth),i.addCls(t.cls,n.widgetCls,n.cls,n.extraCls),n.disabled&&i.addCls(r),n.menu&&i.addCls(u),i.css({width:a+"px",height:n.height+"px"}),n.hidden&&i.css("display","none"),i.css(n.style||{}),i.update(n.tpl.getHTML({text:n.text||""})),n.imageCls){var c=i.select("."+s);n.imageColor&&c.css("background-color",n.imageColor),c.css("display","block"),t.isString(n.imageCls)&&c.addCls(n.imageCls)}n.id&&i.attr("id",n.id),n.el=t.get(e.appendChild(i.dom)),n.disabled&&n.disable(),n.pressed&&n.setPressed(n.pressed),n.initToggle(),n.width=a,n.fire("afterrender"),n.fire("render")},renderWrapper:function(){var e=this,n=e.wrapper,i=t.get(e.renderTo||document.body).dom,a=t.get(document.createElement("div"));a.css(n.style||{}),a.addCls(n.cls||""),e.wrapper=t.get(i.appendChild(a.dom)),e.renderTo=e.wrapper.dom},initToggle:function(){if(!this.enableToggle)return!1},setPressed:function(t,n){var i=this;if(t){if(i.addCls(o),i.pressed=!0,i.toggleGroup){var a=e[i.toggleGroup].active;a&&a.setPressed(!1),e[i.toggleGroup].active=i}}else i.removeCls(o),i.pressed=!1,i.toggleGroup&&delete e[i.toggleGroup].active;!1!==n&&i.fire("pressedchange",i.pressed)},toggle:function(){var e=this,t=!e.pressed;e.setPressed(t),e.pressed=t},onClick:function(e){var n=this,i=n.handler;n.fire("click"),!0!==n.disabled&&(i&&(t.isString(i)&&(i=n.getHandler(i)),n.scope?i.apply(n.scope,[n]):i(n)),n.enableToggle&&(n.toggleGroup?n.pressed?n.setPressed(!1):n.setPressed(!0):n.toggle()),n.menu&&(n.toggleMenuShow(e),n.toggle()))},getHandler:function(e){var a=this;return t.getWidget(a.el.closest("."+i).select("."+n).attr("id"))[e]||function(){t.error("Handler does not exist")}},onMouseDown:function(){this.fire("mousedown")},onMouseUp:function(){this.fire("mouseup")},onMouseOver:function(e){var t=this;t.fire("mouseover"),t.tip&&t.renderTip(e)},renderTip:function(e){var n=this;n.tooltip&&n.tooltip.destroy(),n.tooltip=new t.ToolTip({text:n.tip}),n.tooltip.css("display","block"),n.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOut:function(){var e=this;e.fire("mouseout"),e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)},setText:function(e,t){var n=this,i=n.el,a=7;switch(n.text=e,n.theme&&Fancy.themes[n.theme]&&(a=Fancy.themes[n.theme].config.charWidth),n.i18n){case"zh-CN":case"zh-TW":case"ja":case"ko":a=10}t||(t=0),t||(t+=e.length*a+2*a,n.imageColor&&(n.imageCls=l),t<n.minWidth&&(n.text&&n.text.length,t=n.minWidth),n.imageCls&&n.text&&(t+=n.imageWidth),n.menu&&(t+=n.rightImageWidth)),n.css("width",t),i.select("."+c).update(e)},disable:function(){this.disabled=!0,this.addCls(r)},enable:function(){this.disabled=!1,this.removeCls(r)},onMouseMove:function(e){var t=this;t.tip&&t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)},toggleMenuShow:function(){var e=this,n=e.el.$dom.offset(),i=[n.left,n.top+e.el.$dom.height()];e.pressed?e.menu.hide():(t.isArray(e.menu)?e.initMenu():e.menu.type||e.initMenu(),setTimeout((function(){e.menu.showAt(i[0],i[1])}),100))},initMenu:function(){var e=this,n={theme:e.theme,events:[{hide:e.onMenuHide,scope:e}]};t.isObject(e.menu)?t.apply(n,e.menu):n.items=e.menu,e.menu=new t.Menu(n),e.fire("init-menu")},onMenuHide:function(){this.setPressed(!1)}})}(),Fancy.define("Fancy.SegButton",{extend:Fancy.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init:function(){var e=this;e.addEvents("toggle"),e.Super("init",arguments),e.style=e.style||{},e.render()},widgetCls:Fancy.SEG_BUTTON_CLS,cls:"",extraCls:"",text:"",render:function(){var e,t=this,n=Fancy.get(document.createElement("div"));t.fire("beforerender"),e=Fancy.get(t.renderTo||document.body).dom,n.addCls(Fancy.cls,t.widgetCls,t.cls,t.extraCls),t.hidden&&n.css("display","none"),t.el=Fancy.get(e.appendChild(n.dom)),Fancy.each(t.style,(function(e,n){t.el.css(n,e)})),t.renderButtons(),t.fire("afterrender"),t.fire("render")},renderButtons:function(){for(var e=this,t=e.items,n=0,i=t.length,a=Fancy.id(null,"fancy-toggle-group-");n<i;n++){var r=t[n];r.renderTo=e.el.dom,!1!==e.allowToggle&&(r.enableToggle=!0,!0!==e.multiToggle&&(r.toggleGroup=a)),0===n?(r.style={"border-right-width":0,"border-top-right-radius":0,"border-bottom-right-radius":0},1===i&&delete r.style["border-right-width"]):r.style=n>1?{"border-left-width":0,"border-top-left-radius":0,"border-bottom-left-radius":0}:{"border-top-left-radius":0,"border-bottom-left-radius":0},t.length>2&&0!==n&&n!==i-1&&Fancy.apply(r.style,{"border-top-right-radius":0,"border-bottom-right-radius":0,"border-top-left-radius":0,"border-bottom-left-radius":0}),e.items[n]=new Fancy.Button(r),e.items[n].on("pressedchange",(function(t,n){e.fire("toggle",t,n,e.getValues())}))}},getValues:function(){for(var e=this,t=[],n=e.items,i=0,a=n.length;i<a;i++)t.push(n[i].pressed);return t},clear:function(e){for(var t=this,n=t.items,i=0,a=n.length;i<a;i++)n[i].setPressed(!1,e)},setItems:function(e){var t=this;t.el.update(""),t.items=e,t.renderButtons()},setActiveItem:function(e,t){this.items[e].setPressed(!0,t)},setValue:function(e){var t=this,n=t.items;switch(t.clear(!1),Fancy.typeOf(e)){case"array":Fancy.each(e,(function(e){switch(Fancy.typeOf(e)){case"string":Fancy.each(n,(function(t){t.value===e&&t.setPressed(!0,!0)}));break;case"number":n[e].setPressed(!0,!0)}}));break;case"string":Fancy.each(n,(function(t){t.value===e&&t.setPressed(!0,!0)}));break;case"number":var i=n[e];i&&i.setPressed(!0,!0)}}}),Fancy.define("Fancy.toolbar.Tab",{extend:Fancy.Button,constructor:function(){this.Super("const",arguments)},init:function(){this.Super("init",arguments)},cls:Fancy.BUTTON_CLS+" "+Fancy.TAB_TBAR_CLS,render:function(){this.Super("render",arguments)}}),function(){var e=Fancy,t=e.FOOTER_STATUS_CLS,n=e.STATUS_SOURCE_TEXT_CLS,i=e.STATUS_SOURCE_LINK_CLS,a=e.FOOTER_SOURCE_CLS;Fancy.Mixin("Fancy.panel.mixin.PrepareConfig",{prepareConfigTheme:function(e,t){var n=e.theme||t.theme,i=Fancy.getTheme(n).config;return Fancy.isObject(n)&&(e.theme=n.name),Fancy.applyIf(e,i),e.theme&&(this.theme=e.theme),e},prepareConfigFooter:function(e){var r=e.footer,o=e.lang;if(r){var s=[];if(Fancy.isString(r.status)&&s.push({type:"text",text:r.status,cls:t}),r.status&&r.source&&s.push("side"),Fancy.isString(r.source))s.push({type:"text",text:r.source,cls:a});else if(Fancy.isObject(r.source)){var l=r.source.text,c=r.source.sourceText||o.sourceText;if(r.source.link){var d=r.source.link;d=d.replace("http://",""),d="http://"+d,l='<span class="'+n+'">'+c+'</span>: <a class="'+i+'" href="'+d+'">'+l+"</a>"}else l="<span>"+c+":</span> "+l;s.push({type:"text",text:l,cls:a})}e.footer=s}return e},prepareConfigLang:function(e,t){var n=e.i18n||t.i18n,i=Fancy.Object.copy(Fancy.i18n[n]);if(e.lang){for(var a in e.lang)switch(Fancy.isObject(e.lang[a])){case!1:case void 0:i[a]=e.lang[a]}for(var a in i.paging={},e.lang.paging&&Fancy.apply(i.paging,e.lang.paging),e.lang.paging)"paging"!==a&&(Fancy.isObject(a)||(i[a]=e.lang.paging[a]));i.date={},e.lang.date&&Fancy.apply(i.date,e.lang.date)}return e.lang=i,e}})}(),Fancy.Mixin("Fancy.panel.mixin.methods",{setTitle:function(e){this.panel&&this.panel.setTitle(e)},getTitle:function(){if(this.panel)return this.panel.getTitle()},setSubTitle:function(e){this.panel&&this.panel.setSubTitle(e)},getSubTitle:function(){if(this.panel)return this.panel.getSubTitle()}}),Fancy.Mixin("Fancy.panel.mixin.DD",{ddCls:Fancy.PANEL_DRAGGABLE_CLS,initDD:function(){this.addDDCls(),this.addDD()},addDDCls:function(){this.el.addCls(this.ddCls)},addDD:function(){Fancy.DD.add({dragEl:this.el,overEl:this.el.select("."+Fancy.PANEL_HEADER_CLS).item(0)})}}),Fancy.Mixin("Fancy.panel.mixin.Resize",{cornerResizeCls:"fancy-panel-resize-corner",resizeMaskCls:"fancy-panel-resize-mask",initResize:function(){var e=this;e.activeResizeEl=void 0,e.renderResizeEls(),e.onsResizeEls()},renderResizeEls:function(){var e=this,t=e.el,n=Fancy.get(document.createElement("div"));n.addCls(e.cornerResizeCls),e.cornerResizeEl=Fancy.get(t.dom.appendChild(n.dom))},onResize:function(){var e=this;e.tbar&&e._tbar.applyScrollChanges(),e.subTBar&&e._subTBar.applyScrollChanges(),e.bbar&&e._bbar.applyScrollChanges(),e.footer&&e._footer.applyScrollChanges(),e.buttons&&e._buttons.applyScrollChanges();var t=e.items[0];t&&"grid"===t.type&&t.infinite&&(delete t.numOfVisibleCells,t.update())},onsResizeEls:function(){var e=this;Fancy.isTouch?e.cornerResizeEl.on("touchstart",e.onMouseDownResizeEl,e):e.cornerResizeEl.on("mousedown",e.onMouseDownResizeEl,e),e.on("resize",e.onResize,e)},onMouseDownResizeEl:function(e){var t=this,n=Fancy.get(document);if(e.preventDefault(),Fancy.nojQuery&&t.el.select("."+Fancy.GRID_ANIMATION_CLS).removeCls(Fancy.GRID_ANIMATION_CLS),Fancy.isTouch){e=e.originalEvent||e;var i=e.changedTouches[0];n.once("touchend",t.onMouseUpResize,t),n.on("touchmove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=i.clientX,t.startClientY=i.clientY}else n.once("mouseup",t.onMouseUpResize,t),n.on("mousemove",t.onMouseMoveResize,t),t.renderResizeMask(),t.startClientX=e.clientX,t.startClientY=e.clientY},onMouseUpResize:function(){var e=this,t=Fancy.get(document);delete e.activeResizeEl,e.resizeMaskEl.destroy(),delete e.startClientX,delete e.startClientY,t.un("mousemove",e.onMouseMoveResize,e),e.setWidth(e.newResizeWidth),e.setHeight(e.newResizeHeight),e.fire("resize",{width:e.newResizeWidth,height:e.newResizeHeight}),Fancy.nojQuery&&e.el.select(".fancy-grid").addCls(Fancy.GRID_ANIMATION_CLS)},onMouseMoveResize:function(e){var t=this,n=e.clientX,i=e.clientY;if(Fancy.isTouch){e=e.originalEvent||e;var a=e.originalEvent.changedTouches[0];n=a.clientX,i=a.clientY}var r=t.startClientX-n,o=t.startClientY-i,s=t.startResizeWidth-r,l=t.startResizeHeight-o;e.preventDefault(),e.stopPropagation(),s<t.minWidth&&(s=t.minWidth),l<t.minHeight&&(l=t.minHeight),t.newResizeWidth=s,t.newResizeHeight=l,t.resizeMaskEl.css({width:s,height:l})},renderResizeMask:function(){var e=this,t=e.el,n=2,i=Fancy.get(document.createElement("div")),a=parseInt(t.css("top")),r=parseInt(t.css("left")),o=parseInt(t.css("width"))-2*n,s=parseInt(t.css("height"))-2*n,l=parseInt(t.css("z-index"));if(e.startResizeWidth=o,e.startResizeHeight=s,!e.window&&"absolute"!==t.css("position")){var c=t.offset();a=c.top,r=c.left}i.addCls(e.resizeMaskCls),i.css({left:r,top:a,width:o,height:s,"z-index":l}),e.resizeMaskEl=Fancy.get(document.body.appendChild(i.dom))}}),function(){var e=Fancy,t=e.HIDDEN_CLS,n=e.MODAL_CLS,i=e.PANEL_CLS,a=e.PANEL_HEADER_CLS,r=e.PANEL_SUB_HEADER_TEXT_CLS,o=e.PANEL_HEADER_TEXT_CLS,s=e.PANEL_HEADER_TOOLS_CLS,l=e.PANEL_SUB_HEADER_CLS,c=e.PANEL_BODY_CLS,d=e.PANEL_BODY_INNER_CLS,u=e.PANEL_TBAR_CLS,h=e.PANEL_SUB_TBAR_CLS,f=e.PANEL_BUTTONS_CLS,p=e.PANEL_BBAR_CLS,g=e.PANEL_HEADER_IMG_CLS,y=e.PANEL_NOFRAME_CLS,m=e.PANEL_SHADOW_CLS,v=e.PANEL_FOOTER_CLS,C=e.FIELD_PICKER_BUTTON_CLS;e.define("Fancy.Panel",{extend:e.Widget,barScrollEnabled:!0,tabScrollStep:80,mixins:["Fancy.panel.mixin.DD","Fancy.panel.mixin.Resize"],constructor:function(t){e.apply(this,t),this.Super("constructor",arguments)},init:function(){var e=this;e.Super("init",arguments),e.addEvents("resize"),e.initTpl(),e.render(),e.draggable&&e.initDD(),e.resizable&&e.initResize(),e.window&&e.setActiveWindowWatcher()},cls:"",fieldCls:i,value:"",width:300,height:200,titleHeight:30,subTitleHeight:30,barHeight:37,title:void 0,frame:!0,shadow:!0,draggable:!1,minWidth:200,minHeight:200,barContainer:!0,theme:"default",tpl:['<div style="height:{titleHeight}px;" class="'+a+" "+t+'">',"{titleImg}",'<div class="'+o+'">{title}</div>','<div class="'+s+'"></div>',"</div>",'<div style="height:{subTitleHeight}px;" class="'+l+" "+t+'">','<div class="'+r+'">{subTitle}</div>',"</div>",'<div class="'+c+'">','<div class="'+u+" "+t+'" style="height:{tbarHeight}px;"></div>','<div class="'+h+" "+t+'" style="height:{subTBarHeight}px;"></div>','<div class="'+d+'"></div>','<div class="'+p+" "+t+'" style="height:{bbarHeight}px;"></div>','<div class="'+f+" "+t+'" style="height:{buttonsHeight}px;"></div>','<div class="'+v+" "+t+'" style="height:{barHeight}px;"></div>',"</div>"],render:function(){var i=this,r=e.get(i.renderTo||document.body),o=e.get(document.createElement("div")),s=i.titleHeight,d=i.subTitleHeight;i.renderOuter&&(o=r),r.dom||e.error("Could not find renderTo element: "+i.renderTo,1),!0===i.window&&o.css({display:"none",position:"absolute"}),!1===i.frame&&o.addCls(y),o.addCls(e.cls,i.cls,i.fieldCls),"default"!==i.theme&&o.addCls(Fancy.getThemeCSSCls(i.theme)),i.shadow&&o.addCls(m),o.css({width:i.width+"px",height:i.height-0+"px"}),i.style&&o.css(i.style);var C="",b="";e.isObject(i.title)?C=i.title.text:e.isString(i.title)&&(C=i.title),e.isObject(i.subTitle)?b=i.subTitle.text:e.isString(i.subTitle)&&(b=i.subTitle);var _="";e.isObject(i.title)&&i.title.imgCls&&(_='<div class="'+g+" "+i.title.imgCls+'"></div>'),o.update(i.tpl.getHTML({titleImg:_,barHeight:i.barHeight,subTBarHeight:i.subTBarHeight||i.barHeight,tbarHeight:i.tbarHeight||i.barHeight,bbarHeight:i.bbarHeight||i.barHeight,buttonsHeight:i.buttonsHeight||i.barHeight,titleHeight:s,subTitleHeight:d,title:C,subTitle:b})),e.isObject(i.title)&&(i.title.style&&o.select("."+a).css(i.title.style),i.title.cls&&o.select("."+a).addCls(i.title.cls),i.title.tools&&(i.tools=i.title.tools)),e.isObject(i.subTitle)&&(i.subTitle.style&&o.select("."+l).css(i.subTitle.style),i.subTitle.cls&&o.select("."+l).addCls(i.subTitle.cls)),i.title?o.select("."+a).removeCls(t):o.select("."+c).css("border-top-width","0px"),i.subTitle&&(o.select("."+c).css("border-top-width","0px"),o.select("."+l).removeCls(t)),i.tbar&&o.select("."+u).removeCls(t),i.subTBar&&o.select("."+h).removeCls(t),i.bbar&&o.select("."+p).removeCls(t),i.buttons&&o.select("."+f).removeCls(t),i.footer&&o.select("."+v).removeCls(t),i.renderOuter?i.el=o:(i.el=r.dom.appendChild(o.dom),i.el=e.get(i.el)),i.modal&&0===e.select(n).length&&e.get(document.body).append('<div class="'+n+'" style="display: none;"></div>'),i.id&&!i.el.attr("id")&&i.el.attr("id",i.id),i.renderTools(),i.renderBars(),i.setHardBordersWidth()},setHardBordersWidth:function(){var e=this.panelBodyBorders;this.el.select("."+c).css({"border-top-width":e[0],"border-right-width":e[1],"border-bottom-width":e[2],"border-left-width":e[3]})},renderTools:function(){var t=this,n=t.tools;void 0!==n&&e.each(n,(function(n,i){n.renderTo=t.el.select("."+s).dom,t.tools[i]=new e.Tool(n,t.scope||t)}))},renderBars:function(){var t=this,n=!1,i=t.theme,a=this;t.items&&t.items[0]&&("grid"===t.items[0].type&&(n=!0),a=t.items[0]),t.bbar&&(t._bbar=new e.Bar({el:t.el.select("."+p),items:t.bbar,height:t.bbarHeight||t.barHeight,barContainer:t.barContainer,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.bbarHidden,scope:a,theme:i,i18n:this.i18n}),t.bbar=t._bbar.items),t.buttons&&(t._buttons=new e.Bar({el:t.el.select("."+f),items:t.buttons,height:t.buttonsHeight||t.barHeight,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.buttonsHidden,scope:a,theme:i}),t.buttons=t._buttons.items),t.tbar&&(t._tbar=new e.Bar({el:t.el.select("."+u),items:t.tbar,height:t.tbarHeight||t.barHeight,tabEdit:!t.subTBar&&n,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.tbarHidden,scope:a,theme:i}),t.tbar=t._tbar.items),t.subTBar&&(t._subTBar=new e.Bar({el:t.el.select("."+h),items:t.subTBar,height:t.subTBarHeight||t.barHeight,tabEdit:n,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,hidden:!0===t.subTBarHidden,scope:a,theme:i}),t.subTBar=t._subTBar.items),t.footer&&(t._footer=new e.Bar({disableScroll:!0,el:t.el.select("."+v),items:t.footer,height:t.barHeight,barScrollEnabled:t.barScrollEnabled,tabScrollStep:t.tabScrollStep,scope:a,theme:i,isFooter:!0}),t.footer=t._footer.items)},showAt:function(t,n){this.css({left:t+"px",display:"","z-index":1e3+e.zIndex++}),void 0!==n&&this.css({top:n+"px"})},show:function(){var t=this;if(t.el.show(),!0===t.window){t.buttons&&t._buttons.checkScroll(),t.tbar&&t._tbar.checkScroll(),t.bbar&&t._bbar.checkScroll(),t.subTBar&&t._subTBar.checkScroll();var i=e.getViewSize(),a=t.el.height(),r=t.el.width(),o=[],s=e.getScroll(),l=s[0],c=s[1];o[0]=(i[1]-r)/2,o[1]=(i[0]-a)/2,o[0]<10&&(o[0]=10),o[1]<10&&(o[1]=10),t.css({left:o[0]+c+"px",top:o[1]+l+"px",display:"","z-index":1e3+e.zIndex++}),t.modal&&e.select("."+n).css({display:"","z-index":1e3+e.zIndex-2})}},hide:function(){var t=this;t.css({display:"none"}),t.modal&&e.select("."+n).css("display","none"),e.each(this.items||[],(function(e){"combo"===e.type&&e.hideList()}))},setTitle:function(e){this.el.select("."+o).update(e)},getTitle:function(){return this.el.select("."+o).dom.innerHTML},setSubTitle:function(e){this.el.select("."+r).update(e)},getSubTitle:function(){return this.el.select("."+r).dom.innerHTML},getHeight:function(){return parseInt(this.css("height"))},setWidth:function(e){this.items[0].setWidth(e)},setHeight:function(e){this.css("height",e),this.items[0].setHeight(e,!1)},setActiveWindowWatcher:function(){var t=this;t.el.on("mousedown",(function(n){e.get(n.target).hasCls(C)||(1e3+e.zIndex-1>parseInt(t.css("z-index"))&&t.css("z-index",1e3+e.zIndex++),e.get(document.body).select(".fancy-active-panel").removeCls("fancy-active-panel"),t.el.addCls("fancy-active-panel"))}))}})}(),function(){var e=Fancy,t=e.BUTTON_CLS;e.define("Fancy.Tool",{extend:e.Widget,constructor:function(e,t){this.scope=t,this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","mousedown","mouseup","mouseover","mouseout"),e.Super("init",arguments),e.style=e.style||{},e.render(),e.ons()},ons:function(){this.el.on("click",this.onClick,this)},cls:t,text:"",height:28,paddingTextWidth:5,render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=document.createElement("div");t.fire("beforerender"),i.className="fancy-tool-button",i.innerHTML=t.text,t.el=e.get(n.appendChild(i)),t.fire("afterrender"),t.fire("render")},onClick:function(){var e=this;e.fire("click"),e.handler&&(e.scope?e.handler.apply(e.scope,[e]):e.handler(e))},setText:function(e){this.el.update(e)}})}(),function(){var e=Fancy,t=e.PANEL_BODY_INNER_CLS,n=e.PANEL_GRID_INSIDE_CLS,i=e.TAB_WRAPPER_CLS,a=e.TAB_ACTIVE_WRAPPER_CLS,r=e.TAB_TBAR_ACTIVE_CLS,o=e.PANEL_TAB_CLS,s=e.PANEL_CLS,l=e.GRID_CLS;e.define(["Fancy.panel.Tab","Fancy.Tab","FancyTab"],{extend:e.Panel,constructor:function(e,t){var n=this,i=function(){Fancy.isDom(e)?(t=t||{},t.renderTo=e):t=e,t=t||{},t.renderOuter&&(t.renderTo=t.renderOuter),Fancy.loadStyle(),n.prepareConfigTheme(t),n.prepareConfigSize(t),Fancy.applyConfig(n,t),n.Super("const",arguments)};Fancy.fullBuilt||!1===Fancy.MODULELOAD||!Fancy.nojQuery||Fancy.modules.dom||Fancy.modules.grid?i():Fancy.loadModule("dom",(function(){Fancy.loadModule("grid",(function(){i()}))}))},init:function(){var e=this;e.prepareTabs(),e.Super("init",arguments),e.setActiveTab(e.activeTab),e.ons()},activeTab:0,theme:"default",render:function(){var e=this;e.Super("render",arguments),Fancy.loadingStyle&&(e.el.css("opacity",0),e.intervalStyleLoad=setInterval((function(){Fancy.loadingStyle||(clearInterval(e.intervalStyleLoad),e.el.animate({opacity:1,force:!0}))}),100)),e.panelBodyEl=e.el.select("."+t).item(0),e.setPanelBodySize(),e.renderTabWrappers(),e.wrapped||e.el.addCls(n),e.el.addCls(o),e.rendered=!0},ons:function(){var t=this;t.responsive&&e.$(window).bind("resize",(function(){t.onWindowResize(),clearInterval(t.intWindowResize),t.intWindowResize=setTimeout((function(){t.onWindowResize(),delete t.intWindowResize,setTimeout((function(){t.onWindowResize()}),300)}),30)}))},onWindowResize:function(){var t,n=this,a=n.renderTo;n.panel&&(a=n.panel.renderTo),t=n.responsive?e.get(a):n.panel?n.panel.el:e.get(a),(t.hasClass(s)||t.hasClass(l))&&(t=t.parent());var r=t.width();if(void 0!==t.dom){if(0===r&&(r=t.parent().width()),n.responsive&&n.setWidth(r),n.responsiveHeight){var o=parseInt(t.height());0===o&&(o=parseInt(t.parent().height())),n.setHeight(o)}n.setPanelBodySize(),n.el.select("."+i+" ."+s+":first-child").each((function(e){e.css({height:"auto",width:"auto"})}))}},setPanelBodySize:function(){var e=this,t=e.height,n=e.panelBodyBorders;e.title&&(t-=e.titleHeight),e.subTitle&&(t-=e.subTitleHeight,t+=n[2]),e.bbar&&(t-=e.bbarHeight||e.barHeight),e.tbar&&(t-=e.tbarHeight||e.barHeight),e.subTBar&&(t-=e.subTBarHeight||e.barHeight),e.buttons&&(t-=e.buttonsHeight||e.barHeight),e.footer&&(t-=e.barHeight),t-=n[0]+n[2],e.panelBodyEl.css({height:t}),e.panelBodyHeight=t,e.panelBodyWidth=e.width-n[1]-n[3]},prepareConfigTheme:function(t){var n=this,i=t.theme||n.theme,a=e.getTheme(i).config;(n.wrapped||t.wrapped)&&(t.panelBodyBorders=[0,0,0,0],n.panelBodyBorders=[0,0,0,0]),e.applyIf(t,a),e.apply(n,t)},prepareConfigSize:function(e){var t,n=e.renderTo;if(void 0===e.width&&n&&(e.responsive=!0,t=Fancy.get(n),e.width=parseInt(t.width())),void 0===e.height&&n){e.responsiveHeight=!0,t=Fancy.get(n);var i=parseInt(t.height());i<50&&(i=parseInt(t.parent().css("height"))),e.height=i}},prepareTabs:function(){for(var e=this,t=[],n=0,i=e.items.length;n<i;n++){var a=e.items[n],r={type:"tab"};a.tabTitle?r.text=a.tabTitle:a.title&&(r.text=a.title,delete a.title),r.handler=function(t){return function(){e.setActiveTab(t)}}(n),t.push(r)}e.tbar=t,e.tabs=t},renderTabWrappers:function(){var t=this;e.each(t.items,(function(n){var a=e.get(document.createElement("div"));a.addCls(i),n.renderTo=t.panelBodyEl.dom.appendChild(a.dom)}))},setActiveTab:function(e){var t=this,n=t.el.select("."+i),o=t.activeTab;if(0!==t.items.length){n.item(t.activeTab).removeCls(a),t.activeTab=e,n.item(t.activeTab).addCls(a);var s=t.items[t.activeTab];if(s.theme=t.theme,s.wrapped=!0,s.width=t.panelBodyWidth,s.height=t.panelBodyHeight,s.rendered)t.setActiveItemWidth(),t.setActiveItemHeight();else switch(s.type){case"form":t.items[t.activeTab]=new FancyForm(s);break;case"grid":t.items[t.activeTab]=new FancyGrid(s);break;case"tab":t.items[t.activeTab]=new FancyTab(s)}t.tabs&&(t.tbar[o].removeCls(r),t.tbar[t.activeTab].addCls(r))}},setWidth:function(e){var t=this;t.width=e,t.css("width",e),t.setPanelBodySize(),t.setActiveItemWidth()},setHeight:function(e){var t=this;t.height=e,t.css("height",e),t.setPanelBodySize(),t.setActiveItemHeight()},setActiveItemWidth:function(){var e=this;0!==e.items.length&&e.items[e.activeTab].setWidth(e.panelBodyWidth)},setActiveItemHeight:function(){var e=this;0!==e.items.length&&e.items[e.activeTab].setHeight(e.panelBodyHeight,!1)}}),FancyTab.get=function(t){var n=e.get(t).select("."+o).dom.id;return e.getWidget(n)},!e.nojQuery&&e.$&&(e.$.fn.FancyTab=function(t){return this.selector?t.renderTo=e.$(this.selector)[0].id:t.renderTo=this.attr("id"),new FancyTab(t)})}(),function(){var e=Fancy,t=e.GRID_CLS,n=e.GRID_CELL_CLS,i=e.BAR_CLS,a=e.BAR_CONTAINER_CLS,r=e.BAR_BUTTON_CLS,o=e.BAR_SEG_BUTTON_CLS,s=e.BAR_LEFT_SCROLLER_CLS,l=e.BAR_RIGHT_SCROLLER_CLS,c=e.FIELD_LABEL_CLS,d=e.FIELD_TEXT_CLS,u=e.FIELD_TEXT_INPUT_CLS,h=e.FIELD_SEARCH_CLS,f=e.FIELD_SEARCH_LIST_CLS,p=e.FIELD_SEARCH_PARAMS_LINK_CLS,g=e.FIELD_SEARCH_PARAMED_CLS,y=e.FIELD_SEARCH_PARAMED_EMPTY_CLS,m=e.PICKER_MONTH_ACTION_BUTTONS_CLS,v=e.CLEARFIX_CLS;e.define("Fancy.Bar",{extend:e.Widget,widgetCls:i,containerCls:a,cls:"",text:"",floating:"left",sideRight:3,scrolled:0,tabOffSet:5,tabScrollStep:80,barScrollEnabled:!0,constructor:function(t){e.apply(this,t),this.init()},init:function(){var e=this;e.roles={},e.render(),e.barScrollEnabled&&(e.initScroll(),setTimeout((function(){e.checkScroll()}),150))},render:function(){var e=this;e.renderEl(),e.renderItems(),e.initTabEdit()},renderEl:function(){var t=this;if(!t.el){var n=e.get(document.createElement("div"));n.addCls(t.widgetCls,t.cls),n.update(t.text),t.el=e.get(t.renderTo.appendChild(n.dom)),t.style&&t.el.css(t.style)}t.hidden&&t.el.css("display","none");var i=e.get(document.createElement("div"));i.addCls(t.containerCls),t.containerEl=e.get(t.el.dom.appendChild(i.dom))},renderItems:function(){for(var t=this,n=t.containerEl,i=t.items||[],a=0,r=i.length,o=!1,s=[],l=r-1,c=0;a<r;a++){var d=i[a];switch(o&&(d=i[l],l--),d.toggleGroup&&(d.enableToggle=!0),e.isObject(d)&&(d.type=d.type||"button"),o&&(t.floating="right",d.style=d.style||{},d.style.right=c),e.isObject(d)&&(d.renderTo=n.dom),d){case"|":var u={float:t.floating,"margin-right":"5px","margin-top":"6px","padding-left":"0px"};"right"===t.floating&&e.applyIf(u,{right:"1px",position:"absolute"}),s.push(new e.Separator({renderTo:n.dom,style:u}));continue;case"side":case"->":t.isFooter||(o=!0);continue;default:o?s[l]=t.renderItem(d):s.push(t.renderItem(d))}o&&(d.text?c+=7*d.text.length+5+5+5:d.width&&(c+=d.width+5),d.imageCls&&(d.imageWidth?c+=d.imageWidth:c+=20),c+=3)}t.items=s},renderItem:function(n){var i,a=this,s=a.containerEl,l=a.theme;switch(n.style=n.style||{},n.label=!1,n.padding=!1,n.theme=a.theme,e.applyIf(n.style,{float:a.floating}),"right"===a.floating&&e.applyIf(n.style,{right:a.sideRight,position:"absolute"}),!n.scope&&a.scope&&(n.scope=a.scope),n.type){case"wrapper":n.cls===m&&(s.destroy(),s=a.el);for(var C,b=s.append('<div class="'+(n.cls||"")+'"></div>').select("div").item(0),_=0,F=n.items.length,L=0;_<F;_++){C=n.items[_],e.isObject(C)&&(C.type=C.type||"button"),C.renderTo=b.dom,i=a.renderItem(C);var S=i.el;_===F-1?S.css("margin-right","0px"):L+=parseInt(S.css("margin-right")),e.nojQuery?L+=parseInt(S.width()):L+=parseInt(S.$dom.outerWidth()),L+=parseInt(S.css("margin-left"))}b.css("width",L);break;case void 0:case"button":n.extraCls=r,n.scope=n.scope||a.scope,i=new e.Button(n);break;case"segbutton":n.extraCls=o,e.applyIf(n.style,{"margin-right":"6px"}),i=new e.SegButton(n);break;case"tab":i=new e.toolbar.Tab(n);break;case"text":a.isFooter||e.applyIf(n.style,{"margin-right":"10px","padding-left":"0px","padding-top":"11px"}),e.apply(n,{renderTo:s.dom,cls:n.cls||""}),i=new e.bar.Text(n);break;case"combo":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:70}),i=new e.Combo(n);break;case"date":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.DateField(n);break;case"number":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.NumberField(n);break;case"checkbox":e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),i=new e.CheckBox(n);break;case"switcher":e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:35}),i=new e.Switcher(n);break;case"string":n.inputWidth=18,e.applyIf(n.style,{"padding-left":"0px","margin-right":"8px","margin-top":"4px"}),e.applyIf(n,{width:100}),i=new e.StringField(n);break;case"search":n.inputWidth=18,n.events=n.events||[],n.events=n.events.concat([{enter:function(n,i){var a=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).item(0).attr("id"));a.search(i),a.expander&&a.expander.reSet()}},{key:function(n,i){var a=this,r=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).item(0).attr("id"));r.filter&&!1===r.filter.autoEnterDelay||(a.autoEnterTime||(a.autoEnterTime=new Date),clearInterval(a.intervalAutoEnter),delete a.intervalAutoEnter,a.intervalAutoEnter=setInterval((function(){new Date-a.autoEnterTime>500&&(clearInterval(a.intervalAutoEnter),delete a.intervalAutoEnter,i=n.getValue(),r.search(i),r.expander&&r.expander.reSet())}),200))}},{render:function(n){var i=this,a=!1;n.el.on("mouseenter",(function(){a=!0}),null,"."+p),n.el.on("mousedown",(function(e){e.preventDefault()}),null,"."+p),n.el.on("click",(function(r){var o=!1,s=e.getWidget(n.el.parent().parent().parent().parent().select("."+t).attr("id")),c=s.columns||[],d=s.leftColumns||[],u=s.rightColumns||[],h=c.concat(d).concat(u),p=[],g=0,y=h.length,m=1;if(s.searching.items)e.each(s.searching.items,(function(e){p.push({inputLabel:" &nbsp;&nbsp;"+e.text,value:!0,name:e.index}),m+=s.fieldHeight}));else for(;g<y;g++){var v=h[g],C=v.title;if(void 0===C&&(C=""),!1!==v.searchable){switch(v.type){case"color":case"combo":case"date":case"number":case"string":case"text":case"currency":break;default:continue}m+=s.fieldHeight,p.push({inputLabel:" &nbsp;&nbsp;"+C,value:!0,name:v.index})}}if(i.list){if("none"!==i.list.el.css("display"))return void i.list.el.css("display","none");o=!0}else{var b=0;e.each(p,(function(e){e.inputLabel.replace(/\&nbsp\;/g,"").length>b&&(b=e.inputLabel.length)}));var _=150;b>15&&(_=9*b),i.list=new FancyForm({width:_,height:m,theme:l,defaults:{type:"checkbox",label:!1,style:{padding:"8px 16px 0px"}},items:p,cls:f,events:[{set:function(){s.searching.setKeys(i.list.get())}},{init:function(){setTimeout((function(){var t=i.list.el;t.on("mouseenter",(function(){a=!0})),t.on("mouseleave",(function(){a=!1,setTimeout((function(){!1===a&&i.list&&t.css("display","none")}),750)}));var o=e.get(r.target),s=o.offset(),l=parseInt(n.el.css("height"));t.css({position:"absolute",top:s.top+l+20,left:s.left}),i.list.el.css("display","block"),t.animate({duration:200,top:s.top+l-1})}),50)}}]})}var F=e.get(r.target),L=F.offset(),S=parseInt(n.el.css("height"));i.list&&i.list.el&&(i.list.css({position:"absolute",top:L.top+S+20,left:L.left}),o&&i.list.css("display","block"),i.list.el.animate({duration:200,top:L.top+S-1}))}),null,"."+p),n.el.on("mouseleave",(function(){a=!1,setTimeout((function(){!1===a&&i.list&&i.list.el.css("display","none")}),750)}),null,"."+p)}}]),e.applyIf(n.style,{float:a.floating,"padding-left":"0px","margin-right":"8px","margin-top":"4px"});var E=h;n.paramsMenu&&(n.tpl=['<div class="'+c+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+d+'">','<input placeholder="{emptyText}" class="'+u+'" style="{inputWidth}" value="{value}">','<div class="'+p+'" style="">'+(n.paramsText||"&nbsp;")+"</div>","</div>",'<div class="'+v+'"></div>'],E+=" "+g,n.paramsText||(E+=" "+y)),e.applyIf(n,{padding:!1,width:250,cls:E,emptyText:"Search"}),i=new e.StringField(n)}return"right"===a.floating&&(a.sideRight+=i.width,a.sideRight+=7),n.role&&(a.roles[n.role]=i),i},initScroll:function(){var t=this;t.leftScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:s,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,style:{position:"absolute",left:-1,top:-1,display:"none"},listeners:[{click:t.onPrevScrollClick,scope:t}]}),t.rightScroller=new e.Button({imageCls:!0,renderTo:t.el.dom,cls:l,height:t.height+2,minWidth:20,paddingTextWidth:0,imageWidth:20,width:0,text:!1,style:{position:"absolute",right:-1,top:-1,display:"none"},listeners:[{click:t.onNextScrollClick,scope:t}]})},getBarWidth:function(){return parseInt(this.el.css("width"))},getItemsWidth:function(){var t=0;return e.each(this.items,(function(n){"none"!==n.el.css("display")&&(t+=n.el.width(),t+=parseInt(n.el.css("margin-left")),t+=parseInt(n.el.css("margin-right")),e.nojQuery||(t+=parseInt(n.el.css("padding-right")),t+=parseInt(n.el.css("padding-left")),t+=parseInt(n.el.css("border-left-width")),t+=parseInt(n.el.css("border-right-width"))))})),t},onPrevScrollClick:function(){var e=this;e.scrolled+=e.tabScrollStep,e.scrolled>-20&&(e.scrolled=0),e.applyScrollChanges()},onNextScrollClick:function(){var e=this;e.scrolled-=e.tabScrollStep,e.applyScrollChanges()},applyScrollChanges:function(){var e=this,t=e.getItemsWidth()+e.tabOffSet,n=e.getBarWidth()-parseInt(e.leftScroller.el.css("width"))-parseInt(e.rightScroller.el.css("width"))-2*e.tabOffSet,i=t-n;if(0===e.scrolled?e.leftScroller.disable():e.scrolled<0&&e.leftScroller.enable(),t>n&&0===e.scrolled&&e.rightScroller.enable(),n+Math.abs(e.scrolled)<t&&e.rightScroller.enable(),t<n)return e.scrolled=0,e.leftScroller.el.hide(),e.rightScroller.el.hide(),void e.containerEl.css({"margin-left":"0px"});e.scrolled>0?(e.scrolled=0,e.leftScroller.disable(),e.rightScroller.enable()):e.scrolled<-i&&(e.scrolled=-i,e.leftScroller.enable(),e.rightScroller.disable()),e.leftScroller.el.show(),e.rightScroller.el.show(),e.containerEl.css({"margin-left":e.scrolled+20+"px"})},onDocMouseUp:function(){var e=this;e.scrollInterval&&(clearTimeout(e.scrollInterval),delete e.scrollInterval)},checkScroll:function(){var e=this,t=e.getItemsWidth(),n=e.getBarWidth();e.disableScroll||(e.isParentHidden()?e.checkVisInt=setInterval((function(){e.isParentHidden()||(e.checkScroll(),clearInterval(e.checkVisInt),delete e.checkVisInt)}),300):(clearInterval(e.checkVisInt),delete e.checkVisInt),t>n?e.enableScroll():e.barScrollEnabled&&(e.leftScroller.el.hide(),e.rightScroller.el.hide()))},enableScroll:function(){var e=this;e.barScrollEnabled&&(e.leftScroller.el.show(),e.rightScroller.el.show(),0===e.scrolled&&(e.leftScroller.disable(),e.containerEl.css("margin-left","20px")))},initTabEdit:function(){var e=this;if(e.tabEdit)for(var t=e.items.length-1;t>-1;t--){var n=e.items[t];switch(n.type){case"number":case"string":case"date":return void n.on("tab",e.onTabLastInput,e)}}},onTabLastInput:function(i,a){var r=this,o=e.getWidget(r.el.parent().select("."+t).attr("id"));a.preventDefault(),o.leftColumns.length?setTimeout((function(){o.leftBody.el.select("."+n).item(0).dom.click()}),100):setTimeout((function(){o.body.el.select("."+n).item(0).dom.click()}),100)},isParentHidden:function(n,i){var a=this,r=e.getWidget(a.el.parent().select("."+t).attr("id"));i=i||1;return!!r&&(n||(n=r.el),"none"===n.css("display")||!(i>5||"body"===n.dom.tagName.toLocaleLowerCase())&&(i++,n=n.parent(),a.isParentHidden(n,i)))}})}(),Fancy.define("Fancy.Separator",{cls:Fancy.SEPARATOR_CLS,constructor:function(e){Fancy.apply(this,e),this.init()},init:function(){this.render()},render:function(){var e=this,t=Fancy.get(document.createElement("div"));t.addCls(e.cls),t.update("<div></div>"),e.el=Fancy.get(e.renderTo.appendChild(t.dom)),e.style&&e.el.css(e.style)}}),Fancy.define("Fancy.bar.Text",{extend:Fancy.Widget,widgetCls:Fancy.BAR_TEXT_CLS,cls:"",text:"",tipTpl:"{value}",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.render(),e.ons()},render:function(){var e=this,t=Fancy.get(document.createElement("div"));t.addCls(e.widgetCls,e.cls),t.update(e.text),e.el=Fancy.get(e.renderTo.appendChild(t.dom)),e.style&&e.el.css(e.style),e.hidden&&e.el.css("display","none"),e.id&&e.el.attr("id",e.id),e.width&&e.el.css("width",e.width)},get:function(){return this.el.dom.innerHTML},getValue:function(){return this.get()},set:function(e){this.el.dom.innerHTML=e},ons:function(){var e=this,t=e.el;t.on("mouseover",e.onMouseOver,e),t.on("mouseout",e.onMouseOut,e),e.tip&&e.el.on("mousemove",e.onMouseMove,e)},onMouseMove:function(e){var t=this;t.tip&&t.tooltip&&t.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOver:function(e){var t=this;t.fire("mouseover"),t.tip&&t.renderTip(e)},renderTip:function(e){var t=this,n="";if(t.tooltip&&t.tooltip.destroy(),!0===t.tip)t.tip=new Fancy.Template(t.tipTpl).getHTML({value:t.get()});else switch(Fancy.typeOf(t.tip)){case"function":n=t.tip(this,t.get,t.label||"");break;case"string":n=t.tpl.getHTML({value:t.get()})}t.tooltip?t.tooltip.update(n):t.tooltip=new Fancy.ToolTip({text:n}),t.tooltip.css("display","block"),t.tooltip.show(e.pageX+15,e.pageY-25)},onMouseOut:function(){var e=this;e.fire("mouseout"),e.tooltip&&(e.tooltip.destroy(),delete e.tooltip)}}),Fancy.define(["Fancy.Form","FancyForm"],{extend:Fancy.Widget,mixins:["Fancy.form.mixin.Form",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.form.mixin.PrepareConfig"],type:"form",theme:"default",i18n:"en",maxLabelNumber:11,minWidth:200,minHeight:200,barScrollEnabled:!0,scrollable:!1,constructor:function(e,t){var n=this;Fancy.isDom(e)?(t=t||{},t.renderTo=e):t=e,t=t||{};var i=function(e){e&&Fancy.apply(t,e),t=n.prepareConfig(t,n),Fancy.applyConfig(n,t),n.Super("const",arguments)},a=function(){var e=t.i18n||n.i18n;!0===Fancy.loadLang(e,i)&&i({})};Fancy.loadStyle(),Fancy.modules.form||Fancy.fullBuilt||!1===Fancy.MODULELOAD||!1===Fancy.MODULESLOAD||!0===n.fullBuilt||!0===n.neededModules?a():Fancy.modules.grid?Fancy.loadModule("form",(function(){a()})):n.loadModules(a,t)},loadModules:function(e,t){var n=this,i={form:!0};Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(i.dom=!0),Fancy.isTouch&&(i.touch=!0),t.url&&(i.ajax=!0);var a=function(e){if(e.menu)return i.menu=!0,!0};Fancy.each(t.tbar,a),Fancy.each(t.bbar,a),Fancy.each(t.buttons,a),Fancy.each(t.subTBar,a);var r=function(e){for(var t,n=0,a=e.length;n<a;n++)t=e[n],"combo"===t.type&&t.data&&t.data.proxy&&(i.ajax=!0),"date"===t.type&&(i.grid=!0,i.date=!0,i.selection=!0),t.items&&r(t.items)};for(var o in r(t.items||[]),n.neededModules={length:0},i)void 0===Fancy.modules[o]&&(n.neededModules[o]=!0,n.neededModules.length++);if(0===n.neededModules.length)return n.neededModules=!0,void e();var s=function(t){delete n.neededModules[t],0===--n.neededModules.length&&(n.neededModules=!0,e())};if(n.neededModules.dom)Fancy.loadModule("dom",(function(){for(var e in delete n.neededModules.dom,n.neededModules.length--,n.neededModules)"length"!==e&&Fancy.loadModule(e,s)}));else for(var o in n.neededModules)"length"!==o&&Fancy.loadModule(o,s)}}),FancyForm.get=function(e){var t=Fancy.get(e);if(t.dom){var n=t.select(".fancy-form").dom.id;return Fancy.getWidget(n)}},FancyForm.defineTheme=Fancy.defineTheme,FancyForm.defineController=Fancy.defineController,FancyForm.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyForm=function(e){return this.selector?e.renderTo=Fancy.$(this.selector)[0].id:e.renderTo=this.attr("id"),new Fancy.Form(e)}),function(){var e=Fancy,t=e.FIELD_NOT_VALID_CLS,n=e.FIELD_LABEL_ALIGN_TOP_CLS,i=e.FIELD_TEXT_CLS,a=e.FIELD_LABEL_CLS,r=e.FIELD_TEXTAREA_TEXT_CLS,o=e.FIELD_LABEL_ALIGN_RIGHT_CLS,s=e.FIELD_DISABLED_CLS;e.ns("Fancy.form.field"),e.form.field.Mixin=function(){},e.form.field.Mixin.prototype={padding:"8px 8px 0px 8px",inputHeight:29,labelHeight:18,failedValidCls:t,cls:"",checkValidOnTyping:!1,editable:!0,ons:function(){var e=this,t=e.el,n=e.el.getByTag("input");if(e.input=n,n.on("blur",e.onBlur,e),n.on("focus",e.onFocus,e),n.on("input",e.onInput,e),n.on("keydown",e.onKeyDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.on("key",e.onKey,e),e.tip&&t.on("mousemove",e.onMouseMove,e),e.format&&e.format.inputFn){switch(e.value){case"":case void 0:break;default:e.formatValue(e.value)}e.on("key",e.onKeyInputFn)}e.stopPropagation&&t.on("mousedown",(function(e){e.stopPropagation()})),t.on("mousedown",(function(t){e.disabled&&(t.preventDefault(),t.stopPropagation())}))},onKeyInputFn:function(t,n,i){var a=this,r=i.keyCode,o=e.key;if(!a.disabled){switch(r){case o.ENTER:case o.ESC:case o.LEFT:case o.RIGHT:case o.TAB:return}this.formatValue(n)}},formatValue:function(e){var t=this;e=this.format.inputFn(e);var n=this.input.dom.selectionStart,i=this.input.dom.value;this.input.dom.value=e,i.length<e.length&&n++,t.setCaretPosition(n)},setCaretPosition:function(e){var t=this.input.dom;if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else t.selectionStart?(t.focus(),t.setSelectionRange(e,e)):t.focus()},onMouseOver:function(e){var t=this;t.disabled||(t.fire("mouseover"),t.tip&&t.renderTip(e))},onMouseOut:function(){var t=this;t.disabled||(t.fire("mouseout"),t.tip&&e.tip.hide())},render:function(){var t=this,l=t.renderTo||document.body,c=t.renderAfter,d=t.renderBefore,u=e.get(document.createElement("div"));e.isString(l)&&((l=document.getElementById(l))||(l=e.select(l).item(0))),t.fire("beforerender"),u.addCls(e.cls,t.cls,t.fieldCls),u.attr("id",t.id);var h="",f="";t.itemsHTML&&(f=t.itemsHTML),"top"===t.labelAlign&&t.label&&t.labelWidth<7*t.label.length&&(t.labelWidth=7*(t.label.length+2)),t.labelWidth&&(h="width:"+t.labelWidth+"px;");var p=t.label;""===t.label||void 0===t.label?p="&nbsp;":"right"!==t.labelAlign&&(p+=":");var g="",y="",m="";if(!1===t.label&&(g="display:none;"),t.inputLabel?m=t.inputLabel:y="display:none;","recaptcha"===t.type)u.update(t.tpl.getHTML({key:t.key}));else{var v={labelWidth:h,label:p,labelDisplay:g,inputLabelDisplay:y,inputLabel:m,emptyText:t.emptyText,value:t.value,height:t.height,itemsHTML:f,errorTextStyle:"",buttonText:t.buttonText};"set"===t.type&&delete v.height,u.update(t.tpl.getHTML(v))}if(t.el=u,t.setStyle(),!0===t.renderId&&u.attr("id",t.id),c?(c=e.get(c),u=c.after(u.dom.outerHTML).next()):d?u=d.before(u.dom.outerHTML).prev():l.appendChild(u.dom),t.el=u,"textarea"===t.type?t.input=t.el.getByTag("textarea"):t.input=t.el.getByTag("input"),t.name&&(t.input.name=t.name),t.setSize(),"top"===t.labelAlign)t.el.addCls(n),t.el.select("."+i).css("float","none");else if("right"===t.labelAlign)switch(t.el.addCls(o),t.type){case"radio":e.$(u.dom).find("."+a).insertAfter(e.$(u.dom).find("."+i+":last")),e.$(u.dom).find("."+a).css("float","right");break;case"textarea":e.$(u.dom).find("."+a).insertAfter(e.$(u.dom).find("."+r));break;case"checkbox":e.$(u.dom).find("."+a).css("float","right");break;default:e.$(u.dom).find("."+a).insertAfter(e.$(u.dom).find("."+i))}else t.type;if(t.acceptedValue=t.value,t.fire("afterrender"),t.fire("render"),"recaptcha"!==t.type&&"chat"!==t.type&&setTimeout((function(){t.input&&t.input.dom&&0===t.input.dom.value.length&&void 0===t.prevColor&&(t.prevColor=t.input.css("color"))}),1),t.disabled){switch(t.type){case"hidden":break;default:t.addCls(s)}t.input&&t.input.attr("tabIndex",-1)}else t.input&&t.tabIndex&&t.input.attr("tabIndex",t.tabIndex)},onKeyDown:function(t){var n=this,i=t.keyCode,a=e.key;if(n.fire("beforekey",n.input.dom.value,t),!n.disabled){switch(i){case a.BACKSPACE:case a.DELETE:switch(n.type){case"field.number":case"field.string":case"field.date":setTimeout((function(){""===n.getValue()&&n.fire("empty")}),1)}break;case a.TAB:n.fire("tab",t);break;case a.ESC:n.fire("esc",t);break;case a.ENTER:var r="textarea"===n.type||"field.textarea"===n.type;if(r&&t.shiftKey)break;n.fire("enter",n.getValue()),r||(t.preventDefault(),t.stopPropagation());break;case a.UP:switch(n.type){case"number":case"field.number":this.spin&&n.spinUp()}n.fire("up",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case a.DOWN:switch(n.type){case"number":case"field.number":this.spin&&n.spinDown()}n.fire("down",n.getValue()),"textarea"!==n.type&&(t.preventDefault(),t.stopPropagation());break;case a.LEFT:case a.RIGHT:t.stopPropagation();break;default:setTimeout((function(){n.input&&(0===n.input.dom.value.length?(void 0===n.prevColor&&(n.prevColor=n.input.css("color")),n.input.css("color","grey")):n.prevColor?n.input.css("color",n.prevColor):n.input.css("color"," "))}),1)}setTimeout((function(){n.fire("key",n.input.dom.value,t)}),1)}},onKey:function(e,t){e.disabled||e.isValid()&&!e.checkValidOnTyping||e.validate(t)},onBlur:function(){var e=this;if(e.disabled)return!0;if(e.fire("blur"),e.input){if("combo"!==e.type)return e.validate(e.input.dom.value);setTimeout((function(){e.listItemClicked||e.validate(e.input.dom.value)}),100)}return!0},validate:function(t){var n=this,i=n.vtype;if(void 0===i)return!0;var a=e.isValid(i,t);return!0!==a?(n.errorText=new e.Template(a.text).getHTML(a),n.failedValid(),!1):(n.successValid(),!0)},isValid:function(){return!this.hasCls(this.failedValidCls)},onFocus:function(){var e=this;e.disabled||!1===e.editable?this.input.blur():e.fire("focus")},blur:function(){this.input.blur()},onInput:function(){var e=this,t=e.getValue(),n=e.acceptedValue;e.disabled||(e.acceptedValue=e.get(),e.fire("input",t),e.fire("change",t,n))},get:function(){var t=this;if(t.format)if(e.isString(t.format));else{if(!e.isObject(t.format))return t.value;if(t.format.inputFn&&("number"===t.type||"field.number"===t.type))return isNaN(parseFloat(t.value))?t.value:Number(t.value)}return t.input.dom.value},getValue:function(){return this.get()},set:function(e,t){var n=this;n.value=e,n.format&&n.format.inputFn?n.formatValue(e):n.input.dom.value=e,!1!==t&&n.onInput(),n.validate(e)},setLabel:function(e){this.el.select("."+a).update(e)},setValue:function(e,t){this.set(e,t)},clear:function(){this.set(""),this.clearValid()},failedValid:function(){var t=this;t.hasCls(t.failedValidCls)?t.tooltip&&t.errorText&&e.tip.update(t.errorText):(!t.tooltip&&t.errorText&&(t.showErrorTip(),t.el.on("mousemove",t.onMouseMove,t),t.input.hover((function(n){t.errorText&&(t.showErrorTip(),e.tip.show(n.pageX+15,n.pageY-25))}),(function(){t.hideErrorTip()}))),t.addCls(t.failedValidCls))},clearValid:function(){this.removeCls(this.failedValidCls)},successValid:function(){var e=this;e.removeCls(e.failedValidCls),e.hideErrorTip(),delete e.errorText},showErrorTip:function(){var t=this;e.tip.update(t.errorText)},hideErrorTip:function(){e.tip.hide()},setInputSize:function(e){var t=this;"combo"===t.type&&t.inputContainer.css("width",e.width),e.width&&t.input.css("width",e.width),e.height&&"set"!==t.type&&t.input.css("height",e.height)},focus:function(){var e=this;e.input.focus(),setTimeout((function(){e.input.dom.selectionStart=e.input.dom.selectionEnd=1e4}),0)},hide:function(){var e=this;e.fire("beforehide"),e.css("display","none"),e.fire("hide")},show:function(){this.css("display","block")},setSize:function(e,t){var n=this;if(n.type,void 0===e&&void 0===t)e=n.width,t=n.height;else if(void 0===t){var i=e;e=i.width?i.width:n.width,t=i.height?i.height:n.height}n.size?n.size({width:e,height:t}):(void 0!==e&&n.css("width",e),"top"===n.labelAlign?n.css("height",1.5*t):("set"!==n.type&&n.css("height",t),n.label&&n.el.select("."+a).css("height",n.inputHeight)),n.setInputSize({width:n.inputWidth,height:n.inputHeight}))},setStyle:function(){var t=this,n=t.style||{},i=t.padding;i?(e.isNumber(i)?i+="px":e.isString(i),void 0===n.padding&&(n.padding=i)):n.padding="0px",t.hidden&&t.css("display","none"),t.css(n)},preRender:function(){var t=this;t.tpl&&!1===e.isObject(t.tpl)&&(t.tpl=new e.Template(t.tpl)),t.calcSize()},calcSize:function(){var t,n,i,a,r,o=this,s=o.inputHeight,l=o.padding;if(e.isString(l))switch(l=l.replace(/px/g,""),l=l.split(" "),l.length){case 1:n=Number(l[0]),l=[n,n,n,n];break;case 2:i=Number(l[0]),a=Number(l[1]),l=[i,a,i,a];break;case 3:i=Number(l[0]),a=Number(l[1]),r=Number(l[2]),l=[i,a,r,i];break;case 4:l=[Number(l[0]),Number(l[1]),Number(l[2]),Number(l[3])]}else e.isNumber(l)?l=[l,l,l,l]:!1===l&&(l=[0,0,0,0]);"top"===o.labelAlign&&(o.height*=1.5),t=o.width,"top"!==o.labelAlign&&o.label&&(t-=o.labelWidth),o.height===o.inputHeight&&!1!==o.padding&&(s-=l[0]+l[2]),"radio"!==o.type||o.column||(o.calcColumns(),1!==o.rows&&(s=(s-l[0]-l[2])*o.rows)),o.inputHeight=s,o.inputWidth=t-l[1]-l[3],o.height=s+l[0]+l[2]},setWidth:function(e){var t=this;t.width=e,t.calcSize(),t.css("width",e),t.setInputSize({width:t.inputWidth})},onMouseMove:function(t){var n=this,i=n.widget;if(!n.disabled){if(i){if(i.startResizing&&n.tooltip)return void e.tip.hide();if(i.columndrag&&"dragging"===i.columndrag.status)return void e.tip.hide()}n.tooltip?e.tip.show(t.pageX+15,t.pageY-25):n.tip&&n.renderTip(t)}},renderTip:function(t){var n,i,a=this,r="",o=a.tip;if(a.getValue)switch(a.type){case"button":case"field.button":r="";break;default:r=a.getValue()}switch(Fancy.typeOf(o)){case"function":i=o(this,r,a.label||"");break;case"string":n=new e.Template(o),i=n.getHTML({value:r})}e.tip.update(i),e.tip.show(t.pageX+15,t.pageY-25)},getInputSelection:function(){var e,t,n,i,a,r=this,o=0,s=0,l=r.input.dom;return"number"==typeof l.selectionStart&&"number"==typeof l.selectionEnd?(o=l.selectionStart,s=l.selectionEnd):(t=document.selection.createRange())&&t.parentElement()==l&&(i=l.value.length,e=l.value.replace(/\r\n/g,"\n"),n=l.createTextRange(),n.moveToBookmark(t.getBookmark()),a=l.createTextRange(),a.collapse(!1),n.compareEndPoints("StartToEnd",a)>-1?o=s=i:(o=-n.moveStart("character",-i),o+=e.slice(0,o).split("\n").length-1,n.compareEndPoints("EndToEnd",a)>-1?s=i:(s=-n.moveEnd("character",-i),s+=e.slice(0,s).split("\n").length-1))),{start:o,end:s}},enable:function(){var e=this;e.disabled=!1,e.removeCls(s),e.button&&e.button.enable(),e.input&&e.input.attr("tabIndex",e.tabIndex||0)},disable:function(){var e=this;e.disabled=!0,e.addCls(s),e.button&&e.button.disable(),e.input&&e.input.attr("tabIndex",-1)},getInputValue:function(){return this.input.dom.value},clearInput:function(){var e=this;e.input&&(e.input.dom.value="")}}}(),Fancy.define(["Fancy.form.field.String","Fancy.StringField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.string",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","esc","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.isPassword&&(e.input.attr({type:"password"}),e.showPassTip&&(e.el.select(".fancy-field-text").item(0).append('<div class="fancy-field-pass-tip">abc</div>'),e.passTipEl=e.el.select(".fancy-field-pass-tip").item(0),e.passTipEl.on("mousedown",(function(e){e.preventDefault()})),e.passTipEl.on("click",(function(){"password"!==e.input.attr("type")?(e.passTipEl.update("abc"),e.input.attr("type","password"),e.passTipEl.css("line-height","22px")):(e.passTipEl.update("***"),e.input.attr("type",""),e.passTipEl.css("line-height","28px"))})))),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS,value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<input autocomplete="off" placeholder="{emptyText}" class="fancy-field-text-input" style="{inputWidth}" value="{value}">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_ERROR_CLS,a=Fancy.FIELD_TEXT_CLS,r=Fancy.FIELD_TEXT_INPUT_CLS,o=Fancy.FIELD_SPIN_CLS,s=Fancy.FIELD_SPIN_UP_CLS,l=Fancy.FIELD_SPIN_DOWN_CLS;Fancy.define(["Fancy.form.field.Number","Fancy.NumberField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.number",allowBlank:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","enter","up","down","esc","tab","change","key","empty"),e.Super("init",arguments),e.preRender(),e.render(),e.ons(),e.hidden&&e.css("display","none"),e.initSpin()},fieldCls:t,value:"",width:100,emptyText:"",step:1,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">','<input autocomplete="off" placeholder="{emptyText}" class="'+r+'" style="{inputWidth}" value="{value}">','<div class="'+o+'">','<div class="'+s+'"></div>','<div class="'+l+'"></div>',"</div>",'<div class="'+i+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+e+'"></div>'],onInput:function(){var e=this,t=e.input,n=e.get(),i=e.acceptedValue;if(e.isValid()){for(var a=t.dom.value,r="",o=0,s=a.length;o<s;o++)switch(a[o]){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":case"+":case".":r+=a[o]}isNaN(Number(r))||(e.value=r,n=r)}e.acceptedValue=Number(e.get()),e.fire("input",n),e.fire("change",Number(n),Number(i))},isNumber:function(e){return""===e||"-"===e||Fancy.isNumber(+e)},checkMinMax:function(e){var t=this;return""===e||"-"===e||(e=+e)>=t.min&&e<=t.max},setMin:function(e){this.min=e},setMax:function(e){this.max=e},initSpin:function(){var e=this;!0===e.spin&&(e.el.select("."+o).css("display","block"),e.el.select("."+s).on("mousedown",e.onMouseDownSpinUp,e),e.el.select("."+l).on("mousedown",e.onMouseDownSpinDown,e))},onMouseDownSpinUp:function(e){var t=this,n=Fancy.get(document),i=700,a=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinUp=!0,t.spinUp(),t.spinInterval=setInterval((function(){t.mouseDownSpinUp=!1,new Date-a>i&&(700===i&&(i=150),a=new Date,t.spinUp(),--i<20&&(i=20))}),20),n.once("mouseup",(function(){clearInterval(t.spinInterval)})),t.focus())},onMouseDownSpinDown:function(e){var t=this,n=Fancy.get(document),i=700,a=new Date;t.disabled||(e.preventDefault(),t.mouseDownSpinDown=!0,t.spinDown(),t.spinInterval=setInterval((function(){t.mouseDownSpinDown=!1,new Date-a>i&&(700===i&&(i=150),a=new Date,t.spinDown(),--i<20&&(i=20))}),20),n.once("mouseup",(function(){clearInterval(t.spinInterval)})),t.focus())},spinUp:function(){var e=this,t=+e.get()+e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.max&&t>e.max?t=e.max:t<e.min&&(t=e.min),e.set(t)},spinDown:function(){var e=this,t=+e.get()-e.step;Fancy.Number.isFloat(e.step)&&(t=Fancy.Number.correctFloat(t)),isNaN(t)&&(t=e.min||0),void 0!==e.min&&t<e.min?t=e.min:t>e.max&&(t=e.max),e.set(t)}})}(),Fancy.define(["Fancy.form.field.Text","Fancy.TextField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.text",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.Super("init",arguments),e.preRender(),e.render(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:Fancy.FIELD_CLS+" fancy-field-field-text",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-text-value">{value}</div>','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>'],set:function(e){this.el.select(".fancy-field-text-value").item(0).update(e)}}),Fancy.define(["Fancy.form.field.Empty","Fancy.EmptyField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.empty",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents(),e.Super("init",arguments),e.preRender(),e.render(),e.style&&e.css(e.style)},ons:function(){},fieldCls:Fancy.FIELD_CLS+" "+Fancy.FIELD_EMPTY_CLS,width:100,tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">','<div class="fancy-field-error" style="{errorTextStyle}"></div>',"</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy,t=e.FIELD_CLS,n=e.FIELD_TEXTAREA_CLS,i=e.FIELD_LABEL_CLS,a=e.FIELD_TEXTAREA_TEXT_CLS,r=e.FIELD_TEXTAREA_TEXT_INPUT_CLS,o=e.FIELD_ERROR_CLS,s=e.CLEARFIX_CLS;e.define(["Fancy.form.field.TextArea","Fancy.TextArea"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.textarea",constructor:function(){this.Super("const",arguments)},init:function(){var e=this;e.addEvents("change","key"),e.Super("init",arguments),e.preRender(),e.render(),e.ons()},fieldCls:t+" "+n,value:"",width:250,height:100,labelWidth:60,inputWidth:180,minHeight:100,maxHeight:210,lineHeight:12.5,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">','<textarea autocomplete="off" placeholder="{emptyText}" type="text" class="'+r+'" style="{inputWidth}height:{inputHeight}px;">{value}</textarea>','<div class="'+o+'" style="{errorTextStyle}"></div>',"</div>",'<div class="'+s+'"></div>'],ons:function(){var e=this,t=e.el,n=e.el.getByTag("textarea");e.input=n,n.on("blur",e.onBlur,e),n.on("focus",e.onFocus,e),n.on("input",e.onInput,e),n.on("keydown",e.onKeyDown,e),e.on("key",e.onKey,e),e.autoHeight&&n.on("input",e.onChange,e),n.on("mousedown",(function(t){e.disabled&&t.preventDefault()})),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},preRender:function(){var t=this;t.tpl&&(t.tpl=new e.Template(t.tpl)),t.initHeight(),t.calcSize()},initHeight:function(){var e,t=this;if(t.height)e=t.height,t.maxHeight<t.height&&setTimeout((function(){t.input.css({"overflow-y":"scroll"})}),1);else if(t.value){var n=t.value.match(/\n/g);n=n?n.length:1,e=n*t.lineHeight}else e=t.height;e<t.minHeight||e>t.maxHeight&&setTimeout((function(){t.input.css({"overflow-y":"scroll"})}),1),t.height=e,t.inputHeight=e},calcSize:function(){var t,n,i,a,r,o=this,s=o.padding;if(e.isString(s))switch(s=s.replace(/px/g,""),s=s.split(" "),s.length){case 1:n=Number(s[0]),s=[n,n,n,n];break;case 2:i=Number(s[0]),a=Number(s[1]),s=[i,a,i,a];break;case 3:i=Number(s[0]),a=Number(s[1]),r=Number(s[2]),s=[i,a,r,i];break;case 4:s=[Number(s[0]),Number(s[1]),Number(s[2]),Number(s[3])]}else e.isNumber(s)?s=[s,s,s,s]:!1===s&&(s=[0,0,0,0]);"top"===o.labelAlign&&(o.inputHeight-=40),t=o.width,"top"!==o.labelAlign&&o.label&&(t-=o.labelWidth),o.height===o.inputHeight&&!1!==o.padding&&(o.inputHeight-=s[0]+s[2]),o.inputWidth=t-s[1]-s[3],o.height=o.inputHeight+s[0]+s[2]},onChange:function(){var e=this,t=e.input.dom.value,n=e.el.getByTag("textarea"),i=t.match(/\n/g).length*e.lineHeight;i<e.minHeight?(i=e.minHeight,n.css({"overflow-y":"hidden"})):i>e.maxHeight?(i=e.maxHeight,n.css({"overflow-y":"scroll"})):n.css({"overflow-y":"hidden"}),e.height=i}})}(),function(){var e=Fancy.CLEARFIX_CLS,t=Fancy.FIELD_CLS,n=Fancy.FIELD_LABEL_CLS,i=Fancy.FIELD_TEXT_CLS,a=Fancy.FIELD_CHECKBOX_CLS,r=Fancy.FIELD_CHECKBOX_INPUT_CLS,o=Fancy.FIELD_INPUT_LABEL_CLS,s=Fancy.FIELD_CHECKBOX_ON_CLS;Fancy.define(["Fancy.form.field.CheckBox","Fancy.CheckBox"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.checkbox",middle:!1,disabled:!1,constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","up","down","beforechange","change","key"),e.Super("init",arguments),e.preRender(),e.render({labelWidth:e.labelWidth,labelDispay:e.labelText?"":"none",label:e.label}),e.expander&&e.addCls("fancy-checkbox-expander"),e.acceptedValue=e.value,e.set(e.value,!1),e.checkMiddle(),e.ons()},labelText:"",labelWidth:60,value:!1,editable:!0,stopIfCTRL:!1,checkedCls:s,fieldCls:t+" "+a,tpl:['<div class="'+n+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+i+'">','<div class="'+r+'"></div>',"</div>",'<div class="'+o+'" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="'+e+'"></div>'],ons:function(){var e=this,t=e.el;t.on("click",e.onClick,e),t.on("mousedown",e.onMouseDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick:function(e){var t=this,n=t.el;if(!(t.disabled||(t.fire("beforechange"),e.ctrlKey&&t.stopIfCTRL||!1===t.editable))){if(!0===t.canceledChange)return void(t.canceledChange=!1);n.toggleCls(t.checkedCls);var i=t.value;t.value=n.hasCls(t.checkedCls),t.fire("change",t.value,i),!0===t.middle&&(t.middle=!1,t.checkMiddle())}},onMouseDown:function(e){e.preventDefault()},set:function(e,t){var n=this,i=n.el;if(""===e&&(e=!1),!0===e||1===e)i.addCls(n.checkedCls),e=!0;else if(!1===e||0===e)i.removeClass(n.checkedCls),e=!1;else{if(void 0!==e)throw new Error("[FancyGrid Error] - not right value for checkbox "+e);e=!1}n.value=e,!1!==t&&n.fire("change",n.value)},setValue:function(e,t){this.set(e,t)},getValue:function(){return this.value},get:function(){return this.getValue()},clear:function(){this.set(!1)},toggle:function(){this.set(!this.value)},destroy:function(){this.Super("destroy",arguments)},checkMiddle:function(){var e=this;e.middle?e.el.addCls("fancy-checkbox-middle"):e.el.removeCls("fancy-checkbox-middle")},setMiddle:function(e){var t=this;t.middle=e,t.checkMiddle()}})}(),Fancy.define(["Fancy.form.field.Switcher","Fancy.Switcher"],{extend:Fancy.CheckBox,type:"field.switcher",constructor:function(e){Fancy.applyConfig(this,e),this.Super("const",arguments)},init:function(){this.Super("init",arguments)},checkedCls:"fancy-switcher-on",fieldCls:Fancy.FIELD_CLS+" fancy-field-switcher",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-field-input-label" style="{inputLabelDisplay}">',"{inputLabel}","</div>",'<div class="fancy-clearfix"></div>']}),function(){var e=Fancy,t=e.FIELD_CLS,n=e.FIELD_COMBO_RESULT_LIST_CLS,i=e.FIELD_COMBO_CLS,a=e.FIELD_COMBO_SELECTED_ITEM_CLS,r=e.FIELD_COMBO_FOCUSED_ITEM_CLS,o=e.FIELD_LABEL_CLS,s=e.FIELD_TEXT_CLS,l=e.CLEARFIX_CLS,c=e.FIELD_ERROR_CLS,d=e.FIELD_TEXT_INPUT_CLS,u=e.FIELD_DISABLED_CLS,h=e.FIELD_COMBO_DROPDOWN_BUTTON_CLS,f=e.FIELD_COMBO_INPUT_CONTAINER_CLS,p=e.FIELD_COMBO_LEFT_EL_CLS,g=e.FIELD_LABEL_ALIGN_TOP_CLS,y=e.FIELD_LABEL_ALIGN_RIGHT_CLS,m=e.FIELD_CHECKBOX_INPUT_CLS,v=e.FIELD_COMBO_LIST_VALUE_CLS;e.define("Fancy.combo.Manager",{singleton:!0,opened:[],add:function(e){this.hideLists(),this.opened.push(e)},hideLists:function(){e.each(this.opened,(function(e){e.hideList(),e.hideAheadList()})),this.opened=[]}}),e.define(["Fancy.form.field.Combo","Fancy.Combo"],{type:"field.combo",mixins:[e.form.field.Mixin],extend:e.Widget,selectedItemCls:a,focusedItemCls:r,fieldCls:t+" "+i,width:250,labelWidth:60,listRowHeight:28,dropButtonWidth:27,leftWidth:20,maxListRows:9,emptyText:"",editable:!0,typeAhead:!0,readerRootProperty:"data",valueKey:"value",displayKey:"text",multiSelect:!1,itemCheckBox:!1,listCls:"",tpl:['<div class="'+o+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+s+'">','<div class="'+f+'" style="{inputWidth}{inputHeight}">','<div class="'+p+'" style="{inputHeight}cursor:default;">&nbsp;</div>','<input autocomplete="off" placeholder="{emptyText}" class="'+d+'" style="{inputHeight}cursor:default;" value="{value}">','<div class="'+h+'">&nbsp;</div>',"</div>","</div>",'<div class="'+c+'" style="{errorTextStyle}"></div>','<div class="'+l+'"></div>'],constructor:function(){this.tags=this.tags||[],this.Super("const",arguments)},init:function(){var e=this;e.addEvents("focus","blur","input","up","down","change","key","enter","esc","empty","load","add-new-value"),e.Super("init",arguments),e.subSearch&&(e.editable=!1),e.loadListData()||(e.data=e.configData(e.data),e.data=Fancy.Array.copy(e.data)),e.multiSelect&&e.data.length&&e.initMultiSelect(),e.preRender(),e.render(),e.ons(),e.applyStyle(),e.applyTheme(),setTimeout((function(){e.applyTheme()}),1)},loadListData:function(){var t=this;if(!e.isObject(t.data))return!1;var n=t.data.proxy,i=t.readerRootProperty;if(!n||!n.url)throw new Error("[FancyGrid Error]: combo data url is not defined");return n.reader&&n.reader.root&&(i=n.reader.root),e.Ajax({url:n.url,params:n.params||{},method:n.method||"GET",getJSON:!0,success:function(e){if(t.data=t.configData(e[i]),t.renderList(),t.onsList(),t.multiSelect)t.initMultiSelect(),t.value&&t.updateInput();else if(t.value){var n=t.getDisplayValue(t.value);n&&(t.input.dom.value=n)}t.fire("load")}}),!0},configData:function(t){if(e.isObject(t)||0===t.length)return t;if(!e.isObject(t[0])){for(var n=[],i=0,a=t.length;i<a;i++)n.push({text:t[i],value:i});return n}return t},applyStyle:function(){var e=this;e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},applyTheme:function(){var e=this;e.theme&&"default"!==e.theme&&(e.addCls(Fancy.getThemeCSSCls(e.theme)),e.list.addCls(Fancy.getThemeCSSCls(e.theme)),e.aheadList&&e.aheadList.addCls(Fancy.getThemeCSSCls(e.theme)))},ons:function(){var e=this,t=e.el,n=e.el.select("."+h);e.input=e.el.getByTag("input"),e.inputContainer=e.el.select("."+f),e.drop=n,e.onsList(),e.input.on("blur",e.onBlur,e),e.input.on("mousedown",e.onInputMouseDown,e),e.input.on("click",e.onInputClick,e),n.on("mousedown",e.onDropMouseDown,e),n.on("click",e.onDropClick,e),e.on("key",e.onKey,e),e.typeAhead&&e.editable&&e.input.on("keydown",e.onKeyDown,e),e.on("esc",e.onEsc,e),e.on("enter",e.onEnter,e),e.on("up",e.onUp,e),e.on("down",e.onDown,e),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onSubSearchKeyDown:function(t){var n=this,i=t.keyCode,a=e.key;switch(i){case a.ESC:n.fire("esc",t);break;case a.ENTER:n.fire("enter",t);break;case a.UP:n.fire("up",t);break;case a.DOWN:n.fire("down",t)}},onKeyDown:function(t){var n=this,i=t.keyCode,a=e.key;switch(i){case a.ESC:n.fire("esc",t);break;case a.ENTER:n.fire("enter",t);break;case a.UP:n.fire("up",t);break;case a.DOWN:n.fire("down",t);break;case a.TAB:break;case a.BACKSPACE:setTimeout((function(){if(0===n.input.dom.value.length)n.value=-1,n.valueIndex=-1,n.hideAheadList(),n.multiSelect&&(n.values=[],n.clearListActive()),n.fire("empty");else{if(n.multiSelect&&(n.input.dom.value.split(",").length,n.valuesIndex.length),0===n.generateAheadData().length)return void n.hideAheadList();n.renderAheadList(),n.showAheadList()}}),100);break;default:setTimeout((function(){0!==n.generateAheadData().length?(n.renderAheadList(),n.showAheadList()):n.hideAheadList()}),1)}setTimeout((function(){n.fire("key",n.input.dom.value,t)}),1)},onInputClick:function(){var e=this,t=e.list;e.disabled||!0!==e.editable&&("none"===t.css("display")?e.showList():e.hideList())},onDropClick:function(){var t=this,n=t.list;t.disabled||("none"===n.css("display")?(e.combo.Manager.add(this),t.showList()):t.hideList(),!0===t.editable&&t.input.focus())},showList:function(){var t=this,n=t.list,i=t.input.parent().parent(),a=i.$dom.offset(),r=[a.left,a.top+i.$dom.height()],o=e.get(document),s=t.selectedItemCls,l=t.focusedItemCls;if(t.hideAheadList(),t.list&&0!==t.data.length){if(!t.isListInsideViewBox(i)){var c=this.calcListHeight();r[1]=a.top-c}var d;n.css({display:"",left:r[0]+"px",top:r[1]+3+"px",opacity:0,width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.listCls&&n.addCls(t.listCls),n.animate({opacity:1,top:r[1]},e.ANIMATE_DURATION),t.clearFocused();var u=n.select("."+s);0===u.length?t.multiSelect&&t.values.length?t.valuesIndex.each((function(e,t,i){void 0===d&&(d=e),n.select("li").item(e).addCls(s)})):d=0:(t.multiSelect&&u.length!==t.valuesIndex.length&&(n.select("."+s).removeCls(s),t.valuesIndex.each((function(e,t,i){void 0===d&&(d=e),n.select("li").item(e).addCls(s)}))),d=u.item(0).index()),-1===d&&(d=0),n.select("li").item(d).addCls(l),t.scrollToListItem(d),t.docSpy||(t.docSpy=!0,o.on("click",t.onDocClick,t)),!1!==t.subSearch&&t.subSearchField&&(t.subSearchField.setInputSize({width:t.getListWidth()-6,height:25}),t.subSearchField.input.focus())}},showAheadList:function(){var t=this,n=t.aheadList,i=t.input.parent().parent(),a=i.$dom.offset(),r=[a.left,a.top+i.$dom.height()],o=e.get(document);t.hideList(),n&&0!==t.data.length&&(n.css({display:"",left:r[0]+"px",top:r[1]+"px",width:t.getListWidth(),"z-index":2e3+e.zIndex++}),t.docSpy2||(t.docSpy2=!0,o.on("click",t.onDocClick,t)))},onDocClick:function(e){var t=this;if(!1===t.input.parent().parent().within(e.target)){if(!0===t.list.within(e.target))return;t.hideList(),t.hideAheadList()}},hideList:function(){var t=this;if(t.list&&(t.list.css("display","none"),t.docSpy)){var n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},hideAheadList:function(){var t=this;if(t.aheadList&&(t.aheadList.css("display","none"),t.docSpy)){var n=e.get(document);t.docSpy=!1,n.un("click",t.onDocClick,t)}},onInputMouseDown:function(e){var t=this;(t.disabled||!1===t.editable)&&e.preventDefault()},onDropMouseDown:function(e){this.disabled&&e.stopPropagation(),e.preventDefault()},onsList:function(){var e=this;e.list.on("mousedown",e.onListItemMouseDown,e,"li"),e.list.on("click",e.onListItemClick,e,"li"),e.list.on("mouseenter",e.onListItemOver,e,"li"),e.list.on("mouseleave",e.onListItemLeave,e,"li"),e.selectAllText&&e.list.select(".fancy-combo-list-select-all").on("click",e.onSelectAllClick,e)},onsAheadList:function(){var e=this;e.aheadList.on("click",e.onAHeadListItemClick,e,"li")},onListItemOver:function(t){if(!this.disabled){var n=e.get(t.target);"li"===n.prop("tagName").toLocaleLowerCase()&&n.addCls(this.focusedItemCls)}},onListItemLeave:function(){this.disabled||this.clearFocused()},onListItemMouseDown:function(){var e=this;e.listItemClicked=!0,setTimeout((function(){delete e.listItemClicked}),1e3)},onListItemClick:function(t){var n=this,i=e.get(t.currentTarget),a=i.attr("value"),r=n.selectedItemCls,o=n.focusedItemCls;n.disabled||(e.nojQuery&&0===a&&(a=""),n.multiSelect?(0===n.values.length&&n.clearListActive(),n.clearFocused(),"list"===n.getTypeActiveList()&&i.toggleCls(r),i.hasCls(r)?(n.addValue(a),i.addCls(o)):(n.removeValue(a),n.clearFocused(),n.selectAllText&&n.list.select(".fancy-combo-list-select-all").removeCls("fancy-combo-item-selected")),n.updateInput()):(n.set(a),n.hideList()),n.editable?n.input.focus():n.onBlur())},onAHeadListItemClick:function(t){var n=this,i=e.get(t.currentTarget),a=i.attr("value"),r=n.focusedItemCls;n.disabled||(e.nojQuery&&0===a&&(a=""),n.multiSelect?(0===n.values.length&&n.clearListActive(),n.clearFocused(),n.addValue(a),i.addCls(r),n.updateInput()):(n.set(a),n.hideList()),n.editable?n.input.focus():n.onBlur())},set:function(t,n){var i,a=this,r="";if(a.multiSelect&&!e.isArray(t)&&(t=-1===t?[]:[t]),e.isArray(t)&&a.multiSelect){var o=[];a.valuesIndex.removeAll(),e.each(t,(function(e,n){var i=a.getIndex(e);-1!==i&&(a.valuesIndex.add(i,t[n]),o.push(a.data[i][a.displayKey]),r=o.join(", "))})),a.values=t,i=a.getIndex(t[0]),a.value=t[0],a.valueIndex=i}else i=a.getIndex(t),-1!==i?(a.valueIndex=i,r=a.data[i][a.displayKey],a.selectItem(i)):-1!==t&&t&&t.length>0?(r="",a.value=-1,a.valueIndex=-1):r="",a.value=t;a.input.dom.value=r,!1!==n&&a.onInput(),a.left&&a.updateLeft(),Fancy.isObject(a.data)||a.validate(r)},addValue:function(e){var t=this,n=t.getIndex(e);-1===n||t.valuesIndex.get(n)||(t.value=e,t.values.push(e),t.valuesIndex.add(n,e))},removeValue:function(t){var n=this,i=-1;e.each(n.values,(function(e,n){String(e).toLocaleLowerCase()===String(t).toLocaleLowerCase()&&(i=n)})),-1!==i&&(n.values.splice(i,1),n.valuesIndex.remove(n.getIndex(t))),n.values.length?n.value=n.values[n.values.length-1]:(n.value=-1,n.valueIndex=-1)},updateInput:function(e){var t=this,n=[];t.valuesIndex.each((function(e,i,a){n.push(t.data[e][t.displayKey])})),t.input.dom.value=n.join(", "),!1!==e&&t.onInput()},selectItem:function(e){var t=this;t.list&&(t.multiSelect||t.clearListActive(),t.clearFocused(),t.list.select("li").item(e).addCls(t.focusedItemCls,t.selectedItemCls))},render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=e.get(document.createElement("div")),a=t.value,r=-1;i.attr("id",t.id),void 0===a?a="":t.multiSelect&&e.isArray(t.data)&&t.data.length>0?(a="",t.valuesIndex.each((function(e,n){-1===r&&(r=e,t.valueIndex=e),t.data[e]&&(a+=t.data[e][t.displayKey]+", ")})),a=a.replace(/, $/,"")):(r=t.getIndex(a),-1!==r?(t.valueIndex=r,a=t.data[r][t.displayKey]):a=""),t.fire("beforerender"),i.addCls(e.cls,t.cls,t.fieldCls);var l="";t.labelWidth&&(l="width:"+t.labelWidth+"px;");var c=t.label;""===t.label||void 0===t.label?c="&nbsp;":"right"!==t.labelAlign&&(c+=":"),i.update(t.tpl.getHTML({labelWidth:l,labelDisplay:!1===t.label?"display: none;":"",label:!1===c?"":c,emptyText:t.emptyText,inputHeight:"height:"+t.inputHeight+"px;",value:a})),t.el=i,t.setStyle(),t.input=t.el.getByTag("input"),t.inputContainer=t.el.select("."+f),t.drop=t.el.select("."+h),t.leftTpl&&(t.left=t.el.select("."+p),t.left.css({display:"block",width:t.leftWidth})),t.setSize(),n.appendChild(i.dom),"top"===t.labelAlign?t.el.addCls(g):"right"===t.labelAlign&&(t.el.addCls(y),e.$(i.dom).find("."+o).insertAfter(e.$(i.dom).find("."+s))),t.valueIndex&&(t.acceptedValue=t.value),t.editable?t.input.css("cursor","auto"):t.input&&t.input.attr("tabIndex",-1),t.disabled&&(t.addCls(u),t.input&&t.input.attr("tabIndex",-1)),t.renderList(),t.leftTpl&&(setTimeout((function(){t.updateLeft()}),1),setTimeout((function(){t.updateLeft()}),500),setTimeout((function(){t.updateLeft()}),1e3)),t.fire("afterrender"),t.fire("render")},renderList:function(){var t=this,i=e.get(document.createElement("div")),a=[];t.selectAllText&&a.push('<div class="fancy-combo-list-select-all"><div class="fancy-field-checkbox-input" style=""></div><span class="fancy-combo-list-select-all-text">'+t.selectAllText+"</span></div>"),!1===t.editable&&!1!==t.subSearch&&"checkbox"!==t.type&&a.push('<div class="fancy-combo-list-sub-search-container"></div>'),t.list&&t.list.destroy(),a.push(['<ul style="position: relative;">']),e.each(t.data,(function(n,i){var r="",o=n[t.displayKey],s=n[t.valueKey];if(String(t.value).toLocaleLowerCase()===String(s).toLocaleLowerCase()&&(r=t.selectedItemCls),""===o||" "===o)o="&nbsp;";else if(t.listItemTpl){var l=new e.Template(t.listItemTpl);o=l.getHTML(n)}t.multiSelect&&t.itemCheckBox?a.push('<li value="'+s+'" class="'+r+'"><div class="'+m+'" style=""></div><span class="'+v+'">'+o+"</span></li>"):a.push('<li value="'+s+'" class="'+r+'"><span class="'+v+'">'+o+"</span></li>")})),a.push("</ul>"),i.addCls(e.cls,n),i.update(a.join("")),i.css({display:"none",left:"0px",top:"0px",width:t.getListWidth()}),t.data.length>t.maxListRows&&i.select("ul").item(0).css({height:t.listRowHeight*t.maxListRows+"px",overflow:"auto"}),document.body.appendChild(i.dom),t.list=i,!1===t.editable&&"checkbox"!==t.type&&!1!==t.subSearch&&(t.subSearchField=new e.StringField({renderTo:t.list.select(".fancy-combo-list-sub-search-container").item(0).dom,label:!1,style:{padding:"2px 2px 0px 2px"},events:[{change:t.onSubSearchChange,scope:t}]}),t.subSearchField.setInputSize({width:t.getListWidth()-6,height:25}),t.subSearchField.input.on("keydown",t.onSubSearchKeyDown,t)),t.applyTheme()},getListWidth:function(){var e,t=this,n=t.inputWidth+14,i=t.minListWidth;return t.input&&(e=t.input.parent().parent(),n=e.width()),i&&i>n&&(n=i),n},generateAheadData:function(){var t=this,n=t.input.dom.value.toLocaleLowerCase(),i=[];if(t.multiSelect){var a=n.split(", "),r=t.getInputSelection(),o=0;e.each(n,(function(e,t){if(r.start<=t)return!0;","===n[t]&&o++})),n=a[o]}return e.each(t.data,(function(e){var a=n;a&&(a=a.replace(/\(/g,"").replace(/\)/,"")),new RegExp("^"+a).test(e[t.displayKey].toLocaleLowerCase())&&i.push(e)})),t.data.length===i.length&&(i=[]),t.aheadData=i,i},renderAheadList:function(){var t,i=this,a=['<ul style="position: relative;">'],r=!1;i.getDisplayValue(),i.aheadList?(i.aheadList.firstChild().destroy(),t=i.aheadList,r=!0):t=e.get(document.createElement("div")),e.each(i.aheadData,(function(t,n){var r="",o=t[i.displayKey],s=t[i.valueKey];if(0===n&&(r=i.selectedItemCls),""===o||" "===o)o="&nbsp;";else if(i.listItemTpl){var l=new e.Template(i.listItemTpl);o=l.getHTML(t)}a.push('<li value="'+s+'" class="'+r+'"><span class="'+v+'">'+o+"</span></li>")})),a.push("</ul>"),t.update(a.join("")),t.css({display:"none",left:"0px",top:"0px",width:i.getListWidth()}),t.css({"max-height":i.listRowHeight*i.maxListRows+"px",overflow:"auto"}),!1===r&&(t.addClass(e.cls,n),document.body.appendChild(t.dom),i.aheadList=t,i.onsAheadList()),i.applyTheme()},hide:function(){var e=this;e.css("display","none"),e.hideList(),e.hideAheadList()},clear:function(){var e=this;e.multiSelect?e.set([],!1):e.set(-1,!1)},clearListActive:function(){var e=this,t=e.selectedItemCls,n=e.focusedItemCls;e.list.select("."+n).removeCls(n),e.list.select("."+t).removeCls(t)},clearFocused:function(){var e=this,t=e.focusedItemCls;e.list&&e.list.select("."+t).removeCls(t),e.aheadList&&e.aheadList.select("."+t).removeCls(t)},onInput:function(){var e=this,t=e.getValue(),n=e.acceptedValue;e.acceptedValue=e.get(),e.fire("change",t,n),e.left&&e.updateLeft()},setValue:function(e,t){this.set(e,t)},getDisplayValue:function(e,t){var n=this,i=n.getIndex(e);return t?i:n.data[i]?n.data[i][n.displayKey]:""},getValueKey:function(e,t){for(var n=this,i=0,a=n.data.length;i<a;i++)if(String(n.data[i][n.displayKey]).toLocaleLowerCase()===String(e).toLocaleLowerCase())return t?i:n.data[i][n.valueKey]},get:function(){return this.getValue()},getValue:function(){var e=this;return e.multiSelect?e.values:-1===e.value||void 0===e.value?-1===e.value&&e.input.dom.value?e.input.dom.value:"":(e.valueKey,e.value)},size:function(e){var t=this,n=e.width,i=e.height,a=t.input,r=t.inputContainer,o=t.drop;"top"!==t.labelAlign&&(t.inputHeight=i),void 0!==i&&(t.height=i),void 0!==n&&(t.width=n),t.calcSize(),"top"===t.labelAlign?t.css({height:1.5*t.height,width:t.width}):t.css({height:t.height,width:t.width});var s=t.inputWidth,l=2;"dark"===t.theme&&(l=0);var c=s-l;t.left&&(c-=t.leftWidth),a.css({width:c,height:t.inputHeight,"margin-left":t.left?t.leftWidth:0}),r.css({width:s,height:t.inputHeight}),o.css("height",t.inputHeight)},onEnter:function(e,t){var n=this,i=n.getActiveList(),a=n.focusedItemCls,r=n.selectedItemCls;if(n.multiSelect){if(!i)return;var o=i.select("."+a);if(o&&o.dom||(o=i.select("."+r).last()),o&&o.dom){l=o.attr("value"),n.addValue(l);var s=n.getDisplayValue(l,!0);n.selectItem(s),n.updateInput()}}else if(i){o=i.select("."+a);o&&o.dom||(o=i.select("."+r)),l=o.attr("value"),n.set(l)}else if(""===n.input.dom.value)n.set(n.input.dom.value);else{var l=n.input.dom.value;n.detectedNewValue(l)}n.hideList(),n.hideAheadList()},onEsc:function(e,t){var n=this;n.hideList(),n.hideAheadList()},onUp:function(e,t){var n=this,i=n.getActiveList(),a=n.focusedItemCls,r=n.selectedItemCls;if(i){i=n.getActiveList().select("ul"),t.preventDefault();var o=i.select("."+a),s=!1;o.dom||(o=i.select("."+r)),o.dom||(s=!0,o=i.lastChild()),o.length>1&&(o=o.item(0));var l=o.index(),c=i.select("li"),d=parseInt(i.css("height"));0===l||s?l=c.length-1:l--;var u=c.item(l),h=u.dom.offsetTop;h-i.dom.scrollTop>d?i.dom.scrollTop=1e4:h-i.dom.scrollTop<0&&(i.dom.scrollTop=h),n.clearFocused(),u.addClass(a)}},onDown:function(e,t){var n=this,i=n.getActiveList(),a=n.focusedItemCls,r=n.selectedItemCls;if(i){i=n.getActiveList().select("ul"),t.preventDefault();var o=i.select("."+a),s=!1;o.dom||(o=i.select("."+r)),o.dom||(s=!0,o=i.firstChild()),o.length>1&&(o=o.item(0));var l=parseInt(o.css("height")),c=o.index(),d=i.select("li"),u=parseInt(i.css("height"));c===d.length-1||s?c=0:c++;var h=d.item(c),f=h.dom.offsetTop,p=parseInt(h.css("height"));f-i.dom.scrollTop<0?i.dom.scrollTop=0:f+p+3-i.dom.scrollTop>u&&(i.dom.scrollTop=f-u+l+p),n.clearFocused(),h.addClass(a)}else n.showList()},scrollToListItem:function(e){var t=this,n=t.getActiveList().select("ul"),i=n.select("li"),a=i.item(e),r=a.dom.offsetTop;0===e?n.dom.scrollTop=0:e===i.length-1?n.dom.scrollTop=1e4:n.dom.scrollTop=r},getActiveList:function(){var e=this,t=!1;return e.list&&"none"!==e.list.css("display")?t=e.list:e.aheadList&&"none"!==e.aheadList.css("display")&&(t=e.aheadList),t},getTypeActiveList:function(){var e=this;return e.list&&"none"!==e.list.css("display")?"list":e.aheadList&&"none"!==e.aheadList.css("display")?"ahead":void 0},initMultiSelect:function(){var t=this,n=t.value;t.values=[],t.valuesIndex=new e.Collection,void 0!==t.value&&null!==n&&""!==n&&(e.isArray(n)?(t.values=n,t.value=n[0]):t.values=[t.value],e.each(t.values,(function(e){t.valuesIndex.add(t.getIndex(e),e)})))},getIndex:function(e){for(var t=this,n=t.data,i=0,a=n.length,r=-1;i<a;i++)if(String(n[i][t.valueKey]).toLocaleLowerCase()==String(e).toLocaleLowerCase())return i;return r},getFromInput:function(){var t=this,n=t.input.dom.value,i=n.split(","),a=[];return e.each(i,(function(e){var n=e.replace(/ $/,"").replace(/^ /,""),i=t.getValueKey(n);i&&a.push(i)})),a},updateLeft:function(){var t=this,n=t.data[t.getIndex(t.getValue())];t.left.update(new e.Template(t.leftTpl).getHTML(n))},setData:function(t){var n=this;n.data=t,n.multiSelect&&(n.values=[],n.valuesIndex=new e.Collection,n.clearListActive()),n.renderList(),n.onsList()},onSelectAllClick:function(){var e=this,t=e.list.select("li"),n=e.list.select(".fancy-combo-list-select-all").item(0),i=n.hasClass("fancy-combo-item-selected");setTimeout((function(){i?n.removeCls("fancy-combo-item-selected"):n.addCls("fancy-combo-item-selected")}),100),t.each((function(e,t){i?e.hasClass("fancy-combo-item-selected")&&e.dom.click():e.hasClass("fancy-combo-item-selected")||e.dom.click()}))},onSubSearchChange:function(t,n){var i=this,a=i.list.select("li"),r=0,o=i.listRowHeight*i.maxListRows;n=n.toLocaleLowerCase(),e.each(i.data,(function(e,t){new RegExp("^"+n).test(e[i.displayKey].toLocaleLowerCase())?(a.item(t).css("display","block"),r+=parseInt(a.item(t).css("height"))):a.item(t).css("display","none")}));var s=i.list.select("ul").item(0);r>o?s.css("height",o):s.css("height",r)},isListInsideViewBox:function(t){var n=this,i=t.$dom.offset(),a=n.calcListHeight()+t.$dom.height();return!(i.top+a>e.getViewSize()[0]+Fancy.getScroll()[0])},calcListHeight:function(){var e=this,t=e.data.length*e.listRowHeight;return e.data.length>e.maxListRows&&(t=e.maxListRows*e.listRowHeight),t},detectedNewValue:function(t){var n=this;n.data.push({text:t,value:t}),n.multiSelect&&(n.values=[],n.valuesIndex=new e.Collection,n.clearListActive()),n.renderList(),n.onsList(),n.set(t),this.fire("add-new-value",t)}})}(),function(){var e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_LABEL_CLS,a=e.FIELD_TEXT_CLS,r=e.FIELD_BUTTON_CLS;e.define(["Fancy.form.field.Button","Fancy.ButtonField"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.button",pressed:!1,constructor:function(t){e.apply(this,t),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:n+" "+r,value:"",width:100,emptyText:"",tpl:['<div class="'+i+'" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="'+a+'">',"</div>",'<div class="'+t+'"></div>'],renderButton:function(){var t=this;t.button=new e.Button({renderTo:t.el.select("."+a).item(0).dom,text:t.buttonText,disabled:t.disabled,pressed:t.pressed,enableToggle:t.enableToggle,imageCls:t.imageCls,handler:function(){t.disabled||(t.scope?t.handler.apply(t.scope,[t]):t.handler(t))}})},ons:function(){var e=this,t=e.el;e.button.on("pressedchange",(function(t,n){e.fire("pressedchange",n)})),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick:function(){var e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},setPressed:function(e){this.button.setPressed(e)}})}(),Fancy.define(["Fancy.form.field.SegButton","Fancy.SegButtonField"],{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.button",allowToggle:!0,constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("click","change"),e.Super("init",arguments),e.preRender(),e.render(),e.renderButton(),e.ons(),e.hidden&&e.css("display","none"),e.style&&e.css(e.style)},fieldCls:"fancy fancy-field fancy-field-button",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-label" style="{labelWidth}{labelDisplay}">',"{label}","</div>",'<div class="fancy-field-text">',"</div>",'<div class="fancy-clearfix"></div>'],renderButton:function(){var e=this;e.button=new Fancy.SegButton({renderTo:e.el.select(".fancy-field-text").item(0).dom,items:e.items,disabled:e.disabled,multiToggle:e.multiToggle,allowToggle:e.allowToggle})},ons:function(){var e=this,t=e.el;e.button.on("toggle",(function(){e.disabled||e.fire("toggle")})),t.on("mouseenter",e.onMouseOver,e),t.on("mouseleave",e.onMouseOut,e),e.tip&&t.on("mousemove",e.onMouseMove,e)},onClick:function(){var e=this;e.disabled||(e.fire("click"),e.handler&&e.handler())},get:function(){var e=this,t=[];return Fancy.each(e.items,(function(e,n){e.pressed&&(e.value?t.push(e.value):t.push(n))})),t.toString()},clear:function(e){this.allowToggle&&Fancy.each(this.items,(function(t){t.setPressed(!1,e)}))},setValue:function(e){var t=this,n=t.items;switch(t.clear(!1),Fancy.typeOf(e)){case"array":Fancy.each(e,(function(e){switch(Fancy.typeOf(e)){case"string":Fancy.each(n,(function(t){t.value===e&&t.setPressed(!0,!0)}));break;case"number":n[e].setPressed(!0,!0)}}));break;case"string":Fancy.each(n,(function(t){t.value===e&&t.setPressed(!0,!0)}));break;case"number":var i=n[e];i&&i.setPressed(!0,!0)}}}),Fancy.define("Fancy.form.field.Tab",{mixins:[Fancy.form.field.Mixin],extend:Fancy.Widget,type:"field.tab",constructor:function(e){Fancy.apply(this,e),this.Super("const",arguments)},init:function(){var e=this;e.addEvents("collapsed","expanded"),e.Super("init",arguments);for(var t=0,n=e.items.length;t<n;t++){var i=e.items[t];"top"===i.labelAlign&&0===t&&(i.style={"padding-left":"0px"})}e.preRender(),e.render()},fieldCls:"fancy fancy-field-tab",value:"",width:100,emptyText:"",tpl:['<div class="fancy-field-tab-items">',"</div>"]}),function(){var e=Fancy,t=e.CLEARFIX_CLS,n=e.FIELD_CLS,i=e.FIELD_RADIO_CLS,a=e.FIELD_RADIO_COLUMN_CLS,r=e.FIELD_TEXT_CLS,o=e.FIELD_RADIO_ON_CLS,s=e.FIELD_RADIO_INPUT_CLS,l=e.FIELD_LABEL_CLS,c=e.FIELD_ERROR_CLS;e.define(["Fancy.form.field.Radio","Fancy.Radio"],{mixins:[e.form.field.Mixin],extend:e.Widget,type:"field.radio",radioRows:1,constructor:function(){this.Super("const",arguments)},init:function(){var t=this;t.addEvents("focus","blur","input","up","down","change","key"),t.Super("init",arguments);var n="";t.column&&(t.cls+=" "+a,n+='<div style="margin-left: '+t.labelWidth+'px;">'),e.each(t.items,(function(e,i){var a="",l=r;t.column||0===i||(a="margin-left:10px;"),e.value===t.value&&(l+=" "+o),n+=['<div class="'+l+'" value='+e.value+">",'<div class="'+s+'" style="float:left;'+a+'"></div>','<div style="float:left;margin:7px 0 0 0;">'+e.text+"</div>","</div>"].join("")})),t.column&&(n+="</div>"),t.itemsHTML=n,t.preRender(),t.render(),t.setColumnsStyle(),t.acceptedValue=t.value,t.set(t.value),t.ons()},labelText:"",labelWidth:60,value:!1,checkedCls:o,fieldCls:n+" "+i,tpl:['<div class="'+l+'" style="{labelWidth}{labelDisplay}">',"{label}",'<div class="'+c+'" style="{errorTextStyle}"></div>',"</div>","{itemsHTML}",'<div class="'+t+'"></div>'],ons:function(){var t=this,n=this.el;n.$dom.delegate("."+r,"click",(function(){t.disabled||t.set(e.get(this).attr("value"))})),n.on("mousedown",t.onMouseDown,t),n.on("mouseenter",t.onMouseOver,t),n.on("mouseleave",t.onMouseOut,t),t.tip&&n.on("mousemove",t.onMouseMove,t)},onClick:function(){var e=this,t=e.checkedCls;e.disabled||(e.addCls(t),e.toggleCls(t),e.value=e.hasCls(t),e.fire("change",e.value))},onMouseDown:function(e){this.disabled&&e.stopPropagation(),e.preventDefault()},set:function(e,t){var n=this,i=n.el,a=n.checkedCls;i.select("."+r).removeCls(a),i.select("[value="+e+"]").addCls(a),n.value=e,!1!==t&&n.fire("change",n.value)},setValue:function(e,t){this.set(e,t)},getValue:function(){return this.value},get:function(){return this.getValue()},clear:function(){this.set(!1)},calcColumns:function(){var t=this,n=0,i=t.width;"top"!==t.labelAlign&&t.label&&(i-=t.labelWidth,i-=20),e.Array.each(t.items,(function(e){e.text.length>n&&(n=e.text.length)}));var a=Math.floor(i/(7*n+30));t.columns&&t.columns<=a?a=t.columns:t.columns=a,t.columnWidth=Math.ceil(i/a),t.rows=Math.ceil(t.items.length/a)},setColumnsStyle:function(){var e=this;if(e.columns&&1!==e.rows){var t=e.el.select("."+r),n=e.el.select("."+r+" ."+s);t.each((function(t,i){i%e.columns==0&&n.item(i).css("margin-left","0px"),t.css("width",e.columnWidth)}))}}})}(),function(){Fancy.vtypes={},Fancy.addValid=function(e,t){Fancy.vtypes[e]=t},Fancy.isValid=function(e,t){var n;if(Fancy.isString(e)?n=Fancy.vtypes[e]:Fancy.isObject(e)&&(e.type?(n=Fancy.vtypes[e.type],Fancy.applyIf(e,n)):n=e),n.before){var i=n.before,a=[e];Fancy.isString(i)?a.push(i):Fancy.isArray(i)&&(a=a.concat(i)),a.reverse();for(var r=0,o=a.length;r<o;r++)if(n=Fancy.isObject(a[r])?a[r]:Fancy.vtypes[a[r]],n.re){if(!1===n.re.test(t))return n}else if(n.fn&&!1===n.fn.apply(n,[t]))return n}else if(n.re){if(!1===n.re.test(t))return n}else if(!1===n.fn.apply(n,[t]))return n;return!0}}(),Fancy.addValid("notempty",{text:"Must be present",fn:function(e){return null!==e&&void 0!==e&&0!==String(e).length}}),Fancy.addValid("notnan",{text:"Must be numeric",fn:function(e){return!isNaN(e)}}),Fancy.addValid("min",{before:["notempty","notnan"],text:"Must be must be at least {param}",fn:function(e){return e>=this.param}}),Fancy.addValid("max",{before:["notempty","notnan"],text:"Must be no more than {param}",fn:function(e){return e<=this.param}}),Fancy.addValid("range",{before:["notempty","notnan"],text:"Must be between {min} and {max}",fn:function(e){return e>=this.min&&e<=this.max}}),Fancy.addValid("email",{before:"notempty",re:/^(")?(?:[^\."])(?:(?:[\.])?(?:[\w\-!#$%&'*+\/=?\^_`{|}~]))*\1@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,text:"Is not a valid email address"}),Fancy.Mixin("Fancy.grid.mixin.Edit",{remove:function(e,t,n){var i=this,a=i.store,r="remove";if(i.store){if(t&&(r="removeAt"),Fancy.isArray(e))for(var o=0,s=e.length;o<s;o++)a[r](e[o],n);else a[r](e);!1!==n&&i.setSidesHeight(),clearInterval(i.removeInt),i.removeInt=setTimeout((function(){i.update(),delete i.removeInt}),1)}else setTimeout((function(){i.remove(e,t)}),100)},removeAt:function(e){this.remove(e,!0)},removeRow:function(e){this.remove(e,!0)},removeRowById:function(e){this.remove(e)},removeRowByID:function(e){this.remove(e)},removeAll:function(){var e=this;e.store.removeAll(),e.update(),e.scroller.update(),e.paging&&e.paging.updateBar(),e.isGroupable()&&e.grouping.reGroup()},add:function(e){var t=this;if(t.store)if(Fancy.isArray(e))for(var n=0,i=e.length;n<i;n++)t.add(e[n]);else t.store.add(e),t.setSidesHeight(),clearInterval(t.addInt),t.addInt=setTimeout((function(){t.update(),delete t.addInt}),1);else setTimeout((function(){t.add(e)}),100)},insert:function(e,t,n){var i,a=this,r=a.store;if(a.store)if(Fancy.isArray(t)){if(t.length){var o=t[0],s=Fancy.Object.keys(o);r.addField(s)}for(i=t.length-1;-1!==i;i--)a.insert(t[i],e,n);!1!==n&&a.setSidesHeight()}else if(Fancy.isArray(e)){if(e.length){o=e[0],s=Fancy.Object.keys(o);r.addField(s)}for(i=e.length-1;-1!==i;i--)a.insert(e[i],0,n);!1!==n&&a.setSidesHeight()}else{if(Fancy.isObject(e)&&void 0===t)r.addField(Fancy.Object.keys(e)),t=e,e=0;else if(Fancy.isObject(e)&&Fancy.isNumber(t)){r.addField(Fancy.Object.keys(e));var l=t;t=e,e=l}a.paging&&"server"!==r.pageType&&(e+=r.showPage*r.pageSize),r.insert(e,t,n),!1!==n&&a.setSidesHeight(),clearInterval(a.addInt),a.addInt=setTimeout((function(){a.update(),delete a.addInt}),1)}else setTimeout((function(){a.insert(e,t,n)}),100)},set:function(e,t,n){var i=this,a=i.store;i.store?Fancy.isObject(t)&&void 0===n?a.setItemData(e,t,n):a.set(e,t,n):setTimeout((function(){i.set(e,t,n)}),100)},setById:function(e,t,n){var i=this,a=i.store,r=a.getRow(e);if(void 0===r){if(void 0===a.getById(e))return!1;r=-1}if(!i.store)return setTimeout((function(){-1===r?i.setById(r,t,n):i.set(r,t,n)}),100),r;if(Fancy.isObject(t)&&void 0===n)for(var o in t){var s=i.getColumnByIndex(o);if(s&&"date"===s.type){var l=s.format,c=Fancy.Date.parse(t[o],l.read,l.mode),d=Fancy.Date.parse(a.getById(e).get(o),l.edit,l.mode);+c==+d&&delete t[o]}a.setItemData(r,t,n,e),-1===r&&a.getById(e).set(t)}else-1===r?a.getById(e).set(t,n):a.set(r,t,n,e);return r},undo:function(){var e=this,t=e.store,n=t.undoActions.splice(t.undoActions.length-1,1)[0];if(n)switch(n.type){case"edit":e.setById(n.id,n.key,n.oldValue);var i=n.value;n.value=n.oldValue,n.oldValue=i,t.redoActions.push(n),e.fire("undo");break;case"insert":t.undoStoppped=!0,e.remove(n.id),t.undoStoppped=!1,t.redoActions.push(n);break;case"remove":t.undoStoppped=!0,e.insert(n.rowIndex,n.data),t.undoStoppped=!1,t.redoActions.push(n)}},redo:function(){var e=this,t=e.store,n=t.redoActions.splice(t.redoActions.length-1,1)[0];switch(t.redoing=!0,n.type){case"edit":e.setById(n.id,n.key,n.oldValue);break;case"insert":e.insert(n.rowIndex,n.data);break;case"remove":e.remove(n.id)}delete t.redoing},undoAll:function(){for(var e=this,t=e.store,n=0,i=t.undoActions.length;n<i;n++)e.undo()},editCell:function(e){var t=this,n=t.getSideByCell(e),i=Number(e.attr("index")),a=Number(e.parent().attr("index")),r={side:n,rowIndex:i,columnIndex:a},o=t.getColumns(r.side);if(r.column=o[r.columnIndex],!0===r.column.editable){switch(r.column.type){case"string":case"number":case"combo":case"currency":case"date":case"image":case"text":case"tree":break;default:return}r.cell=e.dom;var s=t.get(r.rowIndex);r.item=s,r.data=s.data,r.column.smartIndexFn?r.value=r.column.smartIndexFn(r.data):r.value=t.store.get(r.rowIndex,r.column.index),t.celledit.edit(r)}},getCell:function(e){var t,n,i,a=this;if(void 0!==e.id&&void 0!==e.index){var r=a.getColumnOrderByKey(e.index),o=r.order,s=a.getRowById(e.id);if(t=r.side,n=a.getBody(t),i=n.getCell(s,o),!i.dom)return;return i}if(void 0!==e.rowIndex&&void 0!==e.columnIndex){if(t=e.side||"center",n=a.getBody(t),i=n.getCell(e.rowIndex,e.columnIndex),i.dom||(i=a.getBody("center").getCell(e.rowIndex,e.columnIndex)),i.dom||(i=a.getBody("left").getCell(e.rowIndex,e.columnIndex)),i.dom||(i=a.getBody("right").getCell(e.rowIndex,e.columnIndex)),!i.dom)return;return i}}}),Fancy.define(["Fancy.Grid","FancyGrid"],{extend:Fancy.Widget,mixins:["Fancy.grid.mixin.Grid",Fancy.panel.mixin.PrepareConfig,Fancy.panel.mixin.methods,"Fancy.grid.mixin.PrepareConfig","Fancy.grid.mixin.ActionColumn",Fancy.grid.mixin.Edit],plugins:[{type:"grid.updater"},{type:"grid.scroller"},{type:"grid.licence"},{type:"grid.refreshcolumns"}],type:"grid",theme:"default",i18n:"en",emptyText:"",prefix:"fancy-grid-",cls:"",widgetCls:Fancy.GRID_CLS,header:!0,shadow:!0,striped:!0,columnLines:!0,rowLines:!0,textSelection:!1,width:200,height:200,minWidth:200,minHeight:200,minColumnWidth:30,defaultColumnWidth:100,emptyValue:"&nbsp;",frame:!0,draggable:!1,activated:!1,multiSort:!1,tabEdit:!0,dirtyEnabled:!0,barScrollEnabled:!0,startResizing:!1,startEditByTyping:!1,filterCaseSensitive:!0,nativeResizeObserver:!1,dropOutSideActions:!0,constructor:function(e,t){var n=this;Fancy.isDom(e)?(t=t||{},t.renderTo=e):t=e,t=t||{};var i=function(e){if(e){var i=t.lang;Fancy.apply(t,e),i&&Fancy.apply(t.lang,i)}t.id&&(n.id=t.id),n.initId(),n.initColumnsIdSeedByIndex(),t=n.prepareConfig(t,n),Fancy.applyConfig(n,t),n.Super("const",arguments)},a=function(){var e=t.i18n||n.i18n;!0===Fancy.loadLang(e,i)&&i({})};Fancy.modules.grid||Fancy.fullBuilt||!1===Fancy.MODULELOAD||!1===Fancy.MODULESLOAD?a():Fancy.nojQuery?Fancy.loadModule("dom",(function(){Fancy.loadModule("grid",(function(){a()}))})):Fancy.loadModule("grid",(function(){a()}))},init:function(){var e=this;return e.addEvents("beforerender","afterrender","render","show","hide","destroy"),e.addEvents("headercellclick","headercellmousemove","headercellmousedown","headercellenter","headercellleave","docmouseup","docclick","docmove","beforeinit","init","columnresize","columnclick","columndblclick","columnenter","columnleave","columnmousedown","columntitlechange","cellclick","celldblclick","cellenter","cellleave","cellmousedown","beforecellmousedown","rowclick","rowdblclick","rowenter","rowleave","rowtrackenter","rowtrackleave","beforecolumndrag","columndrag","columnhide","columnshow","columnremove","columnadd","scroll","nativescroll","remove","insert","set","change","edit","update","beforesort","sort","beforeload","load","servererror","serversuccess","select","selectrow","deselectrow","clearselect","activate","deactivate","beforeedit","startedit","beforeendedit","endedit","beforesaving","changepage","changepagesize","dropitems","dragstart","dragrows","collapse","expand","treecollapse","treeexpand","lockcolumn","rightlockcolumn","unlockcolumn","filter","contextmenu","statechange","changewidth","changeheight"),Fancy.loadStyle(),!0!==Fancy.fullBuilt&&!1!==Fancy.MODULELOAD&&!1!==Fancy.MODULESLOAD&&!0!==e.fullBuilt&&!0!==e.neededModules&&"datepicker"!==e.wtype&&"monthpicker"!==e.wtype?void e.loadModules():Fancy.stylesLoaded?(e.initStore(),e.initPlugins(),e.ons(),e.initDateColumn(),e.fire("beforerender"),e.preRender(),e.render(),e.initElements(),e.initActionColumnHandler(),e.fire("render"),e.fire("afterrender"),e.setSides(),e.setSidesHeight(),e.setColumnsPosition(),e.lightStartUpdate(),e.initTextSelection(),e.initTouch(),e.initDebug(),e.fire("beforeinit"),void setTimeout((function(){e.inited=!0,e.fire("init"),e.setBodysHeight(),e.state||e._setColumnsAutoWidth()}),100)):void(e.intWaitForStyle=setInterval((function(){Fancy.stylesLoaded&&(clearInterval(e.intWaitForStyle),e.init())}),100))},loadModules:function(){var e=this,t={},n=e.columns||[],i=e.leftColumns||[],a=e.rightColumns||[];Fancy.modules=Fancy.modules||{},Fancy.nojQuery&&(t.dom=!0),Fancy.isTouch&&(t.touch=!0),e.summary&&(t.summary=!0,e.summary.options&&(t.menu=!0)),e.exporter&&(t.exporter=!0,t.excel=!0),e.paging&&(t.paging=!0),(e.filter||e.searching)&&(t.filter=!0),e.data&&e.data.proxy&&(t.edit=!0),e.clicksToEdit&&(t.edit=!0),e.defaults&&e.defaults.editable&&(t.edit=!0),(e.stateful||e.state)&&(t.state=!0),Fancy.isObject(e.data)&&(e.data.proxy&&(t["server-data"]=!0,Fancy.nojQuery&&(t.ajax=!0)),e.data.chart&&(t["chart-integration"]=!0)),e.expander&&(t.expander=!0),e.isGroupedHeader&&(t["grouped-header"]=!0),e.grouping&&(t.grouping=!0),e.summary&&(t.summary=!0),e.exporter&&(t.exporter=!0,t.excel=!0),(e.trackOver||e.columnTrackOver||e.cellTrackOver||e.selection)&&(t.selection=!0),e.contextmenu&&(t.menu=!0),e.infinite&&(t.infinite=!0);var r=function(e){if(e.menu)return t.menu=!0,!0};Fancy.each(e.events,(function(e){for(var n in e)"contextmenu"===n&&(t.menu=!0)})),Fancy.each(e.controls,(function(e){"contextmenu"===e.event&&(t.menu=!0)})),Fancy.each(e.tbar,r),Fancy.each(e.bbar,r),Fancy.each(e.buttons,r),Fancy.each(e.subTBar,r);var o=n.concat(i).concat(a);for(var s in Fancy.each(o,(function(n){switch(!0===n.draggable&&(t["column-drag"]=!0),!0===n.sortable&&(t.sort=!0),!0===n.editable&&(t.edit=!0),n.menu&&(t.menu=!0),n.filter&&(t.filter=!0),n.type){case"select":e.checkboxRowSelection=!0,t.selection=!0;break;case"combo":n.data&&n.data.proxy&&(t.ajax=!0);break;case"progressbar":case"progressdonut":case"grossloss":case"hbar":t.spark=!0;break;case"tree":t.tree=!0;break;case"date":t.date=!0,t.selection=!0}})),Fancy.isArray(e.tbar)&&Fancy.each(e.tbar,(function(e){switch(e.action){case"add":case"remove":t.edit=!0}})),e.gridToGrid&&(t.dd=!0),e.rowDragDrop&&(t.dd=!0),e.neededModules={length:0},t)void 0===Fancy.modules[s]&&(e.neededModules[s]=!0,e.neededModules.length++);if(0===e.neededModules.length)return e.neededModules=!0,void e.init();var l=function(t){delete e.neededModules[t],0===--e.neededModules.length&&(e.neededModules=!0,e.init())};if(e.neededModules.dom)Fancy.loadModule("dom",(function(t){if(delete e.neededModules[t],0===--e.neededModules.length)e.neededModules=!0,e.init();else for(var n in e.neededModules)"length"!==n&&Fancy.loadModule(n,l)}));else for(var s in e.neededModules)"length"!==s&&Fancy.loadModule(s,l)},lockColumn:function(e,t){var n=this;if(1===n.columns.length)return!1;Fancy.isString(e)&&Fancy.each(n.columns,(function(t,n){if(t.index===e)return e=n,!0}));var i=n.removeColumn(e,t);n.insertColumn(i,n.leftColumns.length,"left"),n.header&&(n.leftHeader.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.leftHeader.fixGroupHeaderSizing())),n.body.reSetIndexes(),n.leftBody.reSetIndexes(),n.fire("lockcolumn",{column:i}),n.update()},rightLockColumn:function(e,t){var n=this;if(1===n.columns.length)return!1;Fancy.isString(e)&&Fancy.each(n.columns,(function(t,n){if(t.index===e)return e=n,!0}));var i=n.removeColumn(e,t);n.insertColumn(i,0,"right"),n.header&&(n.rightHeader.reSetCheckBoxes(),n.groupheader&&(n.header.fixGroupHeaderSizing(),n.rightHeader.fixGroupHeaderSizing())),n.body.reSetIndexes(),n.rightBody.reSetIndexes(),n.fire("rightlockcolumn",{column:i}),n.update()},unLockColumn:function(e,t){var n,i=this;switch(void 0===t&&(Fancy.isString(e)?(Fancy.each(i.leftColumns,(function(n,i){if(n.index===e)return t="left",e=i,!0})),void 0===t&&Fancy.each(i.rightColumns,(function(n,i){if(n.index===e)return t="right",e=i,!0}))):t="left"),t){case"left":Fancy.isString(e)&&Fancy.each(i.leftColumns,(function(t,n){if(t.index===e)return e=n,!0})),n=i.removeColumn(e,t),i.insertColumn(n,0,"center","left"),0===i.leftColumns.length&&(i.leftEl.addCls(Fancy.GRID_LEFT_EMPTY_CLS),i.centerEl.css("left","0px"));break;case"right":if(Fancy.isString(e)&&Fancy.each(i.rightColumns,(function(t,n){if(t.index===e)return e=n,!0})),n=i.removeColumn(e,t),i.insertColumn(n,i.columns.length,"center","right"),0===i.rightColumns.length){i.rightEl.addCls(Fancy.GRID_RIGHT_EMPTY_CLS);var a=parseInt(i.body.el.css("width"));i.body.el.css("width",a+2)}}"left"===t&&i.isGroupable()&&0===i.leftColumns.length&&i.grouping.insertGroupEls(),i.header&&i.groupheader&&(i.header.fixGroupHeaderSizing(),i.rightHeader&&i.rightHeader.fixGroupHeaderSizing(),i.leftHeader&&i.leftHeader.fixGroupHeaderSizing()),i.body.reSetIndexes(),i.leftBody.reSetIndexes(),i.rightBody.reSetIndexes(),i.fire("unlockcolumn",{column:n})},moveColumn:function(e,t,n,i,a){var r,o=this;if(a){for(var s=0,l=a.end-a.start+1,c=a.cell.attr("index"),d=o.getHeader(t),u=a.cell.dom.outerHTML;s<l;s++)o.moveColumn(e,t,a.end-s,i);var h=o.getColumns(t),f=d.el.select("."+Fancy.GRID_HEADER_CELL_CLS);for(s=i,l=s+(a.end-a.start+1);s<l;s++){var p=h[s],g=f.item(s);p.grouping=c,g.attr("group-index",c)}return d.el.append(u),void d.fixGroupHeaderSizing()}if("center"===e)switch(r=o.removeColumn(n,"center"),t){case"left":o.insertColumn(r,i,"left","center");break;case"right":o.insertColumn(r,i,"right","center")}else if("left"===e)switch(r=o.removeColumn(n,"left"),t){case"center":o.insertColumn(r,i,"center","left");break;case"right":o.insertColumn(r,i,"right","left")}else if("right"===e)switch(r=o.removeColumn(n,"right"),t){case"center":o.insertColumn(r,i,"center","right");break;case"left":o.insertColumn(r,i,"left","right")}o.groupheader&&(o.header.fixGroupHeaderSizing(),o.leftColumns&&o.leftHeader.fixGroupHeaderSizing(),o.rightColumns&&o.rightHeader.fixGroupHeaderSizing()),o.getHeader(e).reSetCheckBoxes(),o.getHeader(t).reSetCheckBoxes(),o.update()},updateColumnsVisibility:function(){var e=this;e.columns&&(e.header&&e.header.updateCellsVisibility(),e.body.updateColumnsVisibility()),e.leftColumns&&(e.leftHeader&&e.leftHeader.updateCellsVisibility(),e.leftBody.updateColumnsVisibility()),e.rightColumns&&(e.rightHeader&&e.rightHeader.updateCellsVisibility(),e.rightBody.updateColumnsVisibility())},initColumnsIdSeedByIndex:function(){this.columnsIdsSeed={}},getColumnId:function(e){var t=this;return void 0===t.columnsIdsSeed[e]?t.columnsIdsSeed[e]=0:t.columnsIdsSeed[e]++,t.columnsIdsSeed[e]?e+"-"+t.columnsIdsSeed[e]:e},isGroupable:function(){var e=this;return e.grouping&&e.grouping.by},_setColumnsAutoWidth:function(){var e=this;if(e.autoColumnWidth&&(!e.state||Fancy.Object.isEmpty(e.state.getState())||e.allowAutoWidthStateIsEmpty)&&!e._firstTimeAutoColumnWidth){var t=e.getColumns();Fancy.each(t,(function(t){t.autoWidth&&!t.hidden&&(t.index||t.smartIndexFn||t.render)&&e.autoSizeColumn(t.id,!0,t)})),setTimeout((function(){e._firstTimeAutoColumnWidth=!0,delete e.allowAutoWidthStateIsEmpty}),1e3)}}}),FancyGrid.get=function(e){var t=Fancy.get(e);if(t.dom){var n=t.select("."+Fancy.GRID_CLS).item(0);if(n.dom){var i=n.dom.id;return Fancy.getWidget(i)}}},FancyGrid.defineTheme=Fancy.defineTheme,FancyGrid.defineController=Fancy.defineController,FancyGrid.addValid=Fancy.addValid,!Fancy.nojQuery&&Fancy.$&&(Fancy.$.fn.FancyGrid=function(e){return this.selector?e.renderTo=Fancy.$(this.selector)[0].id:e.renderTo=this.attr("id"),new Fancy.Grid(e)}),function(){var e=Fancy;e.define("Fancy.grid.plugin.RowHeight",{extend:e.Plugin,ptype:"grid.rowheight",inWidgetName:"rowheight",cellTip:"{value}",stopped:!0,waitingForParentVisibility:!1,constructor:function(){this.Super("const",arguments),this.rows={},this.rowIndexes=[],this.rowIndexesSum=[]},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var e=this,t=e.widget;t.on("init",e.onInit,e),t.on("update",e.onUpdate,e),t.on("columnresize",e.onColumnResize,e),t.on("changepage",e.onChangePage,e),t.on("sort",e.onSort,e)},onInit:function(){var e=this,t=e.widget;setTimeout((function(){t.scroller.update(e.totalHeight)}),50)},onUpdate:function(){var t=this,n=t.widget,i=n.getDataView(),a=0;e.each(i,(function(i){var r=i.id,o=t.rows[r],s=n.getRowById(r),l=n.getDomRow(s);e.each(l,(function(t){e.get(t).css("height",o)})),a+=o})),t.totalHeight=a,n.isGroupable()&&(t.totalHeight+=n.grouping.getGroupRowsHeight()),setTimeout((function(){n.setSidesHeight(t.totalHeight),n.scroller.update(t.totalHeight)}),50)},add:function(t,n,i){var a=this;a.rows[t]&&a.rows[t]>n||(a.rows[t]=n,a.rowIndexes[i]=n,clearInterval(a.intIndexesSum),a.intIndexesSum=setTimeout((function(){a.rowIndexesSum=[],e.each(a.rowIndexes,(function(e,t){a.rowIndexesSum[t]=0===t?e:a.rowIndexesSum[t-1]+e}))}),1))},getRowsHeight:function(t){var n=this,i=0;return e.each(t,(function(e){var t=e.get("id");i+=n.rows[t]})),i},onColumnResize:function(e,t){var n=this;n.rows={},"text"===t.column.type&&t.column.autoHeight&&setTimeout((function(){n.widget.update(),n.onUpdate()}),400)},onChangePage:function(){this.rows={}},onSort:function(){this.rows={}},waitToShow:function(){var e=this;if(!e.waitingForParentVisibility){e.waitingForParentVisibility=!0;var t=e.widget,n=e.getHiddenParent(t.el);n&&(e.intWaitToShow=setInterval((function(){"none"!==n.css("display")&&(clearInterval(e.intWaitToShow),e.widget.update(),e.onUpdate())}),350))}},getHiddenParent:function(e,t){t=t||0;if(!(++t>10)){if("none"===e.css("display"))return e;if("body"!==e.dom.tagName.toLocaleLowerCase())return e=e.parent(),this.getHiddenParent(e,t)}}})}(),function(){var e=Fancy,t=500,n=e.TOOLTIP_CLS,i=e.TOOLTIP_INNER_CLS;e.define("Fancy.grid.plugin.CellTip",{extend:e.Plugin,ptype:"grid.celltip",inWidgetName:"celltip",cellTip:"{value}",stopped:!0,constructor:function(){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var t=this,n=t.widget,i=e.get(document);n.on("cellenter",t.onCellEnter,t),n.on("cellleave",t.onCellLeave,t),i.on("touchend",t.onTouchEnd,t),i.on("mousemove",t.onDocMove,t)},onCellEnter:function(t,n){var i=this,a=n.column,r=i.cellTip,o=n.e;if(n&&a.cellTip){if(e.isString(a.cellTip))r=a.cellTip;else if(e.isFunction(a.cellTip)&&!1===(r=a.cellTip(n)))return;var s=new e.Template(r),l={title:a.title,value:n.value,columnIndex:0,rowIndex:0};i.stopped=!1,e.apply(l,n.data),e.tip.update(s.getHTML(l)),e.tip.show(o.pageX+15,o.pageY-25)}},onCellLeave:function(){this.stopped=!0,e.tip.hide(t)},onTouchEnd:function(){this.stopped=!0,e.tip.hide(t)},onDocMove:function(a){if(!0!==this.stopped){var r=this,o=r.widget;if("none"===o.el.css("display")||o.panel&&o.panel.el&&"none"===o.panel.el.css("display"))return r.stopped=!0,void e.tip.hide(t);var s=e.get(a.target);return"body"===s.prop("tagName").toLocaleLowerCase()?(r.stopped=!0,void e.tip.hide(t)):s.hasClass(n)||s.hasClass(i)||!1!==o.el.within(s)?void e.tip.show(a.pageX+15,a.pageY-25):(r.stopped=!0,void e.tip.hide(t))}}})}(),function(){var e=Fancy,t=500,n=e.TOOLTIP_CLS,i=e.TOOLTIP_INNER_CLS;e.define("Fancy.grid.plugin.HeaderCellTip",{extend:e.Plugin,ptype:"grid.headercelltip",inWidgetName:"headercelltip",cellTip:"{title}",stopped:!0,constructor:function(){this.Super("const",arguments)},init:function(){this.Super("init",arguments),this.ons()},ons:function(){var t=this,n=t.widget,i=e.get(document);n.on("headercellenter",t.onCellEnter,t),n.on("headercellleave",t.onCellLeave,t),i.on("touchend",t.onTouchEnd,t),i.on("mousemove",t.onDocMove,t)},onCellEnter:function(t,n){var i=this,a=n.column,r=i.cellTip,o=n.e;if(a.headerCellTip){var s={title:a.title,columnIndex:n.columnIndex,side:n.side};if(e.isString(a.headerCellTip))r=a.headerCellTip;else if(e.isFunction(a.headerCellTip)&&(n.data=s,!1===(r=a.headerCellTip(n))))return;var l=new e.Template(r);i.stopped=!1,e.apply(s,n.data),e.tip.update(l.getHTML(s)),e.tip.show(o.pageX+15,o.pageY-25)}},onCellLeave:function(){this.stopped=!0,e.tip.hide(t)},onTouchEnd:function(){this.stopped=!0,e.tip.hide(t)},onDocMove:function(a){if(!0!==this.stopped){var r=this,o=r.widget;if("none"===o.el.css("display")||o.panel&&o.panel.el&&"none"===o.panel.el.css("display"))return r.stopped=!0,void e.tip.hide(t);var s=e.get(a.target);return"body"===s.prop("tagName").toLocaleLowerCase()?(r.stopped=!0,void e.tip.hide(t)):s.hasClass(n)||s.hasClass(i)||!1!==o.el.within(s)?void e.tip.show(a.pageX+15,a.pageY-25):(r.stopped=!0,void e.tip.hide(t))}}})}(),function(){var e=Fancy,t=e.TOOLTIP_CLS,n=e.TOOLTIP_INNER_CLS;e.define("Fancy.ToolTip",{extend:e.Widget,constructor:function(){this.Super("const",arguments)},init:function(){this.initTpl(),this.render(),this.ons()},tpl:['<div class="'+n+'">{text}</div>'],widgetCls:t,cls:"",extraCls:"",render:function(){var t=this,n=e.get(t.renderTo||document.body).dom,i=e.get(document.createElement("div"));i.addCls(e.cls,t.widgetCls,t.cls,t.extraCls),i.update(t.tpl.getHTML({text:t.text})),t.el=e.get(n.appendChild(i.dom))},show:function(e,t){var n=this;clearInterval(n.timeout),delete n.timeout,"none"===n.css("display")&&n.css({display:"block"}),n.css({left:e,top:t})},hide:function(e){var t=this;clearInterval(t.timeout),e?t.timeout=setTimeout((function(){t.el.hide(),delete t.timeout}),e):t.el.hide()},destroy:function(){this.el.destroy()},update:function(e){this.el.select("."+n).update(e)},ons:function(){var e=this;e.el.on("mouseenter",e.onMouseEnter,e)},onMouseEnter:function(){this.hide(500)}}),e.tip={update:function(t){e.tip=new e.ToolTip({text:t})},show:function(t,n){e.tip=new e.ToolTip({text:" "}),e.tip.show(t,n)},hide:function(){e.tip=new e.ToolTip({text:" "})}}}(),Fancy.enableCompo=function(){function e(){if(0!==a)for(var e in r){var n,o,s=r[e],l=i.querySelectorAll(e),c=s.appPreSelector?s.appPreSelector+"-":"data-",d=s.preSelector?s.preSelector+"-":"fancy-",u=0,h=l.length;if(0===l.length)return;for(;u<h;u++){var f={},p=l[u],g=p.id||"rand-id-"+ +new Date,y=p.attributes;for(n=0,o=y.length;n<o;n++){var m=y[n],v=m.name,C=m.value;new RegExp(c).test(v)&&(C=t(C),f[v.replace(c,"")]=C)}!function(){var e=p.getElementsByTagName("*");for(n=0,o=e.length;n<o;n++){var i,a,r=e[n],s=r.tagName.toLowerCase();new RegExp(d).test(s)&&(i=s.replace(d,""),a=t(r.innerHTML),f[i.replace(c,"")]=a)}}(),p.outerHTML='<div id="'+g+'"></div>',s.init(i.getElementById(g),f)}}}function t(e){return/\[/.test(e)||/\{/.test(e)?(e=e.replace(/\n/g,""),e=new Function("return "+e+";")()):e=isNaN(Number(e))?e.replace(/\n/g,""):Number(e),e}var n,i=document,a=0,r={};Fancy.Component=function(e,t){a++,r[e]=t},Fancy.stopWatch=function(){clearInterval(n)},e(),i.addEventListener("DOMContentLoaded",(function(){e()})),setTimeout((function(){e()}),1),n=setInterval((function(){e()}),250),Fancy.Component("fancy-grid",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyGrid(t)}}),Fancy.Component("fancy-form",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyForm(t)}}),Fancy.Component("fancy-tab",{preSelector:"fancy",attrPreSelector:"data",init:function(e,t){t.renderTo=e,window[e.id]=new FancyTab(t)}})},Fancy}))},51299:function(e,t,n){n(96958),e.exports=Fancy}}]);